window.CodeMirror=function(){"use strict";function e(n,r){if(!(this instanceof e))return new e(n,r);this.options=r=r||{};for(var i in li)!r.hasOwnProperty(i)&&li.hasOwnProperty(i)&&(r[i]=li[i]);f(r);var o="string"==typeof r.value?0:r.value.first,a=this.display=t(n,o);a.wrapper.CodeMirror=this,$(this),r.autofocus&&!Hr&&pe(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Yn},s(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var l=r.value;"string"==typeof l&&(l=new bi(r.value,r.mode)),ae(this,pn)(this,l),Cr&&setTimeout(ir(de,this,!0),20),ge(this);var u;try{u=document.activeElement==a.input}catch(c){}u||r.autofocus&&!Hr?setTimeout(ir(Te,this),20):ze(this),ae(this,function(){for(var e in si)si.propertyIsEnumerable(e)&&si[e](this,r[e],$i);for(var t=0;t<di.length;++t)di[t](this)})()}function t(e,t){var n={},r=n.input=sr("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return Lr?r.style.width="1000px":r.setAttribute("wrap","off"),Fr&&(r.style.border="1px solid black"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false"),n.inputDiv=sr("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=sr("div",[sr("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=sr("div",[sr("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=sr("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=sr("div",null,"CodeMirror-gutter-filler"),n.lineDiv=sr("div",null,"CodeMirror-code"),n.selectionDiv=sr("div",null,null,"position: relative; z-index: 1"),n.cursor=sr("div","\xa0","CodeMirror-cursor"),n.otherCursor=sr("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=sr("div",null,"CodeMirror-measure"),n.lineSpace=sr("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=sr("div",[sr("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=sr("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=sr("div",null,null,"position: absolute; height: "+Ai+"px; width: 1px;"),n.gutters=sr("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=sr("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=sr("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),Sr&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),e.appendChild?e.appendChild(n.wrapper):e(n.wrapper),Fr&&(r.style.width="0px"),Lr||(n.scroller.draggable=!0),jr?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):Sr&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px"),n.viewOffset=n.lastSizeC=0,n.showingFrom=n.showingTo=t,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Yn,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),t.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),t.doc.frontier=t.doc.first,L(t,100),t.state.modeGen++,t.curOp&&$e(t)}function r(e){e.options.lineWrapping?(e.display.wrapper.className+=" CodeMirror-wrap",e.display.sizer.style.minWidth=""):(e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),c(e)),o(e),$e(e),U(e),setTimeout(function(){d(e)},100)}function i(e){var t=ne(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/re(e.display)-3);return function(i){return Ht(e.doc,i)?0:n?(Math.ceil(i.text.length/r)||1)*t:t}}function o(e){var t=e.doc,n=i(e);t.iter(function(e){var t=n(e);t!=e.height&&mn(e,t)})}function a(e){var t=gi[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:""),e.state.disableInput=t.disableInput}function s(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),U(e)}function l(e){$(e),$e(e),setTimeout(function(){h(e)},20)}function $(e){var t=e.display.gutters,n=e.options.gutters;lr(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(sr("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none"}function u(e,t){if(0==t.height)return 0;for(var n,r=t.text.length,i=t;n=Dt(i);){var o=n.find();i=hn(e,o.from.line),r+=o.from.ch-o.to.ch}for(i=t;n=Pt(i);){var o=n.find();r-=i.text.length-o.from.ch,i=hn(e,o.to.line),r+=i.text.length-o.to.ch}return r}function c(e){var t=e.display,n=e.doc;t.maxLine=hn(n,n.first),t.maxLineLength=u(n,t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var r=u(n,e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function f(e){var t=er(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function d(e){var t=e.display,n=e.doc.height,r=n+j(t);t.sizer.style.minHeight=t.heightForcer.style.top=r+"px",t.gutters.style.height=Math.max(r,t.scroller.clientHeight-Ai)+"px";var i=Math.max(r,t.scroller.scrollHeight),o=t.scroller.scrollWidth>t.scroller.clientWidth+1,a=i>t.scroller.clientHeight+1;a?(t.scrollbarV.style.display="block",t.scrollbarV.style.bottom=o?dr(t.measure)+"px":"0",t.scrollbarV.firstChild.style.height=i-t.scroller.clientHeight+t.scrollbarV.clientHeight+"px"):(t.scrollbarV.style.display="",t.scrollbarV.firstChild.style.height="0"),o?(t.scrollbarH.style.display="block",t.scrollbarH.style.right=a?dr(t.measure)+"px":"0",t.scrollbarH.firstChild.style.width=t.scroller.scrollWidth-t.scroller.clientWidth+t.scrollbarH.clientWidth+"px"):(t.scrollbarH.style.display="",t.scrollbarH.firstChild.style.width="0"),o&&a?(t.scrollbarFiller.style.display="block",t.scrollbarFiller.style.height=t.scrollbarFiller.style.width=dr(t.measure)+"px"):t.scrollbarFiller.style.display="",o&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(t.gutterFiller.style.display="block",t.gutterFiller.style.height=dr(t.measure)+"px",t.gutterFiller.style.width=t.gutters.offsetWidth+"px"):t.gutterFiller.style.display="",Rr&&0===dr(t.measure)&&(t.scrollbarV.style.minWidth=t.scrollbarH.style.minHeight=Dr?"18px":"12px",t.scrollbarV.style.pointerEvents=t.scrollbarH.style.pointerEvents="none")}function p(e,t,n){var r=e.scroller.scrollTop,i=e.wrapper.clientHeight;"number"==typeof n?r=n:n&&(r=n.top,i=n.bottom-n.top),r=Math.floor(r-q(e));var o=Math.ceil(r+i);return{from:yn(t,r),to:yn(t,o)}}function h(e){var t=e.display;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=m(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,i=n+"px",o=t.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var a=0,s=o.alignable;a<s.length;++a)s[a].style.left=i;e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}}function g(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=v(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(sr("div",[sr("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a),r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",!0}return!1}function v(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function m(e){return cr(e.scroller).left-cr(e.sizer).left}function _(e,t,n,r){for(var i,o=e.display.showingFrom,a=e.display.showingTo,s=p(e.display,e.doc,n),l=!0;;l=!1){var $=e.display.scroller.clientWidth;if(!y(e,t,s,r))break;if(i=!0,t=[],C(e),d(e),l&&e.options.lineWrapping&&$!=e.display.scroller.clientWidth)r=!0;else if(r=!1,n&&(n=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,"number"==typeof n?n:n.top)),s=p(e.display,e.doc,n),s.from>=e.display.showingFrom&&s.to<=e.display.showingTo)break}return i&&(Bn(e,"update",e),(e.display.showingFrom!=o||e.display.showingTo!=a)&&Bn(e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),i}function y(e,t,n,r){var i=e.display,o=e.doc;if(!i.wrapper.clientWidth)return i.showingFrom=i.showingTo=o.first,void(i.viewOffset=0);if(!(!r&&0==t.length&&n.from>i.showingFrom&&n.to<i.showingTo)){g(e)&&(t=[{from:o.first,to:o.first+o.size}]);var a=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=e.options.fixedGutter?a:"0";var s=1/0;if(e.options.lineNumbers)for(var l=0;l<t.length;++l)t[l].diff&&t[l].from<s&&(s=t[l].from);var $=o.first+o.size,u=Math.max(n.from-e.options.viewportMargin,o.first),c=Math.min($,n.to+e.options.viewportMargin);if(i.showingFrom<u&&u-i.showingFrom<20&&(u=Math.max(o.first,i.showingFrom)),i.showingTo>c&&i.showingTo-c<20&&(c=Math.min($,i.showingTo)),Jr)for(u=_n(Ft(o,hn(o,u)));$>c&&Ht(o,hn(o,c));)++c;var f=[{from:Math.max(i.showingFrom,o.first),to:Math.min(i.showingTo,$)}];if(f=f[0].from>=f[0].to?[]:x(f,t),Jr)for(var l=0;l<f.length;++l)for(var d,p=f[l];d=Pt(hn(o,p.to-1));){var h=d.find().from.line;if(!(h>p.from)){f.splice(l--,1);break}p.to=h}for(var v=0,l=0;l<f.length;++l){var p=f[l];p.from<u&&(p.from=u),p.to>c&&(p.to=c),p.from>=p.to?f.splice(l--,1):v+=p.to-p.from}if(!r&&v==c-u&&u==i.showingFrom&&c==i.showingTo)return void w(e);f.sort(function(e,t){return e.from-t.from});try{var m=document.activeElement}catch(_){}.7*(c-u)>v&&(i.lineDiv.style.display="none"),E(e,u,c,f,s),i.lineDiv.style.display="",m&&document.activeElement!=m&&m.offsetHeight&&m.focus();var y=u!=i.showingFrom||c!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight;return y&&(i.lastSizeC=i.wrapper.clientHeight,L(e,400)),i.showingFrom=u,i.showingTo=c,b(e),w(e),!0}}function b(e){for(var t,n=e.display,r=n.lineDiv.offsetTop,i=n.lineDiv.firstChild;i;i=i.nextSibling)if(i.lineObj){if(Sr){var o=i.offsetTop+i.offsetHeight;t=o-r,r=o}else{var a=cr(i);t=a.bottom-a.top}var s=i.lineObj.height-t;if(2>t&&(t=ne(n)),s>.001||-.001>s){mn(i.lineObj,t);var l=i.lineObj.widgets;if(l)for(var $=0;$<l.length;++$)l[$].height=l[$].node.offsetHeight}}}function w(e){var t=e.display.viewOffset=bn(e,hn(e.doc,e.display.showingFrom));e.display.mover.style.top=t+"px"}function x(e,t){for(var n=0,r=t.length||0;r>n;++n){for(var i=t[n],o=[],a=i.diff||0,s=0,l=e.length;l>s;++s){var $=e[s];i.to<=$.from&&i.diff?o.push({from:$.from+a,to:$.to+a}):i.to<=$.from||i.from>=$.to?o.push($):(i.from>$.from&&o.push({from:$.from,to:i.from}),i.to<$.to&&o.push({from:i.to+a,to:$.to+a}))}e=o}return e}function k(e){for(var t=e.display,n={},r={},i=t.gutters.firstChild,o=0;i;i=i.nextSibling,++o)n[e.options.gutters[o]]=i.offsetLeft,r[e.options.gutters[o]]=i.offsetWidth;return{fixedPos:m(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function E(e,t,n,r,i){function o(t){var n=t.nextSibling;return Lr&&Wr&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),n}var a=k(e),s=e.display,l=e.options.lineNumbers;r.length||Lr&&e.display.currentWheelTarget||lr(s.lineDiv);var $=s.lineDiv,u=$.firstChild,c=r.shift(),f=t;for(e.doc.iter(t,n,function(t){if(c&&c.to==f&&(c=r.shift()),Ht(e.doc,t)){if(0!=t.height&&mn(t,0),t.widgets&&u&&u.previousSibling)for(var n=0;n<t.widgets.length;++n){var s=t.widgets[n];if(s.showIfHidden){var d=u.previousSibling;if(/pre/i.test(d.nodeName)){var p=sr("div",null,null,"position: relative");d.parentNode.replaceChild(p,d),p.appendChild(d),d=p}var h=d.appendChild(sr("div",[s.node],"CodeMirror-linewidget"));s.handleMouseEvents||(h.ignoreEvents=!0),O(s,h,d,a)}}}else if(c&&c.from<=f&&c.to>f){for(;u.lineObj!=t;)u=o(u);l&&f>=i&&u.lineNumber&&ur(u.lineNumber,v(e.options,f)),u=u.nextSibling}else{if(t.widgets)for(var g,m=0,_=u;_&&20>m;++m,_=_.nextSibling)if(_.lineObj==t&&/div/i.test(_.nodeName)){g=_;break}var y=A(e,t,f,a,g);if(y!=g)$.insertBefore(y,u);else{for(;u!=g;)u=o(u);u=u.nextSibling}y.lineObj=t}++f});u;)u=o(u)}function A(e,t,n,r,i){var o,a=nn(e,t),s=a.pre,l=t.gutterMarkers,$=e.display,u=a.bgClass?a.bgClass+" "+(t.bgClass||""):t.bgClass;if(!(e.options.lineNumbers||l||u||t.wrapClass||t.widgets))return s;if(i){i.alignable=null;for(var c,f=!0,d=0,p=null,h=i.firstChild;h;h=c)if(c=h.nextSibling,/\bCodeMirror-linewidget\b/.test(h.className)){for(var g=0;g<t.widgets.length;++g){var m=t.widgets[g];if(m.node==h.firstChild){m.above||p||(p=h),O(m,h,i,r),++d;break}}if(g==t.widgets.length){f=!1;break}}else i.removeChild(h);i.insertBefore(s,p),f&&d==t.widgets.length&&(o=i,i.className=t.wrapClass||"")}if(o||(o=sr("div",null,t.wrapClass,"position: relative"),o.appendChild(s)),u&&o.insertBefore(sr("div",null,u+" CodeMirror-linebackground"),o.firstChild),e.options.lineNumbers||l){var _=o.insertBefore(sr("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),o.firstChild);if(e.options.fixedGutter&&(o.alignable||(o.alignable=[])).push(_),!e.options.lineNumbers||l&&l["CodeMirror-linenumbers"]||(o.lineNumber=_.appendChild(sr("div",v(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+$.lineNumInnerWidth+"px"))),l)for(var y=0;y<e.options.gutters.length;++y){var b=e.options.gutters[y],w=l.hasOwnProperty(b)&&l[b];w&&_.appendChild(sr("div",[w],"CodeMirror-gutter-elt","left: "+r.gutterLeft[b]+"px; width: "+r.gutterWidth[b]+"px"))}}if(Sr&&(o.style.zIndex=2),t.widgets&&o!=i)for(var g=0,x=t.widgets;g<x.length;++g){var m=x[g],k=sr("div",[m.node],"CodeMirror-linewidget");m.handleMouseEvents||(k.ignoreEvents=!0),O(m,k,o,r),m.above?o.insertBefore(k,e.options.lineNumbers&&0!=t.height?_:s):o.appendChild(k),Bn(m,"redraw")}return o}function O(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function C(e){var t=e.display,n=Ke(e.doc.sel.from,e.doc.sel.to);if(n||e.options.showCursorWhenSelecting?S(e):t.cursor.style.display=t.otherCursor.style.display="none",n?t.selectionDiv.style.display="none":M(e),e.options.moveInputWithCursor){var r=J(e,e.doc.sel.head,"div"),i=cr(t.wrapper),o=cr(t.lineDiv);t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+o.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+o.left-i.left))+"px"}}function S(e){var t=e.display,n=J(e,e.doc.sel.head,"div");t.cursor.style.left=n.left+"px",t.cursor.style.top=n.top+"px",t.cursor.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",t.cursor.style.display="",n.other?(t.otherCursor.style.display="",t.otherCursor.style.left=n.other.left+"px",t.otherCursor.style.top=n.other.top+"px",t.otherCursor.style.height=.85*(n.other.bottom-n.other.top)+"px"):t.otherCursor.style.display="none"}function M(e){function t(e,t,n,r){0>t&&(t=0),a.appendChild(sr("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?s-e:n)+"px; height: "+(r-t)+"px"))}function n(n,r,o){function a(t,r){return X(e,Ge(n,t),"div",c,r)}var $,u,c=hn(i,n),f=c.text.length;return hr(wn(c),r||0,null==o?f:o,function(e,n,i){var c,d,p,h=a(e,"left");if(e==n)c=h,d=p=h.left;else{if(c=a(n-1,"right"),"rtl"==i){var g=h;h=c,c=g}d=h.left,p=c.right}null==r&&0==e&&(d=l),c.top-h.top>3&&(t(d,h.top,null,h.bottom),d=l,h.bottom<c.top&&t(d,h.bottom,null,c.top)),null==o&&n==f&&(p=s),(!$||h.top<$.top||h.top==$.top&&h.left<$.left)&&($=h),(!u||c.bottom>u.bottom||c.bottom==u.bottom&&c.right>u.right)&&(u=c),l+1>d&&(d=l),t(d,c.top,p-d,c.bottom)}),{start:$,end:u}}var r=e.display,i=e.doc,o=e.doc.sel,a=document.createDocumentFragment(),s=r.lineSpace.offsetWidth,l=R(e.display);if(o.from.line==o.to.line)n(o.from.line,o.from.ch,o.to.ch);else{var $=hn(i,o.from.line),u=hn(i,o.to.line),c=Ft(i,$)==Ft(i,u),f=n(o.from.line,o.from.ch,c?$.text.length:null).end,d=n(o.to.line,c?0:null,o.to.ch).start;c&&(f.top<d.top-2?(t(f.right,f.top,null,f.bottom),t(l,d.top,d.left,d.bottom)):t(f.right,f.top,d.left-f.right,f.bottom)),f.bottom<d.top&&t(l,f.bottom,null,d.top)}$r(r.selectionDiv,a),r.selectionDiv.style.display=""}function N(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",e.options.cursorBlinkRate>0&&(t.blinker=setInterval(function(){t.cursor.style.visibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate))}}function L(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.showingTo&&e.state.highlight.set(t,ir(I,e))}function I(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.showingTo)){var n,r=+new Date+e.options.workTime,i=_t(t.mode,z(e,t.frontier)),o=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.showingTo+500),function(a){if(t.frontier>=e.display.showingFrom){var s=a.styles;a.styles=Jt(e,a,i,!0);for(var l=!s||s.length!=a.styles.length,$=0;!l&&$<s.length;++$)l=s[$]!=a.styles[$];l&&(n&&n.end==t.frontier?n.end++:o.push(n={start:t.frontier,end:t.frontier+1})),a.stateAfter=_t(t.mode,i)}else en(e,a.text,i),a.stateAfter=t.frontier%5==0?_t(t.mode,i):null;return++t.frontier,+new Date>r?(L(e,e.options.workDelay),!0):void 0}),o.length&&ae(e,function(){for(var e=0;e<o.length;++e)$e(this,o[e].start,o[e].end)})()}}function T(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=hn(o,s-1);if(l.stateAfter&&(!n||s<=o.frontier))return s;var $=Zn(l.text,null,e.options.tabSize);(null==i||r>$)&&(i=s-1,r=$)}return i}function z(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var o=T(e,t,n),a=o>r.first&&hn(r,o-1).stateAfter;return a=a?_t(r.mode,a):yt(r.mode),r.iter(o,t,function(n){en(e,n.text,a);var s=o==t-1||o%5==0||o>=i.showingFrom&&o<i.showingTo;n.stateAfter=s?_t(r.mode,a):null,++o}),n&&(r.frontier=o),a}function q(e){return e.lineSpace.offsetTop}function j(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function R(e){var t=$r(e.measure,sr("pre",null,null,"text-align: left")).appendChild(sr("span","x"));return t.offsetLeft}function D(e,t,n,r,i){var o=-1;if(r=r||H(e,t),r.crude){var a=r.left+n*r.width;return{left:a,right:a+r.width,top:r.top,bottom:r.bottom}}for(var s=n;;s+=o){var l=r[s];if(l)break;0>o&&0==s&&(o=1)}return i=s>n?"left":n>s?"right":i,"left"==i&&l.leftSide?l=l.leftSide:"right"==i&&l.rightSide&&(l=l.rightSide),{left:n>s?l.right:l.left,right:s>n?l.left:l.right,top:l.top,bottom:l.bottom}}function P(e,t){for(var n=e.display.measureLineCache,r=0;r<n.length;++r){var i=n[r];if(i.text==t.text&&i.markedSpans==t.markedSpans&&e.display.scroller.clientWidth==i.width&&i.classes==t.textClass+"|"+t.wrapClass)return i}}function F(e,t){var n=P(e,t);n&&(n.text=n.measure=n.markedSpans=null)}function H(e,t){var n=P(e,t);if(n)return n.measure;var r=W(e,t),i=e.display.measureLineCache,o={text:t.text,width:e.display.scroller.clientWidth,markedSpans:t.markedSpans,measure:r,classes:t.textClass+"|"+t.wrapClass};return 16==i.length?i[++e.display.measureLineCachePos%16]=o:i.push(o),r}function W(e,t){function n(e){var t=e.top-p.top,n=e.bottom-p.top;n>v&&(n=v),0>t&&(t=0);for(var r=h.length-2;r>=0;r-=2){var i=h[r],o=h[r+1];if(!(i>n||t>o)&&(t>=i&&o>=n||i>=t&&n>=o||Math.min(n,o)-Math.max(t,i)>=n-t>>1)){h[r]=Math.min(t,i),h[r+1]=Math.max(n,o);break}}return 0>r&&(r=h.length,h.push(t,n)),{left:e.left-p.left,right:e.right-p.left,top:r,bottom:null}}function r(e){e.bottom=h[e.top+1],e.top=h[e.top]}if(!e.options.lineWrapping&&t.text.length>=e.options.crudeMeasuringFrom)return B(e,t);var i=e.display,o=rr(t.text.length),a=nn(e,t,o,!0).pre;if(Cr&&!Sr&&!e.options.lineWrapping&&a.childNodes.length>100){for(var s=document.createDocumentFragment(),l=10,$=a.childNodes.length,u=0,c=Math.ceil($/l);c>u;++u){for(var f=sr("div",null,null,"display: inline-block"),d=0;l>d&&$;++d)f.appendChild(a.firstChild),--$;s.appendChild(f)}a.appendChild(s)}$r(i.measure,a);var p=cr(i.lineDiv),h=[],g=rr(t.text.length),v=a.offsetHeight;Mr&&i.measure.first!=a&&$r(i.measure,a);for(var m,u=0;u<o.length;++u)if(m=o[u]){var _=m,y=null;if(/\bCodeMirror-widget\b/.test(m.className)&&m.getClientRects){1==m.firstChild.nodeType&&(_=m.firstChild);var b=_.getClientRects();b.length>1&&(y=g[u]=n(b[0]),y.rightSide=n(b[b.length-1]))}y||(y=g[u]=n(cr(_))),m.measureRight&&(y.right=cr(m.measureRight).left),m.leftSide&&(y.leftSide=n(cr(m.leftSide)))}lr(e.display.measure);for(var m,u=0;u<g.length;++u)(m=g[u])&&(r(m),m.leftSide&&r(m.leftSide),m.rightSide&&r(m.rightSide));return g}function B(e,t){var n=new mi(t.text.slice(0,100),null);t.textClass&&(n.textClass=t.textClass);var r=W(e,n),i=D(e,n,0,r,"left"),o=D(e,n,99,r,"right");return{crude:!0,top:i.top,left:i.left,bottom:i.bottom,width:(o.right-i.left)/100}}function V(e,t){var n=!1;if(t.markedSpans)for(var r=0;r<t.markedSpans;++r){var i=t.markedSpans[r];!i.collapsed||null!=i.to&&i.to!=t.text.length||(n=!0)}var o=!n&&P(e,t);if(o||t.text.length>=e.options.crudeMeasuringFrom)return D(e,t,t.text.length,o&&o.measure,"right").right;var a=nn(e,t,null,!0).pre,s=a.appendChild(pr(e.display.measure));return $r(e.display.measure,a),cr(s).right-cr(e.display.lineDiv).left}function U(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function G(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function K(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Y(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=Gt(t.widgets[i]);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=bn(e,t);if("local"==r?a+=q(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var s=cr(e.display.lineSpace);a+=s.top+("window"==r?0:K());var l=s.left+("window"==r?0:G());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function Z(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=G(),i-=K();else if("local"==n||!n){var o=cr(e.display.sizer);r+=o.left,i+=o.top}var a=cr(e.display.lineSpace);return{left:r-a.left,top:i-a.top}}function X(e,t,n,r,i){return r||(r=hn(e.doc,t.line)),Y(e,r,D(e,r,t.ch,null,i),n)}function J(e,t,n,r,i){function o(t,o){var a=D(e,r,t,i,o?"right":"left");return o?a.left=a.right:a.right=a.left,Y(e,r,a,n)}function a(e,t){var n=s[t],r=n.level%2;return e==gr(n)&&t&&n.level<s[t-1].level?(n=s[--t],e=vr(n)-(n.level%2?0:1),r=!0):e==vr(n)&&t<s.length-1&&n.level<s[t+1].level&&(n=s[++t],e=gr(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?o(e-1):o(e,r)}r=r||hn(e.doc,t.line),i||(i=H(e,r));var s=wn(r),l=t.ch;if(!s)return o(l);var $=xr(s,l),u=a(l,$);return null!=Ri&&(u.other=a(l,Ri)),u}function Q(e,t,n,r){var i=new Ge(e,t);return i.xRel=r,n&&(i.outside=!0),i}function ee(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,0>n)return Q(r.first,0,!0,-1);var i=yn(r,n),o=r.first+r.size-1;if(i>o)return Q(r.first+r.size-1,hn(r,o).text.length,!0,1);for(0>t&&(t=0);;){var a=hn(r,i),s=te(e,a,i,t,n),l=Pt(a),$=l&&l.find();if(!l||!(s.ch>$.from.ch||s.ch==$.from.ch&&s.xRel>0))return s;i=$.to.line}}function te(e,t,n,r,i){function o(r){var i=J(e,Ge(n,r),"line",t,$);return s=!0,a>i.bottom?i.left-l:a<i.top?i.left+l:(s=!1,i.left)}var a=i-bn(e,t),s=!1,l=2*e.display.wrapper.clientWidth,$=H(e,t),u=wn(t),c=t.text.length,f=mr(t),d=_r(t),p=o(f),h=s,g=o(d),v=s;if(r>g)return Q(n,d,v,1);for(;;){if(u?d==f||d==Er(t,f,1):1>=d-f){for(var m=p>r||g-r>=r-p?f:d,_=r-(m==f?p:g);Mi.test(t.text.charAt(m));)++m;var y=Q(n,m,m==f?h:v,0>_?-1:_?1:0);return y}var b=Math.ceil(c/2),w=f+b;if(u){w=f;for(var x=0;b>x;++x)w=Er(t,w,1)}var k=o(w);k>r?(d=w,g=k,(v=s)&&(g+=1e3),c=b):(f=w,p=k,h=s,c-=b)}}function ne(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ur){Ur=sr("pre");for(var t=0;49>t;++t)Ur.appendChild(document.createTextNode("x")),Ur.appendChild(sr("br"));Ur.appendChild(document.createTextNode("x"))}$r(e.measure,Ur);var n=Ur.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),lr(e.measure),n||1}function re(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=sr("span","x"),n=sr("pre",[t]);$r(e.measure,n);var r=t.offsetWidth;return r>2&&(e.cachedCharWidth=r),r||10}function ie(e){e.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Qr},Ei++||(ki=[])}function oe(e){var t=e.curOp,n=e.doc,r=e.display;if(e.curOp=null,t.updateMaxLine&&c(e),r.maxLineChanged&&!e.options.lineWrapping&&r.maxLine){var i=V(e,r.maxLine);r.sizer.style.minWidth=Math.max(0,i+3+Ai)+"px",r.maxLineChanged=!1;var o=Math.max(0,r.sizer.offsetLeft+r.sizer.offsetWidth-r.scroller.clientWidth);o<n.scrollLeft&&!t.updateScrollPos&&Ae(e,Math.min(r.scroller.scrollLeft,o),!0)}var a,s;if(t.updateScrollPos)a=t.updateScrollPos;else if(t.selectionChanged&&r.scroller.clientHeight){var l=J(e,n.sel.head);a=$t(e,l.left,l.top,l.left,l.bottom)}if((t.changes.length||t.forceUpdate||a&&null!=a.scrollTop)&&(s=_(e,t.changes,a&&a.scrollTop,t.forceUpdate),e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop)),!s&&t.selectionChanged&&C(e),t.updateScrollPos){var $=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,a.scrollTop)),u=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,a.scrollLeft));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=$,r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=u,h(e),t.scrollToPos&&st(e,Je(e.doc,t.scrollToPos.from),Je(e.doc,t.scrollToPos.to),t.scrollToPos.margin)}else a&&at(e);t.selectionChanged&&N(e),e.state.focused&&t.updateInput&&de(e,t.userSelChange);var f=t.maybeHiddenMarkers,d=t.maybeUnhiddenMarkers;if(f)for(var p=0;p<f.length;++p)f[p].lines.length||Wn(f[p],"hide");if(d)for(var p=0;p<d.length;++p)d[p].lines.length&&Wn(d[p],"unhide");var g;if(--Ei||(g=ki,ki=null),t.textChanged&&Wn(e,"change",e,t.textChanged),t.cursorActivity&&Wn(e,"cursorActivity",e),g)for(var p=0;p<g.length;++p)g[p]()}function ae(e,t){return function(){var n=e||this,r=!n.curOp;r&&ie(n);try{var i=t.apply(n,arguments)}finally{r&&oe(n)}return i}}function se(e){return function(){var t,n=this.cm&&!this.cm.curOp;n&&ie(this.cm);try{t=e.apply(this,arguments)}finally{n&&oe(this.cm)}return t}}function le(e,t){var n,r=!e.curOp;r&&ie(e);try{n=t()}finally{r&&oe(e)}return n}function $e(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),e.curOp.changes.push({from:t,to:n,diff:r})}function ue(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){fe(e),e.state.focused&&ue(e)})}function ce(e){function t(){var r=fe(e);r||n?(e.display.pollingFast=!1,ue(e)):(n=!0,e.display.poll.set(60,t))}var n=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function fe(e){var t=e.display.input,n=e.display.prevInput,r=e.doc,i=r.sel;if(!e.state.focused||zi(t)||he(e)||e.state.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var o=t.value;if(o==n&&Ke(i.from,i.to))return!1;if(Cr&&!Mr&&e.display.inputHasSelection===o)return de(e,!0),!1;var a=!e.curOp;a&&ie(e),i.shift=!1;for(var s=0,l=Math.min(n.length,o.length);l>s&&n.charCodeAt(s)==o.charCodeAt(s);)++s;var $=i.from,u=i.to;s<n.length?$=Ge($.line,$.ch-(n.length-s)):e.state.overwrite&&Ke($,u)&&!e.state.pasteIncoming&&(u=Ge(u.line,Math.min(hn(r,u.line).text.length,u.ch+(o.length-s))));var c=e.curOp.updateInput,f={from:$,to:u,text:Ti(o.slice(s)),origin:e.state.pasteIncoming?"paste":"+input"};return Pe(e.doc,f,"end"),e.curOp.updateInput=c,Bn(e,"inputRead",e,f),o.length>1e3||o.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=o,a&&oe(e),e.state.pasteIncoming=!1,!0}function de(e,t){var n,r,i=e.doc;if(Ke(i.sel.from,i.sel.to))t&&(e.display.prevInput=e.display.input.value="",Cr&&!Mr&&(e.display.inputHasSelection=null));else{e.display.prevInput="",n=qi&&(i.sel.to.line-i.sel.from.line>100||(r=e.getSelection()).length>1e3);var o=n?"-":r||e.getSelection();e.display.input.value=o,e.state.focused&&Qn(e.display.input),Cr&&!Mr&&(e.display.inputHasSelection=o)}e.display.inaccurateSelection=n}function pe(e){"nocursor"==e.options.readOnly||Hr&&document.activeElement==e.display.input||e.display.input.focus()}function he(e){return e.options.readOnly||e.doc.cantEdit}function ge(e){function t(){e.state.focused&&setTimeout(ir(pe,e),0)}function n(){null==s&&(s=setTimeout(function(){s=null,a.cachedCharWidth=a.cachedTextHeight=Li=null,U(e),le(e,ir($e,e))},100))}function r(){for(var e=a.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(r,5e3):Hn(window,"resize",n)}function i(t){Vn(e,t)||e.options.onDragEvent&&e.options.onDragEvent(e,Tn(t))||Rn(t)}function o(){a.inaccurateSelection&&(a.prevInput="",a.inaccurateSelection=!1,a.input.value=e.getSelection(),Qn(a.input))}var a=e.display;Fn(a.scroller,"mousedown",ae(e,_e)),Cr?Fn(a.scroller,"dblclick",ae(e,function(t){if(!Vn(e,t)){var n=me(e,t);if(n&&!we(e,t)&&!ve(e.display,t)){zn(t);var r=gt(hn(e.doc,n.line).text,n);tt(e.doc,r.from,r.to)}}})):Fn(a.scroller,"dblclick",function(t){Vn(e,t)||zn(t)}),Fn(a.lineSpace,"selectstart",function(e){ve(a,e)||zn(e)}),Zr||Fn(a.scroller,"contextmenu",function(t){qe(e,t)}),Fn(a.scroller,"scroll",function(){a.scroller.clientHeight&&(Ee(e,a.scroller.scrollTop),Ae(e,a.scroller.scrollLeft,!0),Wn(e,"scroll",e))}),Fn(a.scrollbarV,"scroll",function(){a.scroller.clientHeight&&Ee(e,a.scrollbarV.scrollTop)}),Fn(a.scrollbarH,"scroll",function(){a.scroller.clientHeight&&Ae(e,a.scrollbarH.scrollLeft)}),Fn(a.scroller,"mousewheel",function(t){Oe(e,t)}),Fn(a.scroller,"DOMMouseScroll",function(t){Oe(e,t)}),Fn(a.scrollbarH,"mousedown",t),Fn(a.scrollbarV,"mousedown",t),Fn(a.wrapper,"scroll",function(){a.wrapper.scrollTop=a.wrapper.scrollLeft=0});var s;Fn(window,"resize",n),setTimeout(r,5e3),Fn(a.input,"keyup",ae(e,function(t){Vn(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Tn(t))||16==t.keyCode&&(e.doc.sel.shift=!1)})),Fn(a.input,"input",function(){Cr&&!Mr&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),ce(e)}),Fn(a.input,"keydown",ae(e,Le)),Fn(a.input,"keypress",ae(e,Ie)),Fn(a.input,"focus",ir(Te,e)),Fn(a.input,"blur",ir(ze,e)),e.options.dragDrop&&(Fn(a.scroller,"dragstart",function(t){ke(e,t)}),Fn(a.scroller,"dragenter",i),Fn(a.scroller,"dragover",i),Fn(a.scroller,"drop",ae(e,xe))),Fn(a.scroller,"paste",function(t){ve(a,t)||(pe(e),ce(e))}),Fn(a.input,"paste",function(){if(Lr&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=a.input.selectionStart,n=a.input.selectionEnd;a.input.value+="$",a.input.selectionStart=t,a.input.selectionEnd=n,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,ce(e)}),Fn(a.input,"cut",o),Fn(a.input,"copy",o),jr&&Fn(a.sizer,"mouseup",function(){document.activeElement==a.input&&a.input.blur(),pe(e)})}function ve(e,t){for(var n=Dn(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function me(e,t,n){var r=e.display;if(!n){var i=Dn(t);if(i==r.scrollbarH||i==r.scrollbarH.firstChild||i==r.scrollbarV||i==r.scrollbarV.firstChild||i==r.scrollbarFiller||i==r.gutterFiller)return null}var o,a,s=cr(r.lineSpace);try{o=t.clientX,a=t.clientY}catch(t){return null}return ee(e,o-s.left,a-s.top)}function _e(e){function t(e){if(!Ke(v,e)){if(v=e,"single"==u)return void tt(i.doc,Je(a,l),e);if(h=Je(a,h),g=Je(a,g),"double"==u){var t=gt(hn(a,e.line).text,e);Ye(e,h)?tt(i.doc,t.from,g):tt(i.doc,h,t.to)}else"triple"==u&&(Ye(e,h)?tt(i.doc,g,Je(a,Ge(e.line,0))):tt(i.doc,h,Je(a,Ge(e.line+1,0))))}}function n(e){var r=++_,s=me(i,e,!0);if(s)if(Ke(s,f)){var l=e.clientY<m.top?-20:e.clientY>m.bottom?20:0;l&&setTimeout(ae(i,function(){_==r&&(o.scroller.scrollTop+=l,n(e))}),50)}else{i.state.focused||Te(i),f=s,t(s);var $=p(o,a);(s.line>=$.to||s.line<$.from)&&setTimeout(ae(i,function(){_==r&&n(e)}),150)}}function r(e){_=1/0,zn(e),pe(i),Hn(document,"mousemove",y),Hn(document,"mouseup",b)}if(!Vn(this,e)){var i=this,o=i.display,a=i.doc,s=a.sel;if(s.shift=e.shiftKey,ve(o,e))return void(Lr||(o.scroller.draggable=!1,
setTimeout(function(){o.scroller.draggable=!0},100)));if(!we(i,e)){var l=me(i,e);switch(Pn(e)){case 3:return void(Zr&&qe.call(i,i,e));case 2:return Lr&&(i.state.lastMiddleDown=+new Date),l&&tt(i.doc,l),setTimeout(ir(pe,i),20),void zn(e)}if(!l)return void(Dn(e)==o.scroller&&zn(e));i.state.focused||Te(i);var $=+new Date,u="single";if(Kr&&Kr.time>$-400&&Ke(Kr.pos,l))u="triple",zn(e),setTimeout(ir(pe,i),20),vt(i,l.line);else if(Gr&&Gr.time>$-400&&Ke(Gr.pos,l)){u="double",Kr={time:$,pos:l},zn(e);var c=gt(hn(a,l.line).text,l);tt(i.doc,c.from,c.to)}else Gr={time:$,pos:l};var f=l;if(i.options.dragDrop&&Ni&&!he(i)&&!Ke(s.from,s.to)&&!Ye(l,s.from)&&!Ye(s.to,l)&&"single"==u){var d=ae(i,function(t){Lr&&(o.scroller.draggable=!1),i.state.draggingText=!1,Hn(document,"mouseup",d),Hn(o.scroller,"drop",d),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(zn(t),tt(i.doc,l),pe(i))});return Lr&&(o.scroller.draggable=!0),i.state.draggingText=d,o.scroller.dragDrop&&o.scroller.dragDrop(),Fn(document,"mouseup",d),void Fn(o.scroller,"drop",d)}zn(e),"single"==u&&tt(i.doc,Je(a,l));var h=s.from,g=s.to,v=l,m=cr(o.wrapper),_=0,y=ae(i,function(e){Cr||Pn(e)?n(e):r(e)}),b=ae(i,r);Fn(document,"mousemove",y),Fn(document,"mouseup",b)}}}function ye(e,t,n,r,i){try{var o=t.clientX,a=t.clientY}catch(t){return!1}if(o>=Math.floor(cr(e.display.gutters).right))return!1;r&&zn(t);var s=e.display,l=cr(s.lineDiv);if(a>l.bottom||!Gn(e,n))return jn(t);a-=l.top-s.viewOffset;for(var $=0;$<e.options.gutters.length;++$){var u=s.gutters.childNodes[$];if(u&&cr(u).right>=o){var c=yn(e.doc,a),f=e.options.gutters[$];return i(e,n,e,c,f,t),jn(t)}}}function be(e,t){return Gn(e,"gutterContextMenu")?ye(e,t,"gutterContextMenu",!1,Wn):!1}function we(e,t){return ye(e,t,"gutterClick",!0,Bn)}function xe(e){var t=this;if(!(Vn(t,e)||ve(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Tn(e)))){zn(e),Cr&&(ei=+new Date);var n=me(t,e,!0),r=e.dataTransfer.files;if(n&&!he(t))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,s=function(e,r){var s=new FileReader;s.onload=function(){o[r]=s.result,++a==i&&(n=Je(t.doc,n),Pe(t.doc,{from:n,to:n,text:Ti(o.join("\n")),origin:"paste"},"around"))},s.readAsText(e)},l=0;i>l;++l)s(r[l],l);else{if(t.state.draggingText&&!Ye(n,t.doc.sel.from)&&!Ye(t.doc.sel.to,n))return t.state.draggingText(e),void setTimeout(ir(pe,t),20);try{var o=e.dataTransfer.getData("Text");if(o){var $=t.doc.sel.from,u=t.doc.sel.to;rt(t.doc,n,n),t.state.draggingText&&Ue(t.doc,"",$,u,"paste"),t.replaceSelection(o,null,"paste"),pe(t)}}catch(e){}}}}function ke(e,t){if(Cr&&(!e.state.draggingText||+new Date-ei<100))return void Rn(t);if(!Vn(e,t)&&!ve(e.display,t)){var n=e.getSelection();if(t.dataTransfer.setData("Text",n),t.dataTransfer.setDragImage&&!qr){var r=sr("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",zr&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),zr&&r.parentNode.removeChild(r)}}}function Ee(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Or||_(e,[],t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Or&&_(e,[]),L(e,100))}function Ae(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,h(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function Oe(e,t){var n=t.wheelDeltaX,r=t.wheelDeltaY;null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==r&&t.detail&&t.axis==t.VERTICAL_AXIS?r=t.detail:null==r&&(r=t.wheelDelta);var i=e.display,o=i.scroller;if(n&&o.scrollWidth>o.clientWidth||r&&o.scrollHeight>o.clientHeight){if(r&&Wr&&Lr)for(var a=t.target;a!=o;a=a.parentNode)if(a.lineObj){e.display.currentWheelTarget=a;break}if(n&&!Or&&!zr&&null!=ni)return r&&Ee(e,Math.max(0,Math.min(o.scrollTop+r*ni,o.scrollHeight-o.clientHeight))),Ae(e,Math.max(0,Math.min(o.scrollLeft+n*ni,o.scrollWidth-o.clientWidth))),zn(t),void(i.wheelStartX=null);if(r&&null!=ni){var s=r*ni,l=e.doc.scrollTop,$=l+i.wrapper.clientHeight;0>s?l=Math.max(0,l+s-50):$=Math.min(e.doc.height,$+s+50),_(e,[],{top:l,bottom:$})}20>ti&&(null==i.wheelStartX?(i.wheelStartX=o.scrollLeft,i.wheelStartY=o.scrollTop,i.wheelDX=n,i.wheelDY=r,setTimeout(function(){if(null!=i.wheelStartX){var e=o.scrollLeft-i.wheelStartX,t=o.scrollTop-i.wheelStartY,n=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,n&&(ni=(ni*ti+n)/(ti+1),++ti)}},200)):(i.wheelDX+=n,i.wheelDY+=r))}}function Ce(e,t,n){if("string"==typeof t&&(t=hi[t],!t))return!1;e.display.pollingFast&&fe(e)&&(e.display.pollingFast=!1);var r=e.doc,i=r.sel.shift,o=!1;try{he(e)&&(e.state.suppressEdits=!0),n&&(r.sel.shift=!1),o=t(e)!=Oi}finally{r.sel.shift=i,e.state.suppressEdits=!1}return o}function Se(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function Me(e,t){var n=bt(e.options.keyMap),r=n.auto;clearTimeout(ri),r&&!xt(t)&&(ri=setTimeout(function(){bt(e.options.keyMap)==n&&(e.options.keyMap=r.call?r.call(null,e):r,a(e))},50));var i=kt(t,!0),o=!1;if(!i)return!1;var s=Se(e);return o=t.shiftKey?wt("Shift-"+i,s,function(t){return Ce(e,t,!0)})||wt(i,s,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?Ce(e,t):void 0}):wt(i,s,function(t){return Ce(e,t)}),o&&(zn(t),N(e),Mr&&(t.oldKeyCode=t.keyCode,t.keyCode=0),Bn(e,"keyHandled",e,i,t)),o}function Ne(e,t,n){var r=wt("'"+n+"'",Se(e),function(t){return Ce(e,t,!0)});return r&&(zn(t),N(e),Bn(e,"keyHandled",e,"'"+n+"'",t)),r}function Le(e){var t=this;if(t.state.focused||Te(t),!(Vn(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,Tn(e)))){Cr&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.doc.sel.shift=16==n||e.shiftKey;var r=Me(t,e);zr&&(oi=r?n:null,!r&&88==n&&!qi&&(Wr?e.metaKey:e.ctrlKey)&&t.replaceSelection(""))}}function Ie(e){var t=this;if(!(Vn(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,Tn(e)))){var n=e.keyCode,r=e.charCode;if(zr&&n==oi)return oi=null,void zn(e);if(!(zr&&(!e.which||e.which<10)||jr)||!Me(t,e)){var i=String.fromCharCode(null==r?n:r);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!he(this)&&this.doc.mode.electricChars.indexOf(i)>-1&&setTimeout(ae(t,function(){ft(t,t.doc.sel.to.line,"smart")}),75),Ne(t,e,i)||(Cr&&!Mr&&(t.display.inputHasSelection=null),ce(t))}}}function Te(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(Wn(e,"focus",e),e.state.focused=!0,-1==e.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(e.display.wrapper.className+=" CodeMirror-focused"),e.curOp||(de(e,!0),Lr&&setTimeout(ir(de,e,!0),0))),ue(e),N(e))}function ze(e){e.state.focused&&(Wn(e,"blur",e),e.state.focused=!1,e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.doc.sel.shift=!1)},150)}function qe(e,t){function n(){if(null!=i.input.selectionStart){var e=i.input.value="\u200b"+(Ke(o.from,o.to)?"":i.input.value);i.prevInput="\u200b",i.input.selectionStart=1,i.input.selectionEnd=e.length}}function r(){if(i.inputDiv.style.position="relative",i.input.style.cssText=$,Mr&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=s),ue(e),null!=i.input.selectionStart){(!Cr||Mr)&&n(),clearTimeout(ii);var t=0,r=function(){" "==i.prevInput&&0==i.input.selectionStart?ae(e,hi.selectAll)(e):t++<10?ii=setTimeout(r,500):de(e)};ii=setTimeout(r,200)}}if(!Vn(e,t,"contextmenu")){var i=e.display,o=e.doc.sel;if(!ve(i,t)&&!be(e,t)){var a=me(e,t),s=i.scroller.scrollTop;if(a&&!zr){var l=e.options.resetSelectionOnContextMenu;l&&(Ke(o.from,o.to)||Ye(a,o.from)||!Ye(a,o.to))&&ae(e,rt)(e.doc,a,a);var $=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",pe(e),de(e,!0),Ke(o.from,o.to)&&(i.input.value=i.prevInput=" "),Cr&&!Mr&&n(),Zr){Rn(t);var u=function(){Hn(window,"mouseup",u),setTimeout(r,20)};Fn(window,"mouseup",u)}else setTimeout(r,50)}}}}function je(e,t,n){if(!Ye(t.from,n))return Je(e,n);var r=t.text.length-1-(t.to.line-t.from.line);if(n.line>t.to.line+r){var i=n.line-r,o=e.first+e.size-1;return i>o?Ge(o,hn(e,o).text.length):Qe(n,hn(e,i).text.length)}if(n.line==t.to.line+r)return Qe(n,Jn(t.text).length+(1==t.text.length?t.from.ch:0)+hn(e,t.to.line).text.length-t.to.ch);var a=n.line-t.from.line;return Qe(n,t.text[a].length+(a?0:t.from.ch))}function Re(e,t,n){if(n&&"object"==typeof n)return{anchor:je(e,t,n.anchor),head:je(e,t,n.head)};if("start"==n)return{anchor:t.from,head:t.from};var r=ai(t);if("around"==n)return{anchor:t.from,head:r};if("end"==n)return{anchor:r,head:r};var i=function(e){if(Ye(e,t.from))return e;if(!Ye(t.to,e))return r;var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=r.ch-t.to.ch),Ge(n,i)};return{anchor:i(e.sel.anchor),head:i(e.sel.head)}}function De(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=Je(e,t)),n&&(this.to=Je(e,n)),r&&(this.text=r),void 0!==i&&(this.origin=i)}),Wn(e,"beforeChange",e,r),e.cm&&Wn(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Pe(e,t,n,r){if(e.cm){if(!e.cm.curOp)return ae(e.cm,Pe)(e,t,n,r);if(e.cm.state.suppressEdits)return}if(!(Gn(e,"beforeChange")||e.cm&&Gn(e.cm,"beforeChange"))||(t=De(e,t,!0))){var i=Xr&&!r&&jt(e,t.from,t.to);if(i){for(var o=i.length-1;o>=1;--o)Fe(e,{from:i[o].from,to:i[o].to,text:[""]});i.length&&Fe(e,{from:i[0].from,to:i[0].to,text:t.text},n)}else Fe(e,t,n)}}function Fe(e,t,n){if(1!=t.text.length||""!=t.text[0]||!Ke(t.from,t.to)){var r=Re(e,t,n);An(e,t,r,e.cm?e.cm.curOp.id:NaN),Be(e,t,r,zt(e,t));var i=[];dn(e,function(e,n){n||-1!=er(i,e.history)||(Ln(e.history,t),i.push(e.history)),Be(e,t,null,zt(e,t))})}}function He(e,t){if(!e.cm||!e.cm.state.suppressEdits){var n=e.history,r=("undo"==t?n.done:n.undone).pop();if(r){var i={changes:[],anchorBefore:r.anchorAfter,headBefore:r.headAfter,anchorAfter:r.anchorBefore,headAfter:r.headBefore,generation:n.generation};("undo"==t?n.undone:n.done).push(i),n.generation=r.generation||++n.maxGeneration;for(var o=Gn(e,"beforeChange")||e.cm&&Gn(e.cm,"beforeChange"),a=r.changes.length-1;a>=0;--a){var s=r.changes[a];if(s.origin=t,o&&!De(e,s,!1))return void(("undo"==t?n.done:n.undone).length=0);i.changes.push(En(e,s));var l=a?Re(e,s,null):{anchor:r.anchorBefore,head:r.headBefore};Be(e,s,l,qt(e,s));var $=[];dn(e,function(e,t){t||-1!=er($,e.history)||(Ln(e.history,s),$.push(e.history)),Be(e,s,null,qt(e,s))})}}}}function We(e,t){function n(e){return Ge(e.line+t,e.ch)}e.first+=t,e.cm&&$e(e.cm,e.first,e.first,t),e.sel.head=n(e.sel.head),e.sel.anchor=n(e.sel.anchor),e.sel.from=n(e.sel.from),e.sel.to=n(e.sel.to)}function Be(e,t,n,r){if(e.cm&&!e.cm.curOp)return ae(e.cm,Be)(e,t,n,r);if(t.to.line<e.first)return void We(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);We(e,i),t={from:Ge(e.first,0),to:Ge(t.to.line+i,t.to.ch),text:[Jn(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:Ge(o,hn(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=gn(e,t.from,t.to),n||(n=Re(e,t,null)),e.cm?Ve(e.cm,t,r,n):un(e,t,r,n)}}function Ve(e,t,n,r){var o=e.doc,a=e.display,s=t.from,l=t.to,$=!1,c=s.line;e.options.lineWrapping||(c=_n(Ft(o,hn(o,s.line))),o.iter(c,l.line+1,function(e){return e==a.maxLine?($=!0,!0):void 0})),Ye(o.sel.head,t.from)||Ye(t.to,o.sel.head)||(e.curOp.cursorActivity=!0),un(o,t,n,r,i(e)),e.options.lineWrapping||(o.iter(c,s.line+t.text.length,function(e){var t=u(o,e);t>a.maxLineLength&&(a.maxLine=e,a.maxLineLength=t,a.maxLineChanged=!0,$=!1)}),$&&(e.curOp.updateMaxLine=!0)),o.frontier=Math.min(o.frontier,s.line),L(e,400);var f=t.text.length-(l.line-s.line)-1;if($e(e,s.line,l.line+1,f),Gn(e,"change")){var d={from:s,to:l,text:t.text,removed:t.removed,origin:t.origin};if(e.curOp.textChanged){for(var p=e.curOp.textChanged;p.next;p=p.next);p.next=d}else e.curOp.textChanged=d}}function Ue(e,t,n,r,i){if(r||(r=n),Ye(r,n)){var o=r;r=n,n=o}"string"==typeof t&&(t=Ti(t)),Pe(e,{from:n,to:r,text:t,origin:i},null)}function Ge(e,t){return this instanceof Ge?(this.line=e,void(this.ch=t)):new Ge(e,t)}function Ke(e,t){return e.line==t.line&&e.ch==t.ch}function Ye(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Ze(e){return Ge(e.line,e.ch)}function Xe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Je(e,t){if(t.line<e.first)return Ge(e.first,0);var n=e.first+e.size-1;return t.line>n?Ge(n,hn(e,n).text.length):Qe(t,hn(e,t.line).text.length)}function Qe(e,t){var n=e.ch;return null==n||n>t?Ge(e.line,t):0>n?Ge(e.line,0):e}function et(e,t){return t>=e.first&&t<e.first+e.size}function tt(e,t,n,r){if(e.sel.shift||e.sel.extend){var i=e.sel.anchor;if(n){var o=Ye(t,i);o!=Ye(n,i)?(i=t,t=n):o!=Ye(t,n)&&(t=n)}rt(e,i,t,r)}else rt(e,t,n||t,r);e.cm&&(e.cm.curOp.userSelChange=!0)}function nt(e,t,n){var r={anchor:t,head:n};return Wn(e,"beforeSelectionChange",e,r),e.cm&&Wn(e.cm,"beforeSelectionChange",e.cm,r),r.anchor=Je(e,r.anchor),r.head=Je(e,r.head),r}function rt(e,t,n,r,i){if(!i&&Gn(e,"beforeSelectionChange")||e.cm&&Gn(e.cm,"beforeSelectionChange")){var o=nt(e,t,n);n=o.head,t=o.anchor}var a=e.sel;if(a.goalColumn=null,null==r&&(r=Ye(n,a.head)?-1:1),(i||!Ke(t,a.anchor))&&(t=ot(e,t,r,"push"!=i)),(i||!Ke(n,a.head))&&(n=ot(e,n,r,"push"!=i)),!Ke(a.anchor,t)||!Ke(a.head,n)){a.anchor=t,a.head=n;var s=Ye(n,t);a.from=s?n:t,a.to=s?t:n,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=e.cm.curOp.cursorActivity=!0),Bn(e,"cursorActivity",e)}}function it(e){rt(e.doc,e.doc.sel.from,e.doc.sel.to,null,"push")}function ot(e,t,n,r){var i=!1,o=t,a=n||1;e.cantEdit=!1;e:for(;;){var s=hn(e,o.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var $=s.markedSpans[l],u=$.marker;if((null==$.from||(u.inclusiveLeft?$.from<=o.ch:$.from<o.ch))&&(null==$.to||(u.inclusiveRight?$.to>=o.ch:$.to>o.ch))){if(r&&(Wn(u,"beforeCursorEnter"),u.explicitlyCleared)){if(s.markedSpans){--l;continue}break}if(!u.atomic)continue;var c=u.find()[0>a?"from":"to"];if(Ke(c,o)&&(c.ch+=a,c.ch<0?c=c.line>e.first?Je(e,Ge(c.line-1)):null:c.ch>s.text.length&&(c=c.line<e.first+e.size-1?Ge(c.line+1,0):null),!c)){if(i)return r?(e.cantEdit=!0,Ge(e.first,0)):ot(e,t,n,!0);i=!0,c=t,a=-a}o=c;continue e}}return o}}function at(e){var t=st(e,e.doc.sel.head,null,e.options.cursorScrollMargin);if(e.state.focused){var n=e.display,r=cr(n.sizer),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!Pr){var o="none"==n.cursor.style.display;o&&(n.cursor.style.display="",n.cursor.style.left=t.left+"px",n.cursor.style.top=t.top-n.viewOffset+"px"),n.cursor.scrollIntoView(i),o&&(n.cursor.style.display="none")}}}function st(e,t,n,r){for(null==r&&(r=0);;){var i=!1,o=J(e,t),a=n&&n!=t?J(e,n):o,s=$t(e,Math.min(o.left,a.left),Math.min(o.top,a.top)-r,Math.max(o.left,a.left),Math.max(o.bottom,a.bottom)+r),l=e.doc.scrollTop,$=e.doc.scrollLeft;if(null!=s.scrollTop&&(Ee(e,s.scrollTop),Math.abs(e.doc.scrollTop-l)>1&&(i=!0)),null!=s.scrollLeft&&(Ae(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-$)>1&&(i=!0)),!i)return o}}function lt(e,t,n,r,i){var o=$t(e,t,n,r,i);null!=o.scrollTop&&Ee(e,o.scrollTop),null!=o.scrollLeft&&Ae(e,o.scrollLeft)}function $t(e,t,n,r,i){var o=e.display,a=ne(e.display);0>n&&(n=0);var s=o.scroller.clientHeight-Ai,l=o.scroller.scrollTop,$={},u=e.doc.height+j(o),c=a>n,f=i>u-a;if(l>n)$.scrollTop=c?0:n;else if(i>l+s){var d=Math.min(n,(f?u:i)-s);d!=l&&($.scrollTop=d)}var p=o.scroller.clientWidth-Ai,h=o.scroller.scrollLeft;t+=o.gutters.offsetWidth,r+=o.gutters.offsetWidth;var g=o.gutters.offsetWidth,v=g+10>t;return h+g>t||v?(v&&(t=0),$.scrollLeft=Math.max(0,t-10-g)):r>p+h-3&&($.scrollLeft=r+10-p),$}function ut(e,t,n){e.curOp.updateScrollPos={scrollLeft:null==t?e.doc.scrollLeft:t,scrollTop:null==n?e.doc.scrollTop:n}}function ct(e,t,n){var r=e.curOp.updateScrollPos||(e.curOp.updateScrollPos={scrollLeft:e.doc.scrollLeft,scrollTop:e.doc.scrollTop}),i=e.display.scroller;r.scrollTop=Math.max(0,Math.min(i.scrollHeight-i.clientHeight,r.scrollTop+n)),r.scrollLeft=Math.max(0,Math.min(i.scrollWidth-i.clientWidth,r.scrollLeft+t))}function ft(e,t,n,r){var i=e.doc;if(null==n&&(n="add"),"smart"==n)if(e.doc.mode.indent)var o=z(e,t);else n="prev";var a,s=e.options.tabSize,l=hn(i,t),$=Zn(l.text,null,s),u=l.text.match(/^\s*/)[0];if("smart"==n&&(a=e.doc.mode.indent(o,l.text.slice(u.length),l.text),a==Oi)){if(!r)return;n="prev"}"prev"==n?a=t>i.first?Zn(hn(i,t-1).text,null,s):0:"add"==n?a=$+e.options.indentUnit:"subtract"==n?a=$-e.options.indentUnit:"number"==typeof n&&(a=$+n),a=Math.max(0,a);var c="",f=0;if(e.options.indentWithTabs)for(var d=Math.floor(a/s);d;--d)f+=s,c+="	";a>f&&(c+=Xn(a-f)),c!=u?Ue(e.doc,c,Ge(t,0),Ge(t,u.length),"+input"):i.sel.head.line==t&&i.sel.head.ch<u.length&&rt(i,Ge(t,u.length),Ge(t,u.length),1),l.stateAfter=null}function dt(e,t,n){var r=t,i=t,o=e.doc;return"number"==typeof t?i=hn(o,Xe(o,t)):r=_n(t),null==r?null:n(i,r)?($e(e,r,r+1),i):null}function pt(e,t,n,r,i){function o(){var t=s+n;return t<e.first||t>=e.first+e.size?c=!1:(s=t,u=hn(e,t))}function a(e){var t=(i?Er:Ar)(u,l,n,!0);if(null==t){if(e||!o())return c=!1;l=i?(0>n?_r:mr)(u):0>n?u.text.length:0}else l=t;return!0}var s=t.line,l=t.ch,$=n,u=hn(e,s),c=!0;if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var f=null,d="group"==r,p=!0;!(0>n)||a(!p);p=!1){var h=u.text.charAt(l)||"\n",g=or(h)?"w":d?/\s/.test(h)?null:"p":null;if(f&&f!=g){0>n&&(n=1,a());break}if(g&&(f=g),n>0&&!a(!p))break}var v=ot(e,Ge(s,l),$,!0);return c||(v.hitSide=!0),v}function ht(e,t,n,r){var i,o=e.doc,a=t.left;if("page"==r){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+n*(s-(0>n?1.5:.5)*ne(e.display))}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;;){var l=ee(e,a,i);if(!l.outside)break;if(0>n?0>=i:i>=o.height){l.hitSide=!0;break}i+=5*n}return l}function gt(e,t){var n=t.ch,r=t.ch;if(e){(t.xRel<0||r==e.length)&&n?--n:++r;for(var i=e.charAt(n),o=or(i)?or:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!or(e)};n>0&&o(e.charAt(n-1));)--n;for(;r<e.length&&o(e.charAt(r));)++r}return{from:Ge(t.line,n),to:Ge(t.line,r)}}function vt(e,t){tt(e.doc,Ge(t,0),Je(e.doc,Ge(t+1,0)))}function mt(t,n,r,i){e.defaults[t]=n,r&&(si[t]=i?function(e,t,n){n!=$i&&r(e,t,n)}:r)}function _t(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function yt(e,t,n){return e.startState?e.startState(t,n):!0}function bt(e){return"string"==typeof e?gi[e]:e}function wt(e,t,n){function r(t){t=bt(t);var i=t[e];if(i===!1)return"stop";if(null!=i&&n(i))return!0;if(t.nofallthrough)return"stop";var o=t.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return r(o);for(var a=0,s=o.length;s>a;++a){var l=r(o[a]);if(l)return l}return!1}for(var i=0;i<t.length;++i){var o=r(t[i]);if(o)return"stop"!=o}}function xt(e){var t=ji[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function kt(e,t){if(zr&&34==e.keyCode&&e["char"])return!1;var n=ji[e.keyCode];return null==n||e.altGraphKey?!1:(e.altKey&&(n="Alt-"+n),(Yr?e.metaKey:e.ctrlKey)&&(n="Ctrl-"+n),(Yr?e.ctrlKey:e.metaKey)&&(n="Cmd-"+n),!t&&e.shiftKey&&(n="Shift-"+n),n)}function Et(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0}function At(e,t){this.lines=[],this.type=t,this.doc=e}function Ot(e,t,n,r,i){if(r&&r.shared)return St(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return ae(e.cm,Ot)(e,t,n,r,i);var o=new At(e,i);if(Ye(n,t)||Ke(t,n)&&"range"==i&&(!r.inclusiveLeft||!r.inclusiveRight))return o;r&&nr(r,o),o.replacedWith&&(o.collapsed=!0,o.replacedWith=sr("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(o.replacedWith.ignoreEvents=!0)),o.collapsed&&(Jr=!0),o.addToHistory&&An(e,{from:t,to:n,origin:"markText"},{head:e.sel.head,anchor:e.sel.anchor},NaN);var a,s,l,$=t.line,u=0,c=e.cm;if(e.iter($,n.line+1,function(r){c&&o.collapsed&&!c.options.lineWrapping&&Ft(e,r)==c.display.maxLine&&(l=!0);var i={from:null,to:null,marker:o};u+=r.text.length,$==t.line&&(i.from=t.ch,u-=t.ch),$==n.line&&(i.to=n.ch,u-=r.text.length-n.ch),o.collapsed&&($==n.line&&(s=Rt(r,n.ch)),$==t.line?a=Rt(r,t.ch):mn(r,0)),Lt(r,i),++$}),o.collapsed&&e.iter(t.line,n.line+1,function(t){Ht(e,t)&&mn(t,0)}),o.clearOnEnter&&Fn(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(Xr=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed){if(a!=s)throw new Error("Inserting collapsed marker overlapping an existing one");o.size=u,o.atomic=!0}return c&&(l&&(c.curOp.updateMaxLine=!0),(o.className||o.title||o.startStyle||o.endStyle||o.collapsed)&&$e(c,t.line,n.line+1),o.atomic&&it(c)),o}function Ct(e,t){this.markers=e,this.primary=t;for(var n=0,r=this;n<e.length;++n)e[n].parent=this,Fn(e[n],"clear",function(){r.clear()})}function St(e,t,n,r,i){r=nr(r),r.shared=!1;var o=[Ot(e,t,n,r,i)],a=o[0],s=r.replacedWith;return dn(e,function(e){s&&(r.replacedWith=s.cloneNode(!0)),o.push(Ot(e,Je(e,t),Je(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=Jn(o)}),new Ct(o,a)}function Mt(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Nt(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Lt(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function It(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(s||(a.inclusiveLeft&&a.inclusiveRight||"bookmark"==a.type)&&o.from==t&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push({from:o.from,to:l?null:o.to,marker:a})}}return r}function Tt(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(s||"bookmark"==a.type&&o.from==t&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push({from:l?null:o.from-t,to:null==o.to?null:o.to-t,marker:a})}}return r}function zt(e,t){var n=et(e,t.from.line)&&hn(e,t.from.line).markedSpans,r=et(e,t.to.line)&&hn(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=Ke(t.from,t.to),s=It(n,i,a),l=Tt(r,o,a),$=1==t.text.length,u=Jn(t.text).length+($?i:0);if(s)for(var c=0;c<s.length;++c){var f=s[c];if(null==f.to){var d=Mt(l,f.marker);d?$&&(f.to=null==d.to?null:d.to+u):f.to=i}}if(l)for(var c=0;c<l.length;++c){var f=l[c];if(null!=f.to&&(f.to+=u),null==f.from){var d=Mt(s,f.marker);d||(f.from=u,$&&(s||(s=[])).push(f))}else f.from+=u,$&&(s||(s=[])).push(f)}if($&&s){for(var c=0;c<s.length;++c)null!=s[c].from&&s[c].from==s[c].to&&"bookmark"!=s[c].marker.type&&s.splice(c--,1);s.length||(s=null)}var p=[s];if(!$){var h,g=t.text.length-2;if(g>0&&s)for(var c=0;c<s.length;++c)null==s[c].to&&(h||(h=[])).push({from:null,to:null,marker:s[c].marker});for(var c=0;g>c;++c)p.push(h);p.push(l)}return p}function qt(e,t){var n=Cn(e,t),r=zt(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],$=0;$<o.length;++$)if(o[$].marker==l.marker)continue e;o.push(l)}else a&&(n[i]=a)}return n}function jt(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=er(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(),l=0;l<i.length;++l){var $=i[l];if(!Ye($.to,s.from)&&!Ye(s.to,$.from)){var u=[l,1];(Ye($.from,s.from)||!a.inclusiveLeft&&Ke($.from,s.from))&&u.push({from:$.from,to:s.from}),(Ye(s.to,$.to)||!a.inclusiveRight&&Ke($.to,s.to))&&u.push({from:s.to,to:$.to}),i.splice.apply(i,u),l+=u.length-1}}return i}function Rt(e,t){var n,r=Jr&&e.markedSpans;if(r)for(var i,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&(null==i.from||i.from<t)&&(null==i.to||i.to>t)&&(!n||n.width<i.marker.width)&&(n=i.marker);return n}function Dt(e){return Rt(e,-1)}function Pt(e){return Rt(e,e.text.length+1)}function Ft(e,t){for(var n;n=Dt(t);)t=hn(e,n.find().from.line);return t}function Ht(e,t){var n=Jr&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.replacedWith&&0==r.from&&r.marker.inclusiveLeft&&Wt(e,t,r))return!0}}function Wt(e,t,n){if(null==n.to){var r=n.marker.find().to,i=hn(e,r.line);return Wt(e,i,Mt(i.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var o,a=0;a<t.markedSpans.length;++a)if(o=t.markedSpans[a],o.marker.collapsed&&!o.marker.replacedWith&&o.from==n.to&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&Wt(e,t,o))return!0}function Bt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Vt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Ut(e){return function(){var t=!this.cm.curOp;t&&ie(this.cm);try{var n=e.apply(this,arguments)}finally{t&&oe(this.cm)}return n}}function Gt(e){return null!=e.height?e.height:(e.node.parentNode&&1==e.node.parentNode.nodeType||$r(e.cm.display.measure,sr("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function Kt(e,t,n,r){var i=new vi(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),dt(e,t,function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,!Ht(e.doc,t)||i.showIfHidden){var r=bn(e,t)<e.doc.scrollTop;mn(t,t.height+Gt(i)),r&&ct(e,0,i.height)}return!0}),i}function Yt(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Bt(e),Vt(e,n);var i=r?r(e):1;i!=e.height&&mn(e,i)}function Zt(e){e.parent=null,Bt(e)}function Xt(e,t,n,r,i,o){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var s,l=0,$=null,u=new Et(t,e.options.tabSize);for(""==t&&n.blankLine&&n.blankLine(r);!u.eol();)u.pos>e.options.maxHighlightLength?(a=!1,o&&en(e,t,r,u.pos),u.pos=t.length,s=null):s=n.token(u,r),a&&$==s||(l<u.start&&i(u.start,$),l=u.start,$=s),u.start=u.pos;for(;l<u.pos;){var c=Math.min(u.pos,l+5e4);i(c,$),l=c}}function Jt(e,t,n,r){var i=[e.state.modeGen];Xt(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},r);for(var o=0;o<e.state.overlays.length;++o){var a=e.state.overlays[o],s=1,l=0;Xt(e,t.text,a.mode,!0,function(e,t){for(var n=s;e>l;){var r=i[s];r>e&&i.splice(s,1,e,i[s+1],r),s+=2,l=Math.min(e,r)}if(t)if(a.opaque)i.splice(n,s-n,e,t),s=n+2;else for(;s>n;n+=2){var o=i[n+1];i[n+1]=o?o+" "+t:t}})}return i}function Qt(e,t){return t.styles&&t.styles[0]==e.state.modeGen||(t.styles=Jt(e,t,t.stateAfter=z(e,_n(t)))),t.styles}function en(e,t,n,r){var i=e.doc.mode,o=new Et(t,e.options.tabSize);for(o.start=o.pos=r||0,""==t&&i.blankLine&&i.blankLine(n);!o.eol()&&o.pos<=e.options.maxHighlightLength;)i.token(o,n),o.start=o.pos}function tn(e,t){if(!e)return null;for(;;){var n=e.match(/(?:^|\s)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return _i[e]||(_i[e]="cm-"+e.replace(/ +/g," cm-"))}function nn(e,t,n,r){for(var i,o=t,a=!0;i=Dt(o);)o=hn(e.doc,i.find().from.line);var s={pre:sr("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:e,copyWidgets:r};do{o.text&&(a=!1),s.measure=o==t&&n,s.pos=0,s.addToken=s.measure?an:on,(Cr||Lr)&&e.getOption("lineWrapping")&&(s.addToken=sn(s.addToken));var l=$n(o,s,Qt(e,o));n&&o==t&&!s.measuredSomething&&(n[0]=s.pre.appendChild(pr(e.display.measure)),s.measuredSomething=!0),l&&(o=hn(e.doc,l.to.line))}while(l);!n||s.measuredSomething||n[0]||(n[0]=s.pre.appendChild(a?sr("span","\xa0"):pr(e.display.measure))),s.pre.firstChild||Ht(e.doc,t)||s.pre.appendChild(document.createTextNode("\xa0"));var $;if(n&&(Cr||Nr)&&($=wn(o))){var u=$.length-1;$[u].from==$[u].to&&--u;var c=$[u],f=$[u-1];if(c.from+1==c.to&&f&&c.level<f.level){var d=n[s.pos-1];d&&d.parentNode.insertBefore(d.measureRight=pr(e.display.measure),d.nextSibling)}}var p=s.textClass?s.textClass+" "+(t.textClass||""):t.textClass;return p&&(s.pre.className=p),Wn(e,"renderLine",e,t,s.pre),s}function rn(e){var t=sr("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function on(e,t,n,r,i,o){if(t){var a=e.cm.options.specialChars;if(a.test(t))for(var s=document.createDocumentFragment(),l=0;;){a.lastIndex=l;var $=a.exec(t),u=$?$.index-l:t.length-l;if(u&&(s.appendChild(document.createTextNode(t.slice(l,l+u))),e.col+=u),!$)break;if(l+=u+1,"	"==$[0]){var c=e.cm.options.tabSize,f=c-e.col%c;s.appendChild(sr("span",Xn(f),"cm-tab")),e.col+=f}else{var d=e.cm.options.specialCharPlaceholder($[0]);s.appendChild(d),e.col+=1}}else{e.col+=t.length;var s=document.createTextNode(t)}if(n||r||i||e.measure){var p=n||"";r&&(p+=r),i&&(p+=i);var d=sr("span",[s],p);return o&&(d.title=o),e.pre.appendChild(d)}e.pre.appendChild(s)}}function an(e,t,n,r,i){for(var o=e.cm.options.lineWrapping,a=0;a<t.length;++a){var s=t.charAt(a),l=0==a;s>="\ud800"&&"\udbff">s&&a<t.length-1?(s=t.slice(a,a+2),++a):a&&o&&fr(t,a)&&e.pre.appendChild(sr("wbr"));var $=e.measure[e.pos],u=e.measure[e.pos]=on(e,s,n,l&&r,a==t.length-1&&i);$&&(u.leftSide=$.leftSide||$),Cr&&o&&" "==s&&a&&!/\s/.test(t.charAt(a-1))&&a<t.length-1&&!/\s/.test(t.charAt(a+1))&&(u.style.whiteSpace="normal"),e.pos+=s.length}t.length&&(e.measuredSomething=!0)}function sn(e){function t(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":"\xa0";return t+=" "}return function(n,r,i,o,a,s){return e(n,r.replace(/ {3,}/g,t),i,o,a,s)}}function ln(e,t,n,r){var i=!r&&n.replacedWith;if(i&&(e.copyWidgets&&(i=i.cloneNode(!0)),e.pre.appendChild(i),e.measure)){if(t)e.measure[e.pos]=i;else{var o=pr(e.cm.display.measure);if("bookmark"!=n.type||n.insertLeft){if(e.measure[e.pos])return;e.measure[e.pos]=e.pre.insertBefore(o,i)}else e.measure[e.pos]=e.pre.appendChild(o)}e.measuredSomething=!0}e.pos+=t}function $n(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,s,l,$,u,c,f=i.length,d=0,p=1,h="",g=0;;){if(g==d){s=l=$=u="",c=null,g=1/0;for(var v=[],m=0;m<r.length;++m){var _=r[m],y=_.marker;_.from<=d&&(null==_.to||_.to>d)?(null!=_.to&&g>_.to&&(g=_.to,l=""),y.className&&(s+=" "+y.className),y.startStyle&&_.from==d&&($+=" "+y.startStyle),y.endStyle&&_.to==g&&(l+=" "+y.endStyle),y.title&&!u&&(u=y.title),y.collapsed&&(!c||c.marker.size<y.size)&&(c=_)):_.from>d&&g>_.from&&(g=_.from),"bookmark"==y.type&&_.from==d&&y.replacedWith&&v.push(y)}if(c&&(c.from||0)==d&&(ln(t,(null==c.to?f:c.to)-d,c.marker,null==c.from),null==c.to))return c.marker.find();if(!c&&v.length)for(var m=0;m<v.length;++m)ln(t,0,v[m])}if(d>=f)break;for(var b=Math.min(f,g);;){if(h){var w=d+h.length;if(!c){var x=w>b?h.slice(0,b-d):h;t.addToken(t,x,a?a+s:s,$,d+x.length==g?l:"",u)}if(w>=b){h=h.slice(b-d),d=b;break}d=w,$=""}h=i.slice(o,o=n[p++]),a=tn(n[p++],t)}}else for(var p=1;p<n.length;p+=2)t.addToken(t,i.slice(o,o=n[p]),tn(n[p+1],t))}function un(e,t,n,r,i){function o(e){return n?n[e]:null}function a(e,n,r){Yt(e,n,r,i),Bn(e,"change",e,t)}var s=t.from,l=t.to,$=t.text,u=hn(e,s.line),c=hn(e,l.line),f=Jn($),d=o($.length-1),p=l.line-s.line;if(0!=s.ch||0!=l.ch||""!=f||e.cm&&!e.cm.options.wholeLineUpdateBefore)if(u==c)if(1==$.length)a(u,u.text.slice(0,s.ch)+f+u.text.slice(l.ch),d);else{for(var h=[],g=1,v=$.length-1;v>g;++g)h.push(new mi($[g],o(g),i));h.push(new mi(f+u.text.slice(l.ch),d,i)),a(u,u.text.slice(0,s.ch)+$[0],o(0)),e.insert(s.line+1,h)}else if(1==$.length)a(u,u.text.slice(0,s.ch)+$[0]+c.text.slice(l.ch),o(0)),e.remove(s.line+1,p);else{a(u,u.text.slice(0,s.ch)+$[0],o(0)),a(c,f+c.text.slice(l.ch),d);for(var g=1,v=$.length-1,h=[];v>g;++g)h.push(new mi($[g],o(g),i));p>1&&e.remove(s.line+1,p-1),e.insert(s.line+1,h)}else{for(var g=0,v=$.length-1,h=[];v>g;++g)h.push(new mi($[g],o(g),i));a(c,c.text,d),p&&e.remove(s.line,p),
h.length&&e.insert(s.line,h)}Bn(e,"change",e,t),rt(e,r.anchor,r.head,null,!0)}function cn(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;n>t;++t)e[t].parent=this,r+=e[t].height;this.height=r}function fn(e){this.children=e;for(var t=0,n=0,r=0,i=e.length;i>r;++r){var o=e[r];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}function dn(e,t,n){function r(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var s=e.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;(!n||l)&&(t(s.doc,l),r(s.doc,e,l))}}}r(e,null,!0)}function pn(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,o(e),n(e),e.options.lineWrapping||c(e),e.options.mode=t.modeOption,$e(e)}function hn(e,t){for(t-=e.first;!e.lines;)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(i>t){e=r;break}t-=i}return e.lines[t]}function gn(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function vn(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function mn(e,t){for(var n=t-e.height,r=e;r;r=r.parent)r.height+=n}function _n(e){if(null==e.parent)return null;for(var t=e.parent,n=er(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function yn(e,t){var n=e.first;e:do{for(var r=0,i=e.children.length;i>r;++r){var o=e.children[r],a=o.height;if(a>t){e=o;continue e}t-=a,n+=o.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;i>r;++r){var s=e.lines[r],l=s.height;if(l>t)break;t-=l}return n+r}function bn(e,t){t=Ft(e.doc,t);for(var n=0,r=t.parent,i=0;i<r.lines.length;++i){var o=r.lines[i];if(o==t)break;n+=o.height}for(var a=r.parent;a;r=a,a=r.parent)for(var i=0;i<a.children.length;++i){var s=a.children[i];if(s==r)break;n+=s.height}return n}function wn(e){var t=e.order;return null==t&&(t=e.order=Di(e.text)),t}function xn(e){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:e||1,maxGeneration:e||1}}function kn(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function En(e,t){var n={line:t.from.line,ch:t.from.ch},r={from:n,to:ai(t),text:gn(e,t.from,t.to)};return kn(e,r,t.from.line,t.to.line+1),dn(e,function(e){kn(e,r,t.from.line,t.to.line+1)},!0),r}function An(e,t,n,r){var i=e.history;i.undone.length=0;var o=+new Date,a=Jn(i.done);if(a&&(i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastTime>o-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))){var s=Jn(a.changes);Ke(t.from,t.to)&&Ke(t.from,s.to)?s.to=ai(t):a.changes.push(En(e,t)),a.anchorAfter=n.anchor,a.headAfter=n.head}else for(a={changes:[En(e,t)],generation:i.generation,anchorBefore:e.sel.anchor,headBefore:e.sel.head,anchorAfter:n.anchor,headAfter:n.head},i.done.push(a),i.generation=++i.maxGeneration;i.done.length>i.undoDepth;)i.done.shift();i.lastTime=o,i.lastOp=r,i.lastOrigin=t.origin}function On(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Cn(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(On(n[r]));return i}function Sn(e,t){for(var n=0,r=[];n<e.length;++n){var i=e[n],o=i.changes,a=[];r.push({changes:a,anchorBefore:i.anchorBefore,headBefore:i.headBefore,anchorAfter:i.anchorAfter,headAfter:i.headAfter});for(var s=0;s<o.length;++s){var l,$=o[s];if(a.push({from:$.from,to:$.to,text:$.text}),t)for(var u in $)(l=u.match(/^spans_(\d+)$/))&&er(t,Number(l[1]))>-1&&(Jn(a)[u]=$[u],delete $[u])}}return r}function Mn(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Nn(e,t,n,r){for(var i=0;i<e.length;++i){for(var o=e[i],a=!0,s=0;s<o.changes.length;++s){var l=o.changes[s];if(o.copied||(l.from=Ze(l.from),l.to=Ze(l.to)),n<l.from.line)l.from.line+=r,l.to.line+=r;else if(t<=l.to.line){a=!1;break}}o.copied||(o.anchorBefore=Ze(o.anchorBefore),o.headBefore=Ze(o.headBefore),o.anchorAfter=Ze(o.anchorAfter),o.readAfter=Ze(o.headAfter),o.copied=!0),a?(Mn(o.anchorBefore),Mn(o.headBefore),Mn(o.anchorAfter),Mn(o.headAfter)):(e.splice(0,i+1),i=0)}}function Ln(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Nn(e.done,n,r,i),Nn(e.undone,n,r,i)}function In(){Rn(this)}function Tn(e){return e.stop||(e.stop=In),e}function zn(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function qn(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function jn(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Rn(e){zn(e),qn(e)}function Dn(e){return e.target||e.srcElement}function Pn(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Wr&&e.ctrlKey&&1==t&&(t=3),t}function Fn(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}}function Hn(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}}function Wn(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function Bn(e,t){function n(e){return function(){e.apply(null,i)}}var r=e._handlers&&e._handlers[t];if(r){var i=Array.prototype.slice.call(arguments,2);ki||(++Ei,ki=[],setTimeout(Un,0));for(var o=0;o<r.length;++o)ki.push(n(r[o]))}}function Vn(e,t,n){return Wn(e,n||t.type,e,t),jn(t)||t.codemirrorIgnore}function Un(){--Ei;var e=ki;ki=null;for(var t=0;t<e.length;++t)e[t]()}function Gn(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Kn(e){e.prototype.on=function(e,t){Fn(this,e,t)},e.prototype.off=function(e,t){Hn(this,e,t)}}function Yn(){this.id=null}function Zn(e,t,n,r,i){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var o=r||0,a=i||0;t>o;++o)"	"==e.charAt(o)?a+=n-a%n:++a;return a}function Xn(e){for(;Ci.length<=e;)Ci.push(Jn(Ci)+" ");return Ci[e]}function Jn(e){return e[e.length-1]}function Qn(e){if(Fr)e.selectionStart=0,e.selectionEnd=e.value.length;else try{e.select()}catch(t){}}function er(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;r>n;++n)if(e[n]==t)return n;return-1}function tr(e,t){function n(){}n.prototype=e;var r=new n;return t&&nr(t,r),r}function nr(e,t){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function rr(e){for(var t=[],n=0;e>n;++n)t.push(void 0);return t}function ir(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function or(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Si.test(e))}function ar(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function sr(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)ur(i,t);else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function lr(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function $r(e,t){return lr(e).appendChild(t)}function ur(e,t){Mr?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function cr(e){return e.getBoundingClientRect()}function fr(){return!1}function dr(e){if(null!=Li)return Li;var t=sr("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return $r(e,t),t.offsetWidth&&(Li=t.offsetHeight-t.clientHeight),Li||0}function pr(e){if(null==Ii){var t=sr("span","\u200b");$r(e,sr("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ii=t.offsetWidth<=1&&t.offsetHeight>2&&!Sr)}return Ii?sr("span","\u200b"):sr("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px")}function hr(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}function gr(e){return e.level%2?e.to:e.from}function vr(e){return e.level%2?e.from:e.to}function mr(e){var t=wn(e);return t?gr(t[0]):0}function _r(e){var t=wn(e);return t?vr(Jn(t)):e.text.length}function yr(e,t){var n=hn(e.doc,t),r=Ft(e.doc,n);r!=n&&(t=_n(r));var i=wn(r),o=i?i[0].level%2?_r(r):mr(r):0;return Ge(t,o)}function br(e,t){for(var n,r;n=Pt(r=hn(e.doc,t));)t=n.find().to.line;var i=wn(r),o=i?i[0].level%2?mr(r):_r(r):r.text.length;return Ge(t,o)}function wr(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:n>t}function xr(e,t){for(var n,r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return Ri=null,r;if(i.from==t||i.to==t){if(null!=n)return wr(e,i.level,e[n].level)?(Ri=n,r):(Ri=r,n);n=r}}return Ri=null,n}function kr(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&Mi.test(e.text.charAt(t)));return t}function Er(e,t,n,r){var i=wn(e);if(!i)return Ar(e,t,n,r);for(var o=xr(i,t),a=i[o],s=kr(e,t,a.level%2?-n:n,r);;){if(s>a.from&&s<a.to)return s;if(s==a.from||s==a.to)return xr(i,s)==o?s:(a=i[o+=n],n>0==a.level%2?a.to:a.from);if(a=i[o+=n],!a)return null;s=n>0==a.level%2?kr(e,a.to,-1,r):kr(e,a.from,1,r)}}function Ar(e,t,n,r){var i=t+n;if(r)for(;i>0&&Mi.test(e.text.charAt(i));)i+=n;return 0>i||i>e.text.length?null:i}var Or=/gecko\/\d/i.test(navigator.userAgent),Cr=/MSIE \d/.test(navigator.userAgent),Sr=Cr&&(null==document.documentMode||document.documentMode<8),Mr=Cr&&(null==document.documentMode||document.documentMode<9),Nr=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),Lr=/WebKit\//.test(navigator.userAgent),Ir=Lr&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Tr=/Chrome\//.test(navigator.userAgent),zr=/Opera\//.test(navigator.userAgent),qr=/Apple Computer/.test(navigator.vendor),jr=/KHTML\//.test(navigator.userAgent),Rr=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Dr=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Pr=/PhantomJS/.test(navigator.userAgent),Fr=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Hr=Fr||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Wr=Fr||/Mac/.test(navigator.platform),Br=/win/i.test(navigator.platform),Vr=zr&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Vr&&(Vr=Number(Vr[1])),Vr&&Vr>=15&&(zr=!1,Lr=!0);var Ur,Gr,Kr,Yr=Wr&&(Ir||zr&&(null==Vr||12.11>Vr)),Zr=Or||Cr&&!Mr,Xr=!1,Jr=!1,Qr=0,ei=0,ti=0,ni=null;Cr?ni=-.53:Or?ni=15:Tr?ni=-.7:qr&&(ni=-1/3);var ri,ii,oi=null,ai=e.changeEnd=function(e){return e.text?Ge(e.from.line+e.text.length-1,Jn(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.Pos=Ge,e.prototype={constructor:e,focus:function(){window.focus(),pe(this),ce(this)},setOption:function(e,t){var n=this.options,r=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,si.hasOwnProperty(e)&&ae(this,si[e])(this,t,r))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||"string"!=typeof t[n]&&t[n].name==e)return t.splice(n,1),!0},addOverlay:ae(null,function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,$e(this)}),removeOverlay:ae(null,function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void $e(this)}}),indentLine:ae(null,function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),et(this.doc,e)&&ft(this,e,t,n)}),indentSelection:ae(null,function(e){var t=this.doc.sel;if(Ke(t.from,t.to))return ft(this,t.from.line,e);for(var n=t.to.line-(t.to.ch?0:1),r=t.from.line;n>=r;++r)ft(this,r,e)}),getTokenAt:function(e,t){var n=this.doc;e=Je(n,e);for(var r=z(this,e.line,t),i=this.doc.mode,o=hn(n,e.line),a=new Et(o.text,this.options.tabSize);a.pos<e.ch&&!a.eol();){a.start=a.pos;var s=i.token(a,r)}return{start:a.start,end:a.pos,string:a.current(),className:s||null,type:s||null,state:r}},getTokenTypeAt:function(e){e=Je(this.doc,e);var t=Qt(this,hn(this.doc,e.line)),n=0,r=(t.length-1)/2,i=e.ch;if(0==i)return t[2];for(;;){var o=n+r>>1;if((o?t[2*o-1]:0)>=i)r=o;else{if(!(t[2*o+1]<i))return t[2*o+2];n=o+1}}},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){if(pi.hasOwnProperty(t)){var n=pi[t],r=this.getModeAt(e);return r[t]&&n[r[t]]||r.helperType&&n[r.helperType]||n[r.name]}},getStateAfter:function(e,t){var n=this.doc;return e=Xe(n,null==e?n.first+n.size-1:e),z(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel;return n=null==e?r.head:"object"==typeof e?Je(this.doc,e):e?r.from:r.to,J(this,n,t||"page")},charCoords:function(e,t){return X(this,Je(this.doc,e),t||"page")},coordsChar:function(e,t){return e=Z(this,e,t||"page"),ee(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Z(this,{top:e,left:0},t||"page").top,yn(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=hn(this.doc,e);return Y(this,hn(this.doc,e),{top:0,left:0},t||"page").top+(n?i.height:0)},defaultTextHeight:function(){return ne(this.display)},defaultCharWidth:function(){return re(this.display)},setGutterMarker:ae(null,function(e,t,n){return dt(this,e,function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&ar(r)&&(e.gutterMarkers=null),!0})}),clearGutter:ae(null,function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,$e(t,r,r+1),ar(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineClass:ae(null,function(e,t,n){return dt(this,e,function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[r]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:ae(null,function(e,t,n){return dt(this,e,function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:ae(null,function(e,t,n){return Kt(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!et(this.doc,e))return null;var t=e;if(e=hn(this.doc,e),!e)return null}else{var t=_n(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,r,i){var o=this.display;e=J(this,Je(this.doc,e));var a=e.bottom,s=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var l=Math.max(o.wrapper.clientHeight,this.doc.height),$=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),s+t.offsetWidth>$&&(s=$-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&lt(this,s,a,s+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:ae(null,Le),execCommand:function(e){return hi[e](this)},findPosH:function(e,t,n,r){var i=1;0>t&&(i=-1,t=-t);for(var o=0,a=Je(this.doc,e);t>o&&(a=pt(this.doc,a,i,n,r),!a.hitSide);++o);return a},moveH:ae(null,function(e,t){var n,r=this.doc.sel;n=r.shift||r.extend||Ke(r.from,r.to)?pt(this.doc,r.head,e,t,this.options.rtlMoveVisually):0>e?r.from:r.to,tt(this.doc,n,n,e)}),deleteH:ae(null,function(e,t){var n=this.doc.sel;Ke(n.from,n.to)?Ue(this.doc,"",n.from,pt(this.doc,n.head,e,t,!1),"+delete"):Ue(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(e,t,n,r){var i=1,o=r;0>t&&(i=-1,t=-t);for(var a=0,s=Je(this.doc,e);t>a;++a){var l=J(this,s,"div");if(null==o?o=l.left:l.left=o,s=ht(this,l,i,n),s.hitSide)break}return s},moveV:ae(null,function(e,t){var n=this.doc.sel,r=J(this,n.head,"div");null!=n.goalColumn&&(r.left=n.goalColumn);var i=ht(this,r,e,t);"page"==t&&ct(this,0,X(this,i,"div").top-r.top),tt(this.doc,i,i,e),n.goalColumn=r.left}),toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:ae(null,function(e,t){ut(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller,t=Ai;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:ae(null,function(e,t){null==e?e={from:this.doc.sel.head,to:null}:"number"==typeof e?e={from:Ge(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),t||(t=0);var n=e;null!=e.from.line&&(this.curOp.scrollToPos={from:e.from,to:e.to,margin:t},n={from:J(this,e.from),to:J(this,e.to)});var r=$t(this,Math.min(n.from.left,n.to.left),Math.min(n.from.top,n.to.top)-t,Math.max(n.from.right,n.to.right),Math.max(n.from.bottom,n.to.bottom)+t);ut(this,r.scrollLeft,r.scrollTop)}),setSize:ae(null,function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0}),operation:function(e){return le(this,e)},refresh:ae(null,function(){var e=null==this.display.cachedTextHeight;U(this),ut(this,this.doc.scrollLeft,this.doc.scrollTop),$e(this),e&&o(this)}),swapDoc:ae(null,function(e){var t=this.doc;return t.cm=null,pn(this,e),U(this),de(this,!0),ut(this,e.scrollLeft,e.scrollTop),Bn(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Kn(e);var si=e.optionHandlers={},li=e.defaults={},$i=e.Init={toString:function(){return"CodeMirror.Init"}};mt("value","",function(e,t){e.setValue(t)},!0),mt("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),mt("indentUnit",2,n,!0),mt("indentWithTabs",!1),mt("smartIndent",!0),mt("tabSize",4,function(e){n(e),U(e),$e(e)},!0),mt("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),mt("specialCharPlaceholder",rn,function(e){e.refresh()},!0),mt("electricChars",!0),mt("rtlMoveVisually",!Br),mt("wholeLineUpdateBefore",!0),mt("theme","default",function(e){s(e),l(e)},!0),mt("keyMap","default",a),mt("extraKeys",null),mt("onKeyEvent",null),mt("onDragEvent",null),mt("lineWrapping",!1,r,!0),mt("gutters",[],function(e){f(e.options),l(e)},!0),mt("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?m(e.display)+"px":"0",e.refresh()},!0),mt("coverGutterNextToScrollbar",!1,d,!0),mt("lineNumbers",!1,function(e){f(e.options),l(e)},!0),mt("firstLineNumber",1,l,!0),mt("lineNumberFormatter",function(e){return e},l,!0),mt("showCursorWhenSelecting",!1,C,!0),mt("resetSelectionOnContextMenu",!0),mt("readOnly",!1,function(e,t){"nocursor"==t?(ze(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||de(e,!0))}),mt("dragDrop",!0),mt("cursorBlinkRate",530),mt("cursorScrollMargin",0),mt("cursorHeight",1),mt("workTime",100),mt("workDelay",100),mt("flattenSpans",!0),mt("pollInterval",100),mt("undoDepth",40,function(e,t){e.doc.history.undoDepth=t}),mt("historyEventDelay",500),mt("viewportMargin",10,function(e){e.refresh()},!0),mt("maxHighlightLength",1e4,function(e){n(e),e.refresh()},!0),mt("crudeMeasuringFrom",1e4),mt("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),mt("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),mt("autofocus",null);var ui=e.modes={},ci=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}ui[t]=n},e.defineMIME=function(e,t){ci[e]=t},e.resolveMode=function(t){if("string"==typeof t&&ci.hasOwnProperty(t))t=ci[t];else if(t&&"string"==typeof t.name&&ci.hasOwnProperty(t.name)){var n=ci[t.name];t=tr(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=ui[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(fi.hasOwnProperty(n.name)){var o=fi[n.name];for(var a in o)o.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}return i.name=n.name,i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var fi=e.modeExtensions={};e.extendMode=function(e,t){var n=fi.hasOwnProperty(e)?fi[e]:fi[e]={};nr(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){bi.prototype[e]=t},e.defineOption=mt;var di=[];e.defineInitHook=function(e){di.push(e)};var pi=e.helpers={};e.registerHelper=function(t,n,r){pi.hasOwnProperty(t)||(pi[t]=e[t]={}),pi[t][n]=r},e.isWordChar=or,e.copyState=_t,e.startState=yt,e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var hi=e.commands={selectAll:function(e){e.setSelection(Ge(e.firstLine(),0),Ge(e.lastLine()))},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!Ke(t,n);r||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,r?n:Ge(t.line),"+delete"):e.replaceRange("",t,Ge(t.line+1,0),"+delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",Ge(t,0),Ge(t),"+delete")},delLineLeft:function(e){var t=e.getCursor();e.replaceRange("",Ge(t.line,0),t,"+delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection(Ge(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Ge(e.lastLine()))},goLineStart:function(e){e.extendSelection(yr(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),n=yr(e,t.line),r=e.getLineHandle(n.line),i=wn(r);if(i&&0!=i[0].level)e.extendSelection(n);else{var o=Math.max(0,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;e.extendSelection(Ge(n.line,a?0:o))}},goLineEnd:function(e){e.extendSelection(br(e,e.getCursor().line))},goLineRight:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:t},"div"))},goLineLeft:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:0,top:t},"div"))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","+input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","+input")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),Ge(t.line,t.ch-1),Ge(t.line,t.ch+1))},newlineAndIndent:function(e){ae(e,function(){e.replaceSelection("\n","end","+input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},gi=e.keyMap={};gi.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},gi.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},gi.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},gi["default"]=Wr?gi.macDefault:gi.pcDefault,gi.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.lookupKey=wt,e.isModifierKey=xt,e.keyName=kt,e.fromTextArea=function(t,n){function r(){t.value=$.getValue()}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var i=document.body;try{i=document.activeElement}catch(o){}n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(Fn(t.form,"submit",r),!n.leaveSubmitMethodAlone)){var a=t.form,s=a.submit;try{var l=a.submit=function(){r(),a.submit=s,a.submit(),a.submit=l}}catch(o){}}t.style.display="none";var $=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return $.save=r,$.getTextArea=function(){return t},$.toTextArea=function(){r(),t.parentNode.removeChild($.getWrapperElement()),t.style.display="",t.form&&(Hn(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=s))},$},Et.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Zn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Zn(this.string,null,this.tabSize)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);return i(o)==i(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=Et,e.TextMarker=At,Kn(At),At.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&ie(e),Gn(this,"clear")){var n=this.find();n&&Bn(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Mt(a.markedSpans,this);null!=s.to&&(i=_n(a)),a.markedSpans=Nt(a.markedSpans,s),null!=s.from?r=_n(a):this.collapsed&&!Ht(this.doc,a)&&e&&mn(a,ne(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=Ft(e.doc,this.lines[o]),$=u(e.doc,l);$>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=$,e.display.maxLineChanged=!0)}null!=r&&e&&$e(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&it(e)),t&&oe(e)}},At.prototype.find=function(){for(var e,t,n=0;n<this.lines.length;++n){var r=this.lines[n],i=Mt(r.markedSpans,this);if(null!=i.from||null!=i.to){var o=_n(r);null!=i.from&&(e=Ge(o,i.from)),null!=i.to&&(t=Ge(o,i.to))}}return"bookmark"==this.type?e:e&&{from:e,to:t}},At.prototype.changed=function(){var e=this.find(),t=this.doc.cm;if(e&&t){"bookmark"!=this.type&&(e=e.from);var n=hn(this.doc,e.line);if(F(t,n),e.line>=t.display.showingFrom&&e.line<t.display.showingTo){for(var r=t.display.lineDiv.firstChild;r;r=r.nextSibling)if(r.lineObj==n){r.offsetHeight!=n.height&&mn(n,r.offsetHeight);break}le(t,function(){t.curOp.selectionChanged=t.curOp.forceUpdate=t.curOp.updateMaxLine=!0})}}},At.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=er(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},At.prototype.detachLine=function(e){if(this.lines.splice(er(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},e.SharedTextMarker=Ct,Kn(Ct),Ct.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Bn(this,"clear")}},Ct.prototype.find=function(){return this.primary.find()};var vi=e.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};Kn(vi),vi.prototype.clear=Ut(function(){var e=this.line.widgets,t=_n(this.line);if(null!=t&&e){for(var n=0;n<e.length;++n)e[n]==this&&e.splice(n--,1);e.length||(this.line.widgets=null);var r=bn(this.cm,this.line)<this.cm.doc.scrollTop;mn(this.line,Math.max(0,this.line.height-Gt(this))),r&&ct(this.cm,0,-this.height),$e(this.cm,t,t+1)}}),vi.prototype.changed=Ut(function(){var e=this.height;this.height=null;var t=Gt(this)-e;if(t){mn(this.line,this.line.height+t);var n=_n(this.line);$e(this.cm,n,n+1)}});var mi=e.Line=function(e,t,n){this.text=e,Vt(this,t),this.height=n?n(this):1};Kn(mi),mi.prototype.lineNo=function(){return _n(this)};var _i={};cn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;r>n;++n){var i=this.lines[n];this.height-=i.height,Zt(i),Bn(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;i>r;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;r>e;++e)if(n(this.lines[e]))return!0;
}},fn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(i>e){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25){var s=[];this.collapse(s),this.children=[new cn(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;i>r;++r){var o=this.children[r],a=o.chunkSize();if(a>=e){if(o.insertInner(e,t,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var s=o.lines.splice(o.lines.length-25,25),l=new cn(s);o.height-=l.height,this.children.splice(r+1,0,l),l.parent=this}this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new fn(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=er(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new fn(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0,i=this.children.length;i>r;++r){var o=this.children[r],a=o.chunkSize();if(a>e){var s=Math.min(t,a-e);if(o.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=a}}};var yi=0,bi=e.Doc=function(e,t,n){if(!(this instanceof bi))return new bi(e,t,n);null==n&&(n=0),fn.call(this,[new cn([new mi("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=xn(),this.cleanGeneration=1,this.frontier=n;var r=Ge(n,0);this.sel={from:r,to:r,head:r,anchor:r,shift:!1,extend:!1,goalColumn:null},this.id=++yi,this.modeOption=t,"string"==typeof e&&(e=Ti(e)),un(this,{from:r,to:r,text:e},null,{head:r,anchor:r})};bi.prototype=tr(fn.prototype,{constructor:bi,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0,i=t.length;i>r;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=vn(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:function(e){var t=Ge(this.first,0),n=this.first+this.size-1;Pe(this,{from:t,to:Ge(n,hn(this,n).text.length),text:Ti(e),origin:"setValue"},{head:t,anchor:t},!0)},replaceRange:function(e,t,n,r){t=Je(this,t),n=n?Je(this,n):t,Ue(this,e,t,n,r)},getRange:function(e,t,n){var r=gn(this,Je(this,e),Je(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},setLine:function(e,t){et(this,e)&&Ue(this,t,Ge(e,0),Je(this,Ge(e)))},removeLine:function(e){e?Ue(this,"",Je(this,Ge(e-1)),Je(this,Ge(e))):Ue(this,"",Ge(0,0),Je(this,Ge(1,0)))},getLineHandle:function(e){return et(this,e)?hn(this,e):void 0},getLineNumber:function(e){return _n(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=hn(this,e)),Ft(this,e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Je(this,e)},getCursor:function(e){var t,n=this.sel;return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||e===!1?n.to:n.from,Ze(t)},somethingSelected:function(){return!Ke(this.sel.head,this.sel.anchor)},setCursor:se(function(e,t,n){var r=Je(this,"number"==typeof e?Ge(e,t||0):e);n?tt(this,r):rt(this,r,r)}),setSelection:se(function(e,t,n){rt(this,Je(this,e),Je(this,t||e),n)}),extendSelection:se(function(e,t,n){tt(this,Je(this,e),t&&Je(this,t),n)}),getSelection:function(e){return this.getRange(this.sel.from,this.sel.to,e)},replaceSelection:function(e,t,n){Pe(this,{from:this.sel.from,to:this.sel.to,text:Ti(e),origin:n},t||"around")},undo:se(function(){He(this,"undo")}),redo:se(function(){He(this,"redo")}),setExtending:function(e){this.sel.extend=e},historySize:function(){var e=this.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.history=xn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Sn(this.history.done),undone:Sn(this.history.undone)}},setHistory:function(e){var t=this.history=xn(this.history.maxGeneration);t.done=e.done.slice(0),t.undone=e.undone.slice(0)},markText:function(e,t,n){return Ot(this,Je(this,e),Je(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft};return e=Je(this,e),Ot(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Je(this,e);var t=[],n=hn(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;return i>e?(t=e,!0):(e-=i,void++n)}),Je(this,Ge(n,t))},indexFromPos:function(e){e=Je(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new bi(vn(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new bi(vn(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],r},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=this.linked[n];if(r.doc==t){this.linked.splice(n,1),t.unlinkDoc(this);break}}if(t.history==this.history){var i=[t.id];dn(t,function(e){i.push(e.id)},!0),t.history=xn(),t.history.done=Sn(this.history.done,i),t.history.undone=Sn(this.history.undone,i)}},iterLinkedDocs:function(e){dn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),bi.prototype.eachLine=bi.prototype.iter;var wi="iter insert remove copy getEditor".split(" ");for(var xi in bi.prototype)bi.prototype.hasOwnProperty(xi)&&er(wi,xi)<0&&(e.prototype[xi]=function(e){return function(){return e.apply(this.doc,arguments)}}(bi.prototype[xi]));Kn(bi),e.e_stop=Rn,e.e_preventDefault=zn,e.e_stopPropagation=qn;var ki,Ei=0;e.on=Fn,e.off=Hn,e.signal=Wn;var Ai=30,Oi=e.Pass={toString:function(){return"CodeMirror.Pass"}};Yn.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},e.countColumn=Zn;var Ci=[""],Si=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Mi=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\u1DC0\u2013\u1DFF\u20D0\u2013\u20FF\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff\uFE20\u2013\uFE2F]/;e.replaceGetRect=function(e){cr=e};var Ni=function(){if(Mr)return!1;var e=sr("div");return"draggable"in e||"dragDrop"in e}();Or?fr=function(e,t){return 36==e.charCodeAt(t-1)&&39==e.charCodeAt(t)}:qr&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?fr=function(e,t){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(e.slice(t-1,t+1))}:Lr&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?fr=function(e,t){var n=e.charCodeAt(t-1);return n>=8208&&8212>=n}:Lr&&(fr=function(e,t){if(t>1&&45==e.charCodeAt(t-1)){if(/\w/.test(e.charAt(t-2))&&/[^\-?\.]/.test(e.charAt(t)))return!0;if(t>2&&/[\d\.,]/.test(e.charAt(t-2))&&/[\d\.,]/.test(e.charAt(t)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|\u2026[\w~`@#$%\^&*(_=+{[><]/.test(e.slice(t-1,t+1))});var Li,Ii,Ti=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;r>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=Ti;var zi=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},qi=function(){var e=sr("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),ji={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=ji,function(){for(var e=0;10>e;e++)ji[e+48]=String(e);for(var e=65;90>=e;e++)ji[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)ji[e+111]=ji[e+63235]="F"+e}();var Ri,Di=function(){function e(e){return 255>=e?t.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1791>=e?n.charAt(e-1536):e>=1792&&2220>=e?"r":"L"}var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,o=/[LRr]/,a=/[Lb1n]/,s=/[1n]/,l="L";return function(t){if(!r.test(t))return!1;for(var n,$=t.length,u=[],c=0;$>c;++c)u.push(n=e(t.charCodeAt(c)));for(var c=0,f=l;$>c;++c){var n=u[c];"m"==n?u[c]=f:f=n}for(var c=0,d=l;$>c;++c){var n=u[c];"1"==n&&"r"==d?u[c]="n":o.test(n)&&(d=n,"r"==n&&(u[c]="R"))}for(var c=1,f=u[0];$-1>c;++c){var n=u[c];"+"==n&&"1"==f&&"1"==u[c+1]?u[c]="1":","!=n||f!=u[c+1]||"1"!=f&&"n"!=f||(u[c]=f),f=n}for(var c=0;$>c;++c){var n=u[c];if(","==n)u[c]="N";else if("%"==n){for(var p=c+1;$>p&&"%"==u[p];++p);for(var h=c&&"!"==u[c-1]||$-1>p&&"1"==u[p]?"1":"N",g=c;p>g;++g)u[g]=h;c=p-1}}for(var c=0,d=l;$>c;++c){var n=u[c];"L"==d&&"1"==n?u[c]="L":o.test(n)&&(d=n)}for(var c=0;$>c;++c)if(i.test(u[c])){for(var p=c+1;$>p&&i.test(u[p]);++p);for(var v="L"==(c?u[c-1]:l),m="L"==($-1>p?u[p]:l),h=v||m?"L":"R",g=c;p>g;++g)u[g]=h;c=p-1}for(var _,y=[],c=0;$>c;)if(a.test(u[c])){var b=c;for(++c;$>c&&a.test(u[c]);++c);y.push({from:b,to:c,level:0})}else{var w=c,x=y.length;for(++c;$>c&&"L"!=u[c];++c);for(var g=w;c>g;)if(s.test(u[g])){g>w&&y.splice(x,0,{from:w,to:g,level:1});var k=g;for(++g;c>g&&s.test(u[g]);++g);y.splice(x,0,{from:k,to:g,level:2}),w=g}else++g;c>w&&y.splice(x,0,{from:w,to:c,level:1})}return 1==y[0].level&&(_=t.match(/^\s+/))&&(y[0].from=_[0].length,y.unshift({from:0,to:_[0].length,level:0})),1==Jn(y).level&&(_=t.match(/\s+$/))&&(Jn(y).to-=_[0].length,y.push({from:$-_[0].length,to:$,level:0})),y[0].level!=Jn(y).level&&y.push({from:$,to:$,level:y[0].level}),y}}();return e.version="3.20.0",e}(),
// CodeMirror, copyright (c) by Marijn Haverbeke and others
function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){if(!e.hasOwnProperty(t))throw new Error("Undefined state "+t+" in simple mode")}function n(e,t){if(!e)return/(?:)/;var n="";return e instanceof RegExp?(e.ignoreCase&&(n="i"),e=e.source):e=String(e),new RegExp((t===!1?"":"^")+"(?:"+e+")",n)}function r(e){if(!e)return null;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g," "));return t}function i(e,i){(e.next||e.push)&&t(i,e.next||e.push),this.regex=n(e.regex),this.token=r(e.token),this.data=e}function o(e,t){return function(n,r){if(r.pending){var i=r.pending.shift();return 0==r.pending.length&&(r.pending=null),n.pos+=i.text.length,i.token}if(r.local){if(r.local.end&&n.match(r.local.end)){var o=r.local.endToken||null;return r.local=r.localState=null,o}var a,o=r.local.mode.token(n,r.localState);return r.local.endScan&&(a=r.local.endScan.exec(n.current()))&&(n.pos=n.start+a.index),o}for(var l=e[r.state],$=0;$<l.length;$++){var u=l[$],c=(!u.data.sol||n.sol())&&n.match(u.regex);if(c){if(u.data.next?r.state=u.data.next:u.data.push?((r.stack||(r.stack=[])).push(r.state),r.state=u.data.push):u.data.pop&&r.stack&&r.stack.length&&(r.state=r.stack.pop()),u.data.mode&&s(t,r,u.data.mode,u.token),u.data.indent&&r.indent.push(n.indentation()+t.indentUnit),u.data.dedent&&r.indent.pop(),c.length>2){r.pending=[];for(var f=2;f<c.length;f++)c[f]&&r.pending.push({text:c[f],token:u.token[f-1]});return n.backUp(c[0].length-(c[1]?c[1].length:0)),u.token[0]}return u.token&&u.token.join?u.token[0]:u.token}}return n.next(),null}}function a(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=0;for(var r in e)if(e.hasOwnProperty(r)){if(!t.hasOwnProperty(r)||!a(e[r],t[r]))return!1;n++}for(var r in t)t.hasOwnProperty(r)&&n--;return 0==n}function s(t,r,i,o){var s;if(i.persistent)for(var l=r.persistentStates;l&&!s;l=l.next)(i.spec?a(i.spec,l.spec):i.mode==l.mode)&&(s=l);var $=s?s.mode:i.mode||e.getMode(t,i.spec),u=s?s.state:e.startState($);i.persistent&&!s&&(r.persistentStates={mode:$,spec:i.spec,state:u,next:r.persistentStates}),r.localState=u,r.local={mode:$,end:i.end&&n(i.end),endScan:i.end&&i.forceEnd!==!1&&n(i.end,!1),endToken:o&&o.join?o[o.length-1]:o}}function l(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0}function $(t,n){return function(r,i,o){if(r.local&&r.local.mode.indent)return r.local.mode.indent(r.localState,i,o);if(null==r.indent||r.local||n.dontIndentStates&&l(r.state,n.dontIndentStates)>-1)return e.Pass;var a=r.indent.length-1,s=t[r.state];e:for(;;){for(var $=0;$<s.length;$++){var u=s[$];if(u.data.dedent&&u.data.dedentIfLineStart!==!1){var c=u.regex.exec(i);if(c&&c[0]){a--,(u.next||u.push)&&(s=t[u.next||u.push]),i=i.slice(c[0].length);continue e}}}break}return 0>a?0:r.indent[a]}}e.defineSimpleMode=function(t,n){e.defineMode(t,function(t){return e.simpleMode(t,n)})},e.simpleMode=function(n,r){t(r,"start");var a={},s=r.meta||{},l=!1;for(var u in r)if(u!=s&&r.hasOwnProperty(u))for(var c=a[u]=[],f=r[u],d=0;d<f.length;d++){var p=f[d];c.push(new i(p,r)),(p.indent||p.dedent)&&(l=!0)}var h={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:l?[]:null}},copyState:function(t){var n={state:t.state,pending:t.pending,local:t.local,localState:null,indent:t.indent&&t.indent.slice(0)};t.localState&&(n.localState=e.copyState(t.local.mode,t.localState)),t.stack&&(n.stack=t.stack.slice(0));for(var r=t.persistentStates;r;r=r.next)n.persistentStates={mode:r.mode,spec:r.spec,state:r.state==t.localState?n.localState:e.copyState(r.mode,r.state),next:n.persistentStates};return n},token:o(a,n),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:$(a,s)};if(s)for(var g in s)s.hasOwnProperty(g)&&(h[g]=s[g]);return h}}),CodeMirror.defineSimpleMode("fun",{start:[{regex:/"(?:[^\\]|\\.)*?"/,token:"string"},{regex:/(?:data|def|defrec|let|letrec|in|case|of|castup|castdn|if|else|then)\b/,token:"keyword"},{regex:/Int|String|Bool|True|False|\(\)|\*/,token:"atom"},{regex:/[-+]?(?:\.\d+|\d+\.?\d*)(?:e[-+]?\d+)?/i,token:"number"},{regex:/--.*/,token:"comment"},{regex:/\{-/,token:"comment",next:"comment"},{regex:/[-+\/=<>!:&|$^]+/,token:"operator"},{regex:/[\[\(]/,indent:!0},{regex:/[\]\)]/,dedent:!0},{regex:/[a-zA-Z_][\w']*/,token:"variable"}],comment:[{regex:/.*?-\}/,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{dontIndentStates:["comment"],lineComment:"--"}}),CodeMirror.defineMode("javascript",function(e,t){function n(e,t,n){return t.tokenize=n,n(e,t)}function r(e,t){for(var n,r=!1;null!=(n=e.next());){if(n==t&&!r)return!1;r=!r&&"\\"==n}return r}function i(e,t,n){return q=e,j=n,t}function o(e,t){var o=e.next();if('"'==o||"'"==o)return n(e,t,a(o));if(/[\[\]{}\(\),;\:\.]/.test(o))return i(o);if("0"==o&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(o)||"-"==o&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==o)return e.eat("*")?n(e,t,s):e.eat("/")?(e.skipToEnd(),i("comment","comment")):t.reAllowed?(r(e,"/"),e.eatWhile(/[gimy]/),i("regexp","string-2")):(e.eatWhile(F),i("operator",null,e.current()));if("#"==o)return e.skipToEnd(),i("error","error");if(F.test(o))return e.eatWhile(F),i("operator",null,e.current());e.eatWhile(/[\w\$_]/);var l=e.current(),$=P.propertyIsEnumerable(l)&&P[l];return $&&t.kwAllowed?i($.type,$.style,l):i("variable","variable",l)}function a(e){return function(t,n){return r(t,e)||(n.tokenize=o),i("string","string")}}function s(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=o;break}r="*"==n}return i("comment","comment")}function l(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function $(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function u(e,t,n,r,i){var o=e.cc;for(W.state=e,W.stream=i,W.marked=null,W.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var a=o.length?o.pop():D?y:_;if(a(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return W.marked?W.marked:"variable"==n&&$(e,r)?"variable-2":t}}}function c(){for(var e=arguments.length-1;e>=0;e--)W.cc.push(arguments[e])}function f(){return c.apply(null,arguments),!0}function d(e){var t=W.state;if(t.context){W.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}function p(){W.state.context={prev:W.state.context,vars:W.state.localVars},W.state.localVars=B}function h(){W.state.localVars=W.state.context.vars,W.state.context=W.state.context.prev}function g(e,t){var n=function(){var n=W.state;n.lexical=new l(n.indented,W.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function v(){var e=W.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function m(e){return function(t){return t==e?f():";"==e?c():f(arguments.callee)}}function _(e){return"var"==e?f(g("vardef"),C,m(";"),v):"keyword a"==e?f(g("form"),y,_,v):"keyword b"==e?f(g("form"),_,v):"{"==e?f(g("}"),O,v):";"==e?f():"function"==e?f(T):"for"==e?f(g("form"),m("("),g(")"),M,m(")"),v,_,v):"variable"==e?f(g("stat"),x):"switch"==e?f(g("form"),y,g("}","switch"),m("{"),O,v,v):"case"==e?f(y,m(":")):"default"==e?f(m(":")):"catch"==e?f(g("form"),p,m("("),z,m(")"),_,v,h):c(g("stat"),y,m(";"),v)}function y(e){return H.hasOwnProperty(e)?f(w):"function"==e?f(T):"keyword c"==e?f(b):"("==e?f(g(")"),b,m(")"),v,w):"operator"==e?f(y):"["==e?f(g("]"),A(y,"]"),v,w):"{"==e?f(g("}"),A(E,"}"),v,w):f()}function b(e){return e.match(/[;\}\)\],]/)?c():c(y)}function w(e,t){if("operator"==e&&/\+\+|--/.test(t))return f(w);if("operator"==e&&"?"==t)return f(y,m(":"),y);if(";"!=e)return"("==e?f(g(")"),A(y,")"),v,w):"."==e?f(k,w):"["==e?f(g("]"),y,m("]"),v,w):void 0}function x(e){return":"==e?f(v,_):c(w,m(";"),v)}function k(e){return"variable"==e?(W.marked="property",f()):void 0}function E(e){return"variable"==e&&(W.marked="property"),H.hasOwnProperty(e)?f(m(":"),y):void 0}function A(e,t){function n(r){return","==r?f(e,n):r==t?f():f(m(t))}return function(r){return r==t?f():c(e,n)}}function O(e){return"}"==e?f():c(_,O)}function C(e,t){return"variable"==e?(d(t),f(S)):f()}function S(e,t){return"="==t?f(y,S):","==e?f(C):void 0}function M(e){return"var"==e?f(C,L):";"==e?c(L):"variable"==e?f(N):c(L)}function N(e,t){return"in"==t?f(y):f(w,L)}function L(e,t){return";"==e?f(I):"in"==t?f(y):f(y,m(";"),I)}function I(e){")"!=e&&f(y)}function T(e,t){return"variable"==e?(d(t),f(T)):"("==e?f(g(")"),p,A(z,")"),v,_,h):void 0}function z(e,t){return"variable"==e?(d(t),f()):void 0}var q,j,R=e.indentUnit,D=t.json,P=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),o={type:"atom",style:"atom"};return{"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o}}(),F=/[+\-*&%=<>!?|]/,H={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},W={state:null,column:null,marked:null,cc:null},B={name:"this",next:{name:"arguments"}};return v.lex=!0,{startState:function(e){return{tokenize:o,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new l((e||0)-R,0,"block",!1),localVars:t.localVars,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==q?n:(t.reAllowed=!("operator"!=q&&"keyword c"!=q&&!q.match(/^[\[{}\(,;:]$/)),t.kwAllowed="."!=q,u(t,n,q,j,e))},indent:function(e,t){if(e.tokenize!=o)return 0;var n=t&&t.charAt(0),r=e.lexical;"stat"==r.type&&"}"==n&&(r=r.prev);var i=r.type,a=n==i;return"vardef"==i?r.indented+4:"form"==i&&"{"==n?r.indented:"stat"==i||"form"==i?r.indented+R:"switch"!=r.info||a?r.align?r.column+(a?0:1):r.indented+(a?0:R):r.indented+(/^(?:case|default)\b/.test(t)?R:2*R)},electricChars:":{}"}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});var stripAnsi=function(e){return"string"==typeof e?e.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,""):e},EXAMPLES={fact:"--> 120\n\nletrec fact (x : Int) : Int = if x == 0 then 1 else x ** fact (x - 1) in fact 5",fixpoint:"--> \\(f : * -> *) (a : *) (m : Functor f) (g : f a -> a) (t : Fix f) . g (fmap f m (Fix f) a ((/cata : (f : * -> *) -> (a : *) -> Functor f -> (f a -> a) -> Fix f -> a . \\(f : * -> *) (a : *) (m : Functor f) (g : f a -> a) (t : Fix f) . g (fmap f m (Fix f) a (cata f a m g) (out f t))) f a m g) (out f t))\n{-\n\nFixpoints of functors, also define a generic fold function `cata`\n\n-}\n\ndata Functor (f : * -> *) = Func {fmap : (a : *) -> (b : *) -> (a -> b) -> f a -> f b}; \ndata Fix (f : * -> *) = In {out : (f (Fix f)) }; \ndefrec cata : (f : * -> *) -> (a : *) -> Functor f -> (f a -> a) -> Fix f -> a = \\f : * -> * . \\ a : * . \\ m : Functor f . \\ g : f a -> a. \\ t : Fix f . g (fmap f m (Fix f) a (cata f a m g) (out f t));\ncata",functor:"--> castup^2 [Functor Maybe] (\\(_Functor : *) (_Func : ((a : *) -> (b : *) -> (a -> b) -> Maybe a -> Maybe b) -> _Functor) . _Func (\\(a : *) (b : *) (f : a -> b) (x : Maybe a) . (castdn^2 x) (Maybe b) (Nothing b) (\\z : a . Just b (f z))))\n{-\n\nA functor record, also define `Maybe` datatype and its functor instance\n\n-}\n\ndata Maybe (a : *) = Nothing | Just a;\n\n\ndata Functor (f : * -> *) =\n  Func {fmap : (a : *) -> (b : *) -> (a -> b) -> f a -> f b};\n\n\n\ndef maybeInst =\n  Func Maybe (\\ a : * . \\ b : * . \\f : a -> b . \\ x : Maybe a . \n    case x of\n      Nothing => Nothing b\n    | Just z => Just b (f z));\n\n\nmaybeInst",hoas:"--> 42\n{-\n\nHigher-order abstract syntax, also define `show` function for printing `Value`\n\n-}\n\ndata Exp = Num Int\n         | Lam (Exp -> Exp)\n         | App Exp Exp;\ndata Value = VI Int | VF (Value -> Value);\ndata Eval = Ev { eval' : Exp -> Value\n                       , reify' : Value -> Exp }; \ndefrec ev : Eval = Ev \n(\\ e : Exp . case e of \n    Num n => VI n\n  | Lam fun => VF (\\e' : Value . eval' ev (fun (reify' ev e')))\n  | App a b => case eval' ev a of \n                 VF fun => fun (eval' ev b))\n(\\v : Value . case v of \n    VI n => Num n\n  | VF fun =>\n       Lam (\\e' : Exp . (reify' ev (fun (eval' ev e')))));\ndef eval = eval' ev;\n\ndef show = \\(v : Value) . case v of \n    VI n => n\n;\n\ndef expr = App (Lam (\\ f : Exp . App f (Num 42)))\n                      (Lam (\\g : Exp. g));\nshow (eval expr)     -- return 42",kindPoly:"--> castup^4 [Mu * Listf Int] (\\(_Mu : *) (_Roll : Listf (Mu * Listf) Int -> _Mu) . _Roll (Nil (Mu * Listf) Int))\n{-\n\nHigher-kinded fixpoint combinator\n\n-}\n\n\ndata Mu (k : *) (f : (k -> *) -> k -> *) (a : k) =\n  Roll (f (Mu k f) a);\n\n\n\ndata Listf (f : * -> *) (a : *) = Nil | Cons a (f a); \ndef List = \\(a : *) . Mu * Listf a;\n\n\ndef nil = Roll * Listf Int (Nil (Mu * Listf) Int);\n\nnil",mutual:"--> True\ndefrec even' (odd : Int -> Bool) (n : Int) : Bool = \n    if n == 0 then True else odd (n - 1);\ndefrec odd' (even : Int -> Bool) (n : Int) : Bool = \n    if n == 0 then False else even (n - 1);\ndefrec even (n : Int) : Bool = even' (odd' even) n;\ndefrec odd (n : Int) : Bool = odd' (even' odd) n;\neven 10",polyList:"--> 2\n{-\n\nA polymorphic list and the `length` function\n\n-}\n\n\ndata List a = Nil | Cons a (List a);\n\n\n\ndefrec length : (a : *) -> List a -> Int =\n  \\ a : * . \\ l : List a . \n    case l of \n      Nil => 0\n    | Cons x xs => 1 + length a xs ;\n\ndef test = Cons Int 1 (Cons Int 2 (Nil Int));\nlength Int test     -- return 2",powtree:'--> "[42, 43]"\n{-\n\nA power tree, also define some help functions on lists, such as `foldr`,\n`append`, `concatMap`, `head`, `tail`. The `toList` function transform\na power tree to a list\n\n-}\n\ndata List a = Nil | Cons a (List a);\ndata PairT a = P a a;\ndata Pow a = Zero a | Succ (Pow (PairT a));\n\ndefrec foldr : (a : *) -> (b : *) -> (a -> b -> b) -> b -> List a -> b = \n\\a : * . \\b : * . \\f : a -> b -> b . \\y : b . \\l : List a . \n  case l of \n    Nil => y | \n    Cons x xs => f x (foldr a b f y xs) ;\n\ndefrec append : (a : *) -> List a -> List a -> List a = \n\\a : * . \\l : List a . \\m : List a . \n  case l of \n    Nil => m |\n    Cons x xs => Cons a x (append a xs m) ;\n\ndef concatMap = \n\\a : * . \\b : * . \\f : a -> List b . \n  foldr a (List b) (\\x : a . \\y : List b . append b (f x) y) (Nil b) ;\n\ndefrec toList : (a : *) -> Pow a -> List a = \n\\a : * . \\t : Pow a . \n  case t of \n    Zero x => Cons a x (Nil a) |\n    Succ c => concatMap (PairT a) a \n              (\\ x : PairT a . case x of \n                 P m n => Cons a m (Cons a n (Nil a))) (toList (PairT a) c) ;\n\ndefrec showListBody : (e : List Int) -> String =\n\\(e : List Int) .\n    case e of\n        Nil => "" |\n        Cons x xs => ", " ++ @(x) ++ showListBody xs\n;\n\ndef showList (e : List Int) : String = \n    case e of\n        Nil => "[]" |\n        Cons x xs => "[" ++ @(x) ++ (case xs of\n            Nil => "" |\n            Cons y ys => ", " ++ @(y) ++ showListBody ys\n        :: String) ++ "]"\n;\n\ndef test = Succ Int (Zero (PairT Int) (P Int 42 43)) ;\nshowList (toList Int test)',ptree:"--> castup^2 [PTree Z] (\\(_PTree : *) (_Empty : _PTree) (_Fork : Int -> PTree (S Z) -> PTree (S Z) -> _PTree) . _Fork 1 (Empty (S Z)) (Empty (S Z)))\n{-\n\nA labeled binary tree that keeps track its depth statically\n\n-}\n\ndata Nat = Z | S Nat; \ndata PTree (n : Nat) = Empty | Fork Int (PTree (S n)) (PTree (S n)); \nFork Z 1 (Empty (S Z)) (Empty (S Z))",vector:"--> \"2 3\"\n{-\n\nEncoding length-indexed list (vector) by Leibniz equality\n\nNote that in examples of the extended paper, for the purpose of presentation,\nwe use a *single* full-reduction cast by using reduction steps of the *surface\nlanguage*. However, the number of full casts here is **more than one**.\n\nBecause, in order to simplify the implementation, we first\ntranslate terms into the core language, and check the reduction\nrelation. Because of encoding, datatypes are not primitives which\nrequire more reduction steps.\n\n-}\n\ndata Eq k (a : k) (b : k) = Proof {subst : (f : k -> *) -> f a -> f b};\n\ndef Sym (k : *) (f : k -> k -> *) (a : k) (b : k) = f b a;\ndef From (a : *) (b : *) = a -> b;\ndef To (a : *) (b : *) = b -> a;\ndef Lift (k : *) (k' : *) (f : k -> k') (a : k) (b : k) = Eq k' (f a) (f b);\ndef Lift2 (k : *) (f : k -> k -> k) (c : k) (a : k) (b : k) = Eq k (f a c) (f b c);\n\ndef refl : (k : *) -> (a : k) -> Eq k a a = \n    \\k a . Proof k a a (\\f x . x);\n\ndef sym : (k : *) -> (a : k) -> (b : k) -> Eq k a b -> Eq k b a =\n    \\k a b p . castdn^4 (subst k a b p (Sym k (Eq k) a) (castup^4 (refl k a)));\n\ndef trans : (k : *) -> (a : k) -> (b : k) -> (c : k) -> Eq k a b -> Eq k b c -> Eq k a c =\n    \\k a b c p q . subst k b c q (Eq k a) p;\n\ndef from : (a : *) -> (b : *) -> Eq * a b -> a -> b =\n    \\a b p . castdn^2 (subst * a b p (From a) (castup^2 (\\x : a . x)));\n\ndef to : (a : *) -> (b : *) -> Eq * a b -> b -> a =\n    \\a b p . castdn^2 (subst * a b p (To a) (castup^2 (\\x : a . x)));\n\ndef lift : (k : *) -> (k' : *) -> (a : k) -> (b : k) -> (f : k -> k') -> Eq k a b -> Eq k' (f a) (f b) =\n    \\k k' a b f p . castdn^5 (subst k a b p (Lift k k' f a) (castup^5 (refl k' (f a))));\n\ndef lift2 : (k : *) -> (a : k) -> (b : k) -> (c : k) -> (f : k -> k -> k) -> Eq k a b -> Eq k (f a c) (f b c) =\n    \\k a b c f p . castdn^5 (subst k a b p (Lift2 k f c a) (castup^5 (refl k (f a c))));\n\ndata Nat = Z | S Nat;\ndata Vec a (n : Nat) =\n    Nil (Eq Nat n Z) | \n    Cons (m : Nat) (Eq Nat n (S m)) a (Vec a m);\n\ndef predNat : Nat -> Nat =\n    \\n . case n of S m => m;\n\ndef injNat : (n : Nat) -> (m : Nat) -> Eq Nat (S n) (S m) -> Eq Nat n m =\n    \\n m p . castdn!^6 (lift Nat Nat (S n) (S m) predNat p);\n\ndef castVec : (a : *) -> (n : Nat) -> (m : Nat) -> Eq Nat n m -> Vec a m -> Vec a n =\n    \\a n m p . to (Vec a n) (Vec a m) (lift Nat * n m (Vec a) p);\n\ndef head : (a : *) -> (n : Nat) -> (v : Vec a (S n)) -> a =\n    \\a n v . case v of\n        Cons m p x xs => x;\n\ndef tail : (a : *) -> (n : Nat) -> (v : Vec a (S n)) -> Vec a n =\n    \\a n v . case v of\n        Cons m p x xs => castVec a n m (injNat n m p) xs;\n\ndefrec plus (x : Nat) (y : Nat) : Nat =\n  case x of\n    Z => y |\n    S x' => S (plus x' y);\n\ndef pf : (n : Nat) -> Eq Nat n n = \\n . refl Nat n;\n\ndef castVecPlus : (a : *) -> (m : Nat) -> (n : Nat) -> (n' : Nat) -> Eq Nat n n' -> Vec a (plus n' m) -> Vec a (plus n m) =\n    \\a m n n' p . to (Vec a (plus n m)) (Vec a (plus n' m)) (lift Nat * (plus n m) (plus n' m) (Vec a) (lift2 Nat n n' m plus p));\n\ndefrec append (a : *) (n : Nat) (m : Nat) (xs : Vec a n) (ys : Vec a m) : Vec a (plus n m) =\n    case xs of\n        Nil p => castVecPlus a m n Z p (castup!^6 ys :: Vec a (plus Z m)) |\n        Cons n' p x xs' => castVecPlus a m n (S n') p (castup!^8 Cons a (S (plus n' m)) (plus n' m) (pf (S (plus n' m))) x (append a n' m xs' ys) :: Vec a (plus (S n') m));\n\ndef vec1 = Cons Int (S Z) Z (pf (S Z)) 3 (Nil Int Z (pf Z)); -- <3>\ndef vec2 = Cons Int (S (S Z)) (S Z) (pf (S (S Z))) 1 (Cons Int (S Z) Z (pf (S Z)) 2 (Nil Int Z (pf Z))); -- <1, 2>\ndef test1 = head Int Z (tail Int (S Z) vec2); -- head (tail <1, 2>) = 2\ndef test2 = head Int (S (S Z)) (castdn!^14 (append Int (S Z) (S (S Z)) vec1 vec2) :: Vec Int (S (S (S Z)))); -- head (<3> ++ <1, 2>) = 3\n@test1 ++ \" \" ++ @test2"};(function(e){function t(){}function n(){}function r(){}function i(){}function o(){}function a(e,t,n){function r(){}function i(){}r.prototype=t.constructor.prototype,i.prototype=new r,e&&(i.displayName="SingletonClass_alloc("+e+")");var o=new i;return s(o,i,t,n.prototype),o.$$alloc=n,o.$$proto.$$class=o,o}function s(e,t,n,r){e.$$id=E.uid(),e.$$proto=r,e.constructor=t,n===x?(e.$$is_module=!0,e.$$class=x):(e.$$is_class=!0,e.$$class=k),e.$$super=n,e.$$parent=n,e.$$inc=[]}function l(){function e(){}var t=function(){};t.prototype=i.prototype,e.prototype=new t;var n=new e,r={};return s(n,e,x,r),n}function $(e){var t=new E.Class.$$alloc;return t.$$class=E.Class,t.$$proto=e.constructor.prototype,t.$$is_singleton=!0,t.$$singleton_of=e,t.$$inc=[],t.$$scope=e.$$scope,e.$$meta=t}function u(e){var t=e.$$class,n="#<Class:#<"+t.$$name+":"+t.$$id+">>",r=function(){},i=E.boot_class(t,r);return i.$$name=n,i.$$proto=e,i.$$class=t.$$class,i.$$scope=t.$$scope,i.$$parent=t,i.$$is_singleton=!0,i.$$singleton_of=e,e.$$meta=i}function c(e,t,n,r){var i,o,a,s;for(i=e.$$bridge.$ancestors(),o=0,s=i.length;s>o&&(a=i[o],!C.call(a.$$proto,n)||!a.$$proto[n]||a.$$proto[n].$$donated||a.$$proto[n].$$stub||a===t);o++)if(a===t){e.prototype[n]=r;break}}function f(e,t){var n,r,i,o,a;if("function"==typeof e){for(n=t.$__id__(),r=t.$instance_methods(),o=r.length-1;o>=0;o--)i="$"+r[o],c(e,t,i,t.$$proto[i]);A[n]||(A[n]=[]),A[n].push(e)}else if(a=A[e.$__id__()]){for(o=a.length-1;o>=0;o--)f(a[o],t);A[t.$__id__()]=a.slice()}}function d(e,t,n){if(n){var r=function(){};r.prototype=n.$$proto||n.prototype,t.prototype=new r}return e&&(t.displayName=e+"_alloc"),t.prototype.constructor=t,t}function p(e,t,n){var r=function(){};r.prototype=n.prototype;var i=function(){};i.prototype=new r,i.displayName="#<Class:"+e+">";var o=new i;return s(o,i,n,t.prototype),o.$$alloc=t,o.$$name=e,o.displayName=e,t.prototype.$$class=o,E[e]=o,E.constants.push(e),o}function h(e,t){for(var n=e.$$scope.constants,r=t.$$scope,i=r.constants,o=0,a=n.length;a>o;o++)i.push(n[o]),r[n[o]]=e.$$scope[n[o]]}function g(e,t){var n,r,i,o,a,s,l,$,u,c,f=e.$$dep,d=e.$$proto[t];if(f)for(n=0,r=f.length;r>n;n++){if(i=f[n],o=i.$$proto,a=o[t],!o.hasOwnProperty(t)||a.$$donated||a.$$stub)if(o.hasOwnProperty(t)&&!a.$$stub){for(s=i.$$inc,l=0,$=s.length;$>l;l++)s[l]===a.$$donated&&(u=l),s[l]===e&&(c=l);c>=u&&(o[t]=d,o[t].$$donated=e)}else o[t]=d,o[t].$$donated=e;else;i.$$dep&&g(i,t)}}function v(e){function t(){return this.$method_missing.$$p=t.$$p,t.$$p=null,this.$method_missing.apply(this,[e.slice(1)].concat(S.call(arguments)))}return t.$$stub=!0,t}function m(e,t,n){var r=e.$$meta||e.$$class;for(t="$"+t;r&&r.$$proto[t]!==n;)r=r.$$parent;if(!r)throw new Error("could not find current class for super()");for(r=r.$$parent;r;){var i=r.$$proto[t];if(i&&i!==n)break;r=r.$$parent}return r.$$proto}function _(e){var t,n,r=[],i="/";"."!==E.current_dir&&(e=E.current_dir.replace(/\/*$/,"/")+e),e=e.replace(/\.(rb|opal|js)$/,""),t=e.split(i);for(var o=0,a=t.length;a>o;o++)n=t[o],""!==n&&(".."===n?r.pop():r.push(n));return r.join(i)}if("undefined"!=typeof this.Opal)return console.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),this.Opal;var y,b,w,x,k,E=this.Opal={},A={},O=function(){};O.prototype=E,E.constructor=O,E.constants=[],E.global=this;var C=E.hasOwnProperty,S=E.slice=Array.prototype.slice,M=4,N=M;E.uid=function(){return N+=2},E.cvars={},E.gvars={},E.exit=function(e){E.gvars.DEBUG&&console.log("Exited with status "+e)},E.exceptions=[],E.get=function(e){var t=this[e];return null==t?this.base.$const_get(e):t},E.create_scope=function(e,t,n){var r=function(){},i=r.prototype=new e.constructor;t.$$scope=i,t.$$base_module=e.base,i.base=t,i.constructor=r,i.constants=[],n&&(E.cdecl(e,n,t),r.displayName=n+"_scope_alloc")},E.klass=function(e,t,n,r){var i,o,s;if(e.$$is_class||e.$$is_module||(e=e.$$class),"function"==typeof t&&(o=t,t=w),i=e.$$scope[n],i&&i.$$orig_scope===e.$$scope){if(!i.$$is_class)throw E.TypeError.$new(n+" is not a class");if(t&&i.$$super!==t)throw E.TypeError.$new("superclass mismatch for class "+n);return i}return null==t&&(t=w),s=o||d(n,r,t),i=a(n,t,s),i.$$name=n,i.displayName=n,i.$$is_class=!0,E.create_scope(e.$$scope,i,n),e[n]=e.$$scope[n]=i,o?E.bridge(i,s):(t!==w&&t!==b&&h(t,i),t.$inherited&&t.$inherited(i)),i},E.boot_class=function(e,t){var n=d(null,t,e);return a(null,e,n)},E.module=function(e,t){var n;if(e.$$is_class||e.$$is_module||(e=e.$$class),C.call(e.$$scope,t)){if(n=e.$$scope[t],!n.$$is_module&&n!==w)throw E.TypeError.$new(t+" is not a module")}else n=l(),n.$$name=t,n.$$is_module=!0,n.$$dep=[],E.create_scope(e.$$scope,n,t),e[t]=e.$$scope[t]=n;return n},E.boot_module_object=l,E.get_singleton_class=function(e){return e.$$meta?e.$$meta:e.$$is_class||e.$$is_module?$(e):u(e)},E.append_features=function(e,t){var n,r,i,o,a,s;for(s=t.$$inc.length-1;s>=0;s--)if(t.$$inc[s]===e)return;for(t.$$inc.push(e),e.$$dep.push(t),f(t,e),n={$$name:e.$$name,$$proto:e.$$proto,$$parent:t.$$parent,$$module:e,$$iclass:!0},t.$$parent=n,r=e.$$proto,i=t.$$proto,o=e.$instance_methods(),s=o.length-1;s>=0;s--)a="$"+o[s],(!i.hasOwnProperty(a)||i[a].$$donated||i[a].$$stub)&&(i[a]=r[a],i[a].$$donated=e);h(e,t)},E.bridge=function(e,n){if(n.$$bridge)throw E.ArgumentError.$new("already bridged");E.stub_subscribers.push(n.prototype),n.prototype.$$class=e,n.$$bridge=e;for(var r=e.$ancestors(),i=r.length-1;i>=0;i--)f(n,r[i]);for(var o in t.prototype){var a=t.prototype[a];!a||!a.$$stub||o in n.prototype||(n.prototype[o]=a)}return e},E.casgn=function(e,t,n){function r(e,t){e.$$name=t;for(t in e.$$scope){var n=e.$$scope[t];n.$$name===y&&(n.$$is_class||n.$$is_module)&&r(n,t)}}var i=e.$$scope;return(n.$$is_class||n.$$is_module)&&((n.$$is_class||n.$$base_module===w)&&(n.$$base_module=e),n.$$name===y&&n.$$base_module.$$name!==y&&r(n,t)),i.constants.push(t),i[t]=n},E.cdecl=function(e,t,n){return(n.$$is_class||n.$$is_module)&&null==n.$$orig_scope&&(n.$$name=t,n.$$orig_scope=e,e.constructor[t]=n),e.constants.push(t),e[t]=n},E.add_stubs=function(e){var t,n,r,i,o,a=E.stub_subscribers,s=e.length,l=a.length;for(n=0;s>n;n++)for(i=e[n],o=v(i),r=0;l>r;r++)t=a[r],i in t||(t[i]=o)},E.stub_subscribers=[t.prototype],E.add_stub_for=function(e,t){var n=v(t);e[t]=n},E.ac=function(e,t,n,r){var i="";throw i+=n.$$is_class||n.$$is_module?n.$$name+".":n.$$class.$$name+"#",i+=r,E.ArgumentError.$new("["+i+"] wrong number of arguments("+e+" for "+t+")")},E.ancestors=function(e){for(var t=e,n=[];t;){n.push(t);for(var r=0;r<t.$$inc.length;r++)n=n.concat(E.ancestors(t.$$inc[r]));t=t.$$is_class?t.$$super:null}return n},E.find_super_dispatcher=function(e,t,n,r,i){var o;return o=i?e.$$is_class||e.$$is_module?i.$$super:e.$$class.$$proto:e.$$is_class||e.$$is_module?e.$$super:m(e,t,n),o=o["$"+t],o.$$p=r,o},E.find_iter_super_dispatcher=function(e,t,n,r,i){return n.$$def?E.find_super_dispatcher(e,n.$$jsid,n,r,i):E.find_super_dispatcher(e,t,n,r,i)},E.ret=function(e){throw E.returner.$v=e,E.returner},E.yield1=function(e,t){if("function"!=typeof e)throw E.LocalJumpError.$new("no block given");return e.length>1&&t.$$is_array?e.apply(null,t):e(t)},E.yieldX=function(e,t){if("function"!=typeof e)throw E.LocalJumpError.$new("no block given");return e.length>1&&1===t.length&&t[0].$$is_array?e.apply(null,t[0]):(t.$$is_array||(t=S.call(t)),e.apply(null,t))},E.rescue=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.$$is_array){var i=E.rescue(e,r);if(i)return i}else if(r["$==="](e))return r}return null},E.is_a=function(e,t){if(e.$$meta===t)return!0;for(var n=e.$$class;n;){if(n===t)return!0;for(var r=0,i=n.$$inc.length;i>r;r++)if(n.$$inc[r]===t)return!0;n=n.$$super}return!1},E.to_ary=function(e){if(e.$$is_array)return e.constructor===Array?e:e.literal;if(e["$respond_to?"]("to_ary",!0)){var t=e.$to_ary();if(t===y)return[e];if(t.$$is_array)return t.constructor===Array?t:t.literal;throw E.TypeError.$new("Can't convert "+e.$$class+" to Array ("+e.$$class+"#to_ary gives "+t.$$class+")")}return[e]},E.to_a=function(e){if(e.$$is_array)return e.constructor===Array?e.slice():e.literal.slice();if(e["$respond_to?"]("to_a",!0)){var t=e.$to_a();if(t===y)return[e];if(t.$$is_array)return t.constructor===Array?t:t.literal;throw E.TypeError.$new("Can't convert "+e.$$class+" to Array ("+e.$$class+"#to_a gives "+t.$$class+")")}return[e]},E.kwrestargs=function(e,t){var n=[],r={},i=null,o=e.$$smap;for(i in o)t[i]||(n.push(i),r[i]=o[i]);return E.hash2(n,r)},E.send=function(e,t){var n=S.call(arguments,2),r=e["$"+t];return r?r.apply(e,n):e.$method_missing.apply(e,[t].concat(n))},E.block_send=function(e,t,n){var r=S.call(arguments,3),i=e["$"+t];return i?(i.$$p=n,i.apply(e,r)):e.$method_missing.apply(e,[t].concat(r))},E.defn=function(e,t,n){if(e.$$proto[t]=n,e.$$is_module&&(g(e,t),e.$$module_function&&E.defs(e,t,n)),e.$__id__&&!e.$__id__.$$stub){var r=A[e.$__id__()];if(r)for(var i=r.length-1;i>=0;i--)c(r[i],e,t,n)}e.$method_added&&!e.$method_added.$$stub&&e.$method_added(t.substr(1));var o=e.$$singleton_of;return o&&o.$singleton_method_added&&!o.$singleton_method_added.$$stub&&o.$singleton_method_added(t.substr(1)),y},E.defs=function(e,t,n){E.defn(E.get_singleton_class(e),t,n)},E.def=function(e,t,n){e.$$eval||!e.$$is_class&&!e.$$is_module?E.defs(e,t,n):E.defn(e,t,n)},E.rdef=function(e,t){if(!C.call(e.$$proto,t))throw E.NameError.$new("method '"+t.substr(1)+"' not defined in "+e.$name());delete e.$$proto[t],e.$$is_singleton?e.$$proto.$singleton_method_removed&&!e.$$proto.$singleton_method_removed.$$stub&&e.$$proto.$singleton_method_removed(t.substr(1)):e.$method_removed&&!e.$method_removed.$$stub&&e.$method_removed(t.substr(1))},E.udef=function(e,t){if(!e.$$proto[t]||e.$$proto[t].$$stub)throw E.NameError.$new("method '"+t.substr(1)+"' not defined in "+e.$name());E.add_stub_for(e.$$proto,t),e.$$is_singleton?e.$$proto.$singleton_method_undefined&&!e.$$proto.$singleton_method_undefined.$$stub&&e.$$proto.$singleton_method_undefined(t.substr(1)):e.$method_undefined&&!e.$method_undefined.$$stub&&e.$method_undefined(t.substr(1))},E.alias=function(e,t,n){var r="$"+t,i="$"+n,o=e.$$proto["$"+n];if(e.$$eval)return E.alias(E.get_singleton_class(e),t,n);if("function"!=typeof o||o.$$stub){for(var a=e.$$super;"function"!=typeof o&&a;)o=a[i],a=a.$$super;if("function"!=typeof o||o.$$stub)throw E.NameError.$new("undefined method `"+n+"' for class `"+e.$name()+"'")}return E.defn(e,r,o),e},E.alias_native=function(e,t,n){var r="$"+t,i=e.$$proto[n];if("function"!=typeof i||i.$$stub)throw E.NameError.$new("undefined native method `"+n+"' for class `"+e.$name()+"'");return E.defn(e,r,i),e},E.hash_init=function(e){e.$$map={},e.$$smap={},e.$$keys=[]},E.hash_clone=function(e,t){t.none=e.none,t.proc=e.proc;for(var n,r,i=0,o=e.$$keys,a=o.length;a>i;i++)n=e.$$keys[i],n.$$is_string?r=e.$$smap[n]:(r=n.value,n=n.key),E.hash_put(t,n,r)},E.hash_put=function(t,n,r){if(n.$$is_string)return t.$$smap.hasOwnProperty(n)||t.$$keys.push(n),void(t.$$smap[n]=r);var i,o,a=n.$hash();if(!t.$$map.hasOwnProperty(a))return i={key:n,key_hash:a,value:r},t.$$keys.push(i),void(t.$$map[a]=i);for(i=t.$$map[a];i;){if(n===i.key||n["$eql?"](i.key)){o=e,i.value=r;break}o=i,i=i.next}o&&(i={key:n,key_hash:a,value:r},t.$$keys.push(i),o.next=i)},E.hash_get=function(e,t){if(t.$$is_string){if(e.$$smap.hasOwnProperty(t))return e.$$smap[t]}else{var n,r=t.$hash();if(e.$$map.hasOwnProperty(r))for(n=e.$$map[r];n;){if(t===n.key||t["$eql?"](n.key))return n.value;n=n.next}}},E.hash_delete=function(e,t){var n,r,i=e.$$keys,o=i.length;if(t.$$is_string){if(!e.$$smap.hasOwnProperty(t))return;for(n=0;o>n;n++)if(i[n]===t){i.splice(n,1);break}return r=e.$$smap[t],delete e.$$smap[t],r}var a=t.$hash();if(e.$$map.hasOwnProperty(a))for(var s,l=e.$$map[a];l;){if(t===l.key||t["$eql?"](l.key)){for(r=l.value,n=0;o>n;n++)if(i[n]===l){i.splice(n,1);break}return s&&l.next?s.next=l.next:s?delete s.next:l.next?e.$$map[a]=l.next:delete e.$$map[a],r}s=l,l=l.next}},E.hash_rehash=function(t){for(var n,r,i,o=0,a=t.$$keys.length;a>o;o++)if(!t.$$keys[o].$$is_string&&(n=t.$$keys[o].key.$hash(),n!==t.$$keys[o].key_hash)){for(r=t.$$map[t.$$keys[o].key_hash],i=e;r;){if(r===t.$$keys[o]){i&&r.next?i.next=r.next:i?delete i.next:r.next?t.$$map[t.$$keys[o].key_hash]=r.next:delete t.$$map[t.$$keys[o].key_hash];break}i=r,r=r.next}if(t.$$keys[o].key_hash=n,t.$$map.hasOwnProperty(n)){for(r=t.$$map[n],i=e;r;){if(r===t.$$keys[o]){i=e;break}i=r,r=r.next}i&&(i.next=t.$$keys[o])}else t.$$map[n]=t.$$keys[o]}},E.hash=function(){var e,t,n,r,i,o,a=arguments.length;if(1===a&&arguments[0].$$is_hash)return arguments[0];if(t=new E.Hash.$$alloc,E.hash_init(t),1===a&&arguments[0].$$is_array){for(e=arguments[0],r=e.length,n=0;r>n;n++){if(2!==e[n].length)throw E.ArgumentError.$new("value not of length 2: "+e[n].$inspect());
i=e[n][0],o=e[n][1],E.hash_put(t,i,o)}return t}if(1===a){e=arguments[0];for(i in e)e.hasOwnProperty(i)&&(o=e[i],E.hash_put(t,i,o));return t}if(a%2!==0)throw E.ArgumentError.$new("odd number of arguments for Hash");for(n=0;a>n;n+=2)i=arguments[n],o=arguments[n+1],E.hash_put(t,i,o);return t},E.hash2=function(e,t){var n=new E.Hash.$$alloc;return n.$$map={},n.$$keys=e,n.$$smap=t,n},E.range=function(e,t,n){var r=new E.Range.$$alloc;return r.begin=e,r.end=t,r.exclude=n,r},E.ivar=function(e){return"constructor"===e||"displayName"===e||"__count__"===e||"__noSuchMethod__"===e||"__parent__"===e||"__proto__"===e||"hasOwnProperty"===e||"valueOf"===e?e+"$":e},E.modules={},E.loaded_features=["corelib/runtime"],E.current_dir=".",E.require_table={"corelib/runtime":!0},E.loaded=function(e){var t,n,r;for(t=0,n=e.length;n>t;t++){if(r=_(e[t]),E.require_table[r])return;E.loaded_features.push(r),E.require_table[r]=!0}},E.load=function(e){e=_(e),E.loaded([e]);var t=E.modules[e];if(t)t(E);else{var n=E.dynamic_require_severity||"warning",r="cannot load such file -- "+e;"error"===n?E.LoadError?E.LoadError.$new(r):function(){throw r}():"warning"===n&&console.warn("WARNING: LoadError: "+r)}return!0},E.require=function(e){return e=_(e),E.require_table[e]?!1:E.load(e)},d("BasicObject",t),d("Object",n,t),d("Module",i,n),d("Class",r,i),b=p("BasicObject",t,r),w=p("Object",n,b.constructor),x=p("Module",i,w.constructor),k=p("Class",r,x.constructor),b.$$class=k,w.$$class=k,x.$$class=k,k.$$class=k,b.$$super=null,w.$$super=b,x.$$super=w,k.$$super=x,b.$$parent=null,w.$$parent=b,x.$$parent=w,k.$$parent=x,E.base=w,b.$$scope=w.$$scope=E,b.$$orig_scope=w.$$orig_scope=E,x.$$scope=w.$$scope,x.$$orig_scope=w.$$orig_scope,k.$$scope=w.$$scope,k.$$orig_scope=w.$$orig_scope,w.$$proto.toString=function(){return this.$to_s()},w.$$proto.$require=E.require,E.top=new w.$$alloc,E.klass(w,w,"NilClass",o),y=E.nil=new o,y.$$id=M,y.call=y.apply=function(){throw E.LocalJumpError.$new("no block given")},E.breaker=new Error("unexpected break"),E.returner=new Error("unexpected return"),TypeError.$$super=Error}).call(this),"undefined"!=typeof global&&(global.Opal=this.Opal,Opal.global=global),"undefined"!=typeof window&&(window.Opal=this.Opal,Opal.global=window),Opal.modules["corelib/helpers"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice),i=e.module;return e.add_stubs(["$new","$class","$===","$respond_to?","$raise","$type_error","$__send__","$coerce_to","$nil?","$<=>","$inspect","$coerce_to!"]),function(t){var o,a=o=i(t,"Opal"),s=(a.$$proto,a.$$scope);e.defs(a,"$bridge",function(t,n){return e.bridge(t,n)}),e.defs(a,"$type_error",function(e,t,r,i){var o,a;return null==r&&(r=n),null==i&&(i=n),(o=(a=r!==!1&&r!==n)?i:r)===n||o.$$is_boolean&&1!=o?s.get("TypeError").$new("no implicit conversion of "+e.$class()+" into "+t):s.get("TypeError").$new("can't convert "+e.$class()+" into "+t+" ("+e.$class()+"#"+r+" gives "+i.$class())}),e.defs(a,"$coerce_to",function(e,t,r){var i,o=this;return(i=t["$==="](e))===n||i.$$is_boolean&&1!=i?(((i=e["$respond_to?"](r))===n||i.$$is_boolean&&1!=i)&&o.$raise(o.$type_error(e,t)),e.$__send__(r)):e}),e.defs(a,"$coerce_to!",function(e,t,r){var i,o=this,a=n;return a=o.$coerce_to(e,t,r),((i=t["$==="](a))===n||i.$$is_boolean&&1!=i)&&o.$raise(o.$type_error(e,t,r,a)),a}),e.defs(a,"$coerce_to?",function(e,t,r){var i,o=this,a=n;return(i=e["$respond_to?"](r))===n||i.$$is_boolean&&1!=i?n:(a=o.$coerce_to(e,t,r),(i=a["$nil?"]())===n||i.$$is_boolean&&1!=i?(((i=t["$==="](a))===n||i.$$is_boolean&&1!=i)&&o.$raise(o.$type_error(e,t,r,a)),a):n)}),e.defs(a,"$try_convert",function(e,t,r){var i;return(i=t["$==="](e))===n||i.$$is_boolean&&1!=i?(i=e["$respond_to?"](r))===n||i.$$is_boolean&&1!=i?n:e.$__send__(r):e}),e.defs(a,"$compare",function(e,t){var r,i=this,o=n;return o=e["$<=>"](t),(r=o===n)===n||r.$$is_boolean&&1!=r||i.$raise(s.get("ArgumentError"),"comparison of "+e.$class()+" with "+t.$class()+" failed"),o}),e.defs(a,"$destructure",function(e){return 1==e.length?e[0]:e.$$is_array?e:r.call(e)}),e.defs(a,"$respond_to?",function(e,t){return null!=e&&e.$$class?e["$respond_to?"](t):!1}),e.defs(a,"$inspect",function(e){return void 0===e?"undefined":null===e?"null":e.$$class?e.$inspect():e.toString()}),e.defs(a,"$instance_variable_name!",function(e){var t,r=this;return e=s.get("Opal")["$coerce_to!"](e,s.get("String"),"to_str"),((t=/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(e))===n||t.$$is_boolean&&1!=t)&&r.$raise(s.get("NameError").$new("'"+e+"' is not allowed as an instance variable name",e)),e})}(t.base)},Opal.modules["corelib/module"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),i=e.nil,o=(e.breaker,e.slice),a=e.klass;return e.add_stubs(["$===","$raise","$equal?","$<","$>","$nil?","$attr_reader","$attr_writer","$coerce_to!","$new","$=~","$inject","$const_get","$split","$const_missing","$to_str","$to_proc","$lambda","$bind","$call","$class","$append_features","$included","$name","$to_s","$__id__"]),function(r,$super){function s(){}var l,$,u,c,f=s=a(r,$super,"Module",s),d=(f.$$proto,f.$$scope);return e.defs(f,"$new",l=function(){var t=l.$$p,n=t||i;l.$$p=null;var r=e.boot_module_object();if(r.$$name=i,r.$$class=e.Module,r.$$dep=[],r.$$is_module=!0,r.$$proto={},e.create_scope(e.Module.$$scope,r),n!==i){var o=n.$$s;n.$$s=null,n.call(r),n.$$s=o}return r}),e.defn(f,"$===",function(t){var n,r=this;return(n=null==t)===i||n.$$is_boolean&&1!=n?e.is_a(t,r):!1}),e.defn(f,"$<",function(t){var n,r=this;((n=d.get("Module")["$==="](t))===i||n.$$is_boolean&&1!=n)&&r.$raise(d.get("TypeError"),"compared with non class/module");var o,a,s,l=r;if(l===t)return!1;for(a=0,o=e.ancestors(r),s=o.length;s>a;a++)if(o[a]===t)return!0;for(a=0,o=e.ancestors(t),s=o.length;s>a;a++)if(o[a]===r)return!1;return i}),e.defn(f,"$<=",function(e){var n,r=this;return(n=r["$equal?"](e))!==!1&&n!==i?n:t(r,e)}),e.defn(f,"$>",function(e){var n,r=this;return((n=d.get("Module")["$==="](e))===i||n.$$is_boolean&&1!=n)&&r.$raise(d.get("TypeError"),"compared with non class/module"),t(e,r)}),e.defn(f,"$>=",function(e){var t,r=this;return(t=r["$equal?"](e))!==!1&&t!==i?t:n(r,e)}),e.defn(f,"$<=>",function(e){var n,r=this,o=i;return r===e?0:(n=d.get("Module")["$==="](e))===i||n.$$is_boolean&&1!=n?i:(o=t(r,e),(n=o["$nil?"]())===i||n.$$is_boolean&&1!=n?o!==!1&&o!==i?-1:1:i)}),e.defn(f,"$alias_method",function(t,n){var r=this;return e.alias(r,t,n),r}),e.defn(f,"$alias_native",function(t,n){var r=this;return null==n&&(n=t),e.alias_native(r,t,n),r}),e.defn(f,"$ancestors",function(){var t=this;return e.ancestors(t)}),e.defn(f,"$append_features",function(t){var n=this;return e.append_features(n,t),n}),e.defn(f,"$attr_accessor",function(){var t,n,r=this,o=i,a=arguments.length-0;0>a&&(a=0);var s=new Array(a);for(o=0;a>o;o++)s[o]=arguments[o+0];return(t=r).$attr_reader.apply(t,e.to_a(s)),(n=r).$attr_writer.apply(n,e.to_a(s))}),e.alias(f,"attr","attr_accessor"),e.defn(f,"$attr_reader",function(){var t=this,n=i,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];for(var a=t.$$proto,s=o.length-1;s>=0;s--){var l=o[s],$="$"+l,u=e.ivar(l),c=function(e){return function(){return null==this[e]?i:this[e]}}(u);a[u]=i,t.$$is_singleton?a.constructor.prototype[$]=c:e.defn(t,$,c)}return i}),e.defn(f,"$attr_writer",function(){var t=this,n=i,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];for(var a=t.$$proto,s=o.length-1;s>=0;s--){var l=o[s],$="$"+l+"=",u=e.ivar(l),c=function(e){return function(t){return this[e]=t}}(u);a[u]=i,t.$$is_singleton?a.constructor.prototype[$]=c:e.defn(t,$,c)}return i}),e.defn(f,"$autoload",function(e,t){var n,r=this;return(n=r.$$autoload)||(n=r.$$autoload={}),n[e]=t,i}),e.defn(f,"$class_variable_get",function(t){var n,r=this;t=d.get("Opal")["$coerce_to!"](t,d.get("String"),"to_str"),(n=t.length<3||"@@"!==t.slice(0,2))===i||n.$$is_boolean&&1!=n||r.$raise(d.get("NameError").$new("class vars should start with @@",t));var o=e.cvars[t.slice(2)];return function(){return(n=null==o)===i||n.$$is_boolean&&1!=n?i:r.$raise(d.get("NameError").$new("uninitialized class variable @@a in",t))}(),o}),e.defn(f,"$class_variable_set",function(t,n){var r,o=this;return t=d.get("Opal")["$coerce_to!"](t,d.get("String"),"to_str"),(r=t.length<3||"@@"!==t.slice(0,2))===i||r.$$is_boolean&&1!=r||o.$raise(d.get("NameError")),e.cvars[t.slice(2)]=n,n}),e.defn(f,"$constants",function(){var e=this;return e.$$scope.constants.slice(0)}),e.defn(f,"$const_defined?",function(t,n){var r,o=this;null==n&&(n=!0),((r=t["$=~"](/^[A-Z]\w*$/))===i||r.$$is_boolean&&1!=r)&&o.$raise(d.get("NameError").$new("wrong constant name "+t,t));var a=[o.$$scope];if(n||o===e.Object)for(var s=o.$$super;s!==e.BasicObject;)a.push(s.$$scope),s=s.$$super;for(var l=0,$=a.length;$>l;l++)if(a[l].hasOwnProperty(t))return!0;return!1}),e.defn(f,"$const_get",function(t,n){var r,o,a,s=this;if(null==n&&(n=!0),(r=-1!=t.indexOf("::")&&"::"!=t)!==i&&(!r.$$is_boolean||1==r))return(r=(o=t.$split("::")).$inject,r.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=i),null==t&&(t=i),e.$const_get(t)},a.$$s=s,a),r).call(o,s);((r=/^[A-Z]\w*$/.test(t))===i||r.$$is_boolean&&1!=r)&&s.$raise(d.get("NameError").$new("wrong constant name "+t,t));var l=[s.$$scope];if(n||s==e.Object)for(var $=s.$$super;$!==e.BasicObject;)l.push($.$$scope),$=$.$$super;for(var u=0,c=l.length;c>u;u++)if(l[u].hasOwnProperty(t))return l[u][t];return s.$const_missing(t)}),e.defn(f,"$const_missing",function(e){var t=this;if(t.$$autoload){var n=t.$$autoload[e];if(n)return t.$require(n),t.$const_get(e)}return t.$raise(d.get("NameError").$new("uninitialized constant "+t+"::"+e,e))}),e.defn(f,"$const_set",function(t,n){var r,o=this;((r=t["$=~"](/^[A-Z]\w*$/))===i||r.$$is_boolean&&1!=r)&&o.$raise(d.get("NameError").$new("wrong constant name "+t,t));try{t=t.$to_str()}catch(a){try{o.$raise(d.get("TypeError"),"conversion with #to_str failed")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return e.casgn(o,t,n),n}),e.defn(f,"$define_method",$=function(t,n){var r,a,s,l,u=this,c=$.$$p,f=c||i,p=i;$.$$p=null,(r=void 0===n&&f===i)===i||r.$$is_boolean&&1!=r||u.$raise(d.get("ArgumentError"),"tried to create a Proc object without a block"),(r=f)!==!1&&r!==i?r:f=function(){return p=n,d.get("Proc")["$==="](p)?n:d.get("Method")["$==="](p)?n.$to_proc().$$unbound:d.get("UnboundMethod")["$==="](p)?(a=(s=u).$lambda,a.$$p=(l=function(t){var r,a=l.$$s||this,s=i;return t=o.call(arguments,0),s=n.$bind(a),(r=s).$call.apply(r,e.to_a(t))},l.$$s=u,l),a).call(s):u.$raise(d.get("TypeError"),"wrong argument type "+f.$class()+" (expected Proc/Method)")}();var h="$"+t;return f.$$jsid=t,f.$$s=null,f.$$def=f,e.defn(u,h,f),t}),e.defn(f,"$remove_method",function(){var t=this,n=i,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];for(var a=0,s=o.length;s>a;a++)e.rdef(t,"$"+o[a]);return t}),e.defn(f,"$singleton_class?",function(){var e=this;return!!e.$$is_singleton}),e.defn(f,"$include",function(){var e=this,t=i,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var o=r.length-1;o>=0;o--){var a=r[o];a!==e&&(a.$$is_module||e.$raise(d.get("TypeError"),"wrong argument type "+a.$class()+" (expected Module)"),a.$append_features(e),a.$included(e))}return e}),e.defn(f,"$include?",function(e){for(var t=this,n=t;n;n=n.$$super)for(var r=0;r!=n.$$inc.length;r++){var i=n.$$inc[r];if(e===i)return!0}return!1}),e.defn(f,"$instance_method",function(e){var t=this,n=t.$$proto["$"+e];return(!n||n.$$stub)&&t.$raise(d.get("NameError").$new("undefined method `"+e+"' for class `"+t.$name()+"'",e)),d.get("UnboundMethod").$new(t,n,e)}),e.defn(f,"$instance_methods",function(t){var n=this;null==t&&(t=!0);var r=[],i=n.$$proto;for(var o in i)if("$"===o.charAt(0)&&"function"==typeof i[o]&&!i[o].$$stub){if(!n.$$is_module){if(n!==e.BasicObject&&i[o]===e.BasicObject.$$proto[o])continue;if(!t&&!i.hasOwnProperty(o))continue;if(!t&&i[o].$$donated)continue}r.push(o.substr(1))}return r}),e.defn(f,"$included",function(e){return i}),e.defn(f,"$extended",function(e){return i}),e.defn(f,"$method_added",function(){return i}),e.defn(f,"$method_removed",function(){return i}),e.defn(f,"$method_undefined",function(){return i}),e.defn(f,"$module_eval",u=function(){var e=this,t=u.$$p,n=t||i;u.$$p=null,n!==!1&&n!==i||e.$raise(d.get("ArgumentError"),"no block given");var r,o=n.$$s;return n.$$s=null,r=n.call(e),n.$$s=o,r}),e.alias(f,"class_eval","module_eval"),e.defn(f,"$module_exec",c=function(){var e=this,t=c.$$p,n=t||i,r=i,o=arguments.length-0;0>o&&(o=0);var a=new Array(o);for(r=0;o>r;r++)a[r]=arguments[r+0];c.$$p=null,n===i&&e.$raise(d.get("LocalJumpError"),"no block given");var s,l=n.$$s;return n.$$s=null,s=n.apply(e,a),n.$$s=l,s}),e.alias(f,"class_exec","module_exec"),e.defn(f,"$method_defined?",function(e){var t=this,n=t.$$proto["$"+e];return!!n&&!n.$$stub}),e.defn(f,"$module_function",function(){var t=this,n=i,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];if(0===o.length)t.$$module_function=!0;else for(var a=0,s=o.length;s>a;a++){var l=o[a],$="$"+l,u=t.$$proto[$];e.defs(t,$,u)}return t}),e.defn(f,"$name",function(){var t=this;if(t.$$full_name)return t.$$full_name;for(var n=[],r=t;r;){if(r.$$name===i)return 0===n.length?i:n.join("::");if(n.unshift(r.$$name),r=r.$$base_module,r===e.Object)break}return 0===n.length?i:t.$$full_name=n.join("::")}),e.defn(f,"$remove_class_variable",function(){return i}),e.defn(f,"$remove_const",function(e){var t=this,n=t.$$scope[e];return delete t.$$scope[e],n}),e.defn(f,"$to_s",function(){var t,n=this;return(t=e.Module.$name.call(n))!==!1&&t!==i?t:"#<"+(n.$$is_module?"Module":"Class")+":0x"+n.$__id__().$to_s(16)+">"}),e.defn(f,"$undef_method",function(){var t=this,n=i,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];for(var a=0,s=o.length;s>a;a++)e.udef(t,"$"+o[a]);return t}),i&&"undef_method"}(r.base,null)},Opal.modules["corelib/class"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,i=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$raise","$allocate"]),t.$require("corelib/module"),function(t,$super){function n(){}var o,a,s=n=i(t,$super,"Class",n),l=(s.$$proto,s.$$scope);return e.defs(s,"$new",o=function(t){function n(){}var i=this,a=o.$$p,s=a||r;null==t&&(t=l.get("Object")),o.$$p=null,t.$$is_class||i.$raise(l.get("TypeError"),"superclass must be a Class");var $=e.boot_class(t,n);if($.$$name=r,$.$$parent=t,$.$$is_class=!0,e.create_scope(t.$$scope,$),t.$inherited($),s!==r){var u=s.$$s;s.$$s=null,s.call($),s.$$s=u}return $}),e.defn(s,"$allocate",function(){var t=this,n=new t.$$alloc;return n.$$id=e.uid(),n}),e.defn(s,"$inherited",function(e){return r}),e.defn(s,"$new",a=function(){var e=this,t=a.$$p,n=t||r,i=r,o=arguments.length-0;0>o&&(o=0);var s=new Array(o);for(i=0;o>i;i++)s[i]=arguments[i+0];a.$$p=null;var l=e.$allocate();return l.$initialize.$$p=n,l.$initialize.apply(l,s),l}),e.defn(s,"$superclass",function(){var e=this;return e.$$super||r}),r&&"superclass"}(n.base,null)},Opal.modules["corelib/basic_object"]=function(Opal){function $rb_gt(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}Opal.dynamic_require_severity="ignore";var OPAL_CONFIG={method_missing:!0,arity_check:!1,freezing:!0,tainting:!0},self=Opal.top,$scope=Opal,nil=Opal.nil,$breaker=Opal.breaker,$slice=Opal.slice,$klass=Opal.klass,$range=Opal.range,$hash2=Opal.hash2;return Opal.add_stubs(["$==","$!","$nil?","$cover?","$size","$raise","$compile","$lambda","$>","$new","$inspect"]),function($base,$super){function $BasicObject(){}var self=$BasicObject=$klass($base,$super,"BasicObject",$BasicObject),def=self.$$proto,$scope=self.$$scope,TMP_1,TMP_2,TMP_4,TMP_5;return Opal.defn(self,"$initialize",function(){return nil}),Opal.defn(self,"$==",function(e){var t=this;return t===e}),Opal.defn(self,"$eql?",function(e){var t=this;return t["$=="](e)}),Opal.alias(self,"equal?","=="),Opal.defn(self,"$__id__",function(){var e=this;return e.$$id||(e.$$id=Opal.uid())}),Opal.defn(self,"$__send__",TMP_1=function(e){var t=this,n=TMP_1.$$p,r=n||nil,i=nil,o=arguments.length-1;0>o&&(o=0);var a=new Array(o);for(i=0;o>i;i++)a[i]=arguments[i+1];TMP_1.$$p=null;var s=t["$"+e];return s?(r!==nil&&(s.$$p=r),s.apply(t,a)):(r!==nil&&(t.$method_missing.$$p=r),t.$method_missing.apply(t,[e].concat(a)))}),Opal.defn(self,"$!",function(){return!1}),Opal.defn(self,"$!=",function(e){var t=this;return t["$=="](e)["$!"]()}),Opal.alias(self,"equal?","=="),Opal.defn(self,"$instance_eval",TMP_2=function(){var $a,$b,TMP_3,self=this,$iter=TMP_2.$$p,block=$iter||nil,string=nil,file=nil,_lineno=nil,compiled=nil,wrapper=nil,$splat_index=nil,array_size=arguments.length-0;0>array_size&&(array_size=0);var args=new Array(array_size);for($splat_index=0;array_size>$splat_index;$splat_index++)args[$splat_index]=arguments[$splat_index+0];TMP_2.$$p=null,$b=block["$nil?"](),($a=$b!==!1&&$b!==nil?!!Opal.compile:$b)===nil||$a.$$is_boolean&&1!=$a?$rb_gt(args.$size(),0)&&$scope.get("Kernel").$raise($scope.get("ArgumentError"),"wrong number of arguments ("+args.$size()+" for 0)"):((($a=$range(1,3,!1)["$cover?"](args.$size()))===nil||$a.$$is_boolean&&1!=$a)&&$scope.get("Kernel").$raise($scope.get("ArgumentError"),"wrong number of arguments (0 for 1..3)"),$a=Opal.to_a(args),string=null==$a[0]?nil:$a[0],file=null==$a[1]?nil:$a[1],_lineno=null==$a[2]?nil:$a[2],$a,compiled=$scope.get("Opal").$compile(string,$hash2(["file","eval"],{file:($a=file)!==!1&&$a!==nil?$a:"(eval)",eval:!0})),wrapper=function(){return eval(compiled)},block=($a=($b=$scope.get("Kernel")).$lambda,$a.$$p=(TMP_3=function(){var e=TMP_3.$$s||this;return wrapper.call(e)},TMP_3.$$s=self,TMP_3),$a).call($b));var old=block.$$s,result;if(block.$$s=null,self.$$is_class||self.$$is_module){self.$$eval=!0;try{result=block.call(self,self)}finally{self.$$eval=!1}}else result=block.call(self,self);return block.$$s=old,result}),Opal.defn(self,"$instance_exec",TMP_4=function(){var e=this,t=TMP_4.$$p,n=t||nil,r=nil,i=arguments.length-0;0>i&&(i=0);var o=new Array(i);for(r=0;i>r;r++)o[r]=arguments[r+0];TMP_4.$$p=null,n!==!1&&n!==nil||$scope.get("Kernel").$raise($scope.get("ArgumentError"),"no block given");var a,s=n.$$s;if(n.$$s=null,e.$$is_class||e.$$is_module){e.$$eval=!0;try{a=n.apply(e,o)}finally{e.$$eval=!1}}else a=n.apply(e,o);return n.$$s=s,a}),Opal.defn(self,"$singleton_method_added",function(){return nil}),Opal.defn(self,"$singleton_method_removed",function(){return nil}),Opal.defn(self,"$singleton_method_undefined",function(){return nil}),Opal.defn(self,"$method_missing",TMP_5=function(e){var t,n=this,r=(TMP_5.$$p,nil),i=arguments.length-1;0>i&&(i=0);var o=new Array(i);for(r=0;i>r;r++)o[r]=arguments[r+1];return TMP_5.$$p=null,$scope.get("Kernel").$raise($scope.get("NoMethodError").$new(function(){return(t=n.$inspect&&!n.$inspect.$$stub)===nil||t.$$is_boolean&&1!=t?"undefined method `"+e+"' for "+n.$$class:"undefined method `"+e+"' for "+n.$inspect()+":"+n.$$class}(),e))}),nil&&"method_missing"}($scope.base,null)},Opal.modules["corelib/kernel"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),i=e.nil,o=e.breaker,a=(e.slice,e.module),s=e.gvars,l=e.hash2,$=e.klass;return e.add_stubs(["$raise","$new","$inspect","$!","$=~","$==","$object_id","$class","$coerce_to?","$<<","$allocate","$copy_instance_variables","$copy_singleton_methods","$initialize_clone","$initialize_copy","$define_method","$to_proc","$singleton_class","$initialize_dup","$for","$loop","$pop","$call","$append_features","$extended","$length","$respond_to?","$[]","$nil?","$to_a","$to_int","$fetch","$Integer","$Float","$to_ary","$to_str","$coerce_to","$to_s","$__id__","$instance_variable_name!","$coerce_to!","$===","$>","$print","$format","$puts","$each","$<=","$empty?","$exception","$kind_of?","$respond_to_missing?","$try_convert!","$expand_path","$join","$start_with?","$sym","$arg","$include"]),function(r){var $,u,c,f,d,p,h,g,v,m,_=$=a(r,"Kernel"),y=(_.$$proto,_.$$scope);e.defn(_,"$method_missing",u=function(e){var t=this,n=(u.$$p,i),r=arguments.length-1;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+1];return u.$$p=null,t.$raise(y.get("NoMethodError").$new("undefined method `"+e+"' for "+t.$inspect(),e,o))}),e.defn(_,"$=~",function(e){return!1}),e.defn(_,"$!~",function(e){var t=this;return t["$=~"](e)["$!"]()}),e.defn(_,"$===",function(e){var t,n=this;return(t=n.$object_id()["$=="](e.$object_id()))!==!1&&t!==i?t:n["$=="](e)}),e.defn(_,"$<=>",function(e){var t=this;t.$$comparable=!0;var n=t["$=="](e);return n&&n!==i?0:i}),e.defn(_,"$method",function(e){var t=this,n=t["$"+e];return(!n||n.$$stub)&&t.$raise(y.get("NameError").$new("undefined method `"+e+"' for class `"+t.$class()+"'",e)),y.get("Method").$new(t,n,e)}),e.defn(_,"$methods",function(t){var n=this;null==t&&(t=!0);var r=[];for(var o in n)if("$"==o[0]&&"function"==typeof n[o]){if((0==t||t===i)&&!e.hasOwnProperty.call(n,o))continue;void 0===n[o].$$stub&&r.push(o.substr(1))}return r}),e.alias(_,"public_methods","methods"),e.defn(_,"$Array",function(e){var t;return e===i?[]:e.$$is_array?e:(t=y.get("Opal")["$coerce_to?"](e,y.get("Array"),"to_ary"),t!==i?t:(t=y.get("Opal")["$coerce_to?"](e,y.get("Array"),"to_a"),t!==i?t:[e]))}),e.defn(_,"$at_exit",c=function(){var e,t=c.$$p,n=t||i;return null==s.__at_exit__&&(s.__at_exit__=i),c.$$p=null,(e=s.__at_exit__)!==!1&&e!==i?e:s.__at_exit__=[],s.__at_exit__["$<<"](n)}),e.defn(_,"$caller",function(){return[]}),e.defn(_,"$class",function(){var e=this;return e.$$class}),e.defn(_,"$copy_instance_variables",function(e){var t=this;for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&(t[n]=e[n])}),e.defn(_,"$copy_singleton_methods",function(t){var n,r=this;if(t.hasOwnProperty("$$meta")){var i=e.get_singleton_class(t).$$proto,o=e.get_singleton_class(r).$$proto;for(n in i)"$"===n.charAt(0)&&i.hasOwnProperty(n)&&(o[n]=i[n])}for(n in t)"$"===n.charAt(0)&&"$"!==n.charAt(1)&&t.hasOwnProperty(n)&&(r[n]=t[n])}),e.defn(_,"$clone",function(){var e=this,t=i;return t=e.$class().$allocate(),t.$copy_instance_variables(e),t.$copy_singleton_methods(e),t.$initialize_clone(e),t}),e.defn(_,"$initialize_clone",function(e){var t=this;return t.$initialize_copy(e)}),e.defn(_,"$define_singleton_method",f=function(e,t){var n,r,o=this,a=f.$$p,s=a||i;return f.$$p=null,(n=(r=o.$singleton_class()).$define_method,n.$$p=s.$to_proc(),n).call(r,e,t)}),e.defn(_,"$dup",function(){var e=this,t=i;return t=e.$class().$allocate(),t.$copy_instance_variables(e),t.$initialize_dup(e),t}),e.defn(_,"$initialize_dup",function(e){var t=this;return t.$initialize_copy(e)}),e.defn(_,"$enum_for",d=function(t){var n,r,o=this,a=d.$$p,s=a||i,l=i,$=arguments.length-1;0>$&&($=0);var u=new Array($);for(l=0;$>l;l++)u[l]=arguments[l+1];return null==t&&(t="each"),d.$$p=null,(n=(r=y.get("Enumerator")).$for,n.$$p=s.$to_proc(),n).apply(r,[o,t].concat(e.to_a(u)))}),e.alias(_,"to_enum","enum_for"),e.defn(_,"$equal?",function(e){var t=this;return t===e}),e.defn(_,"$exit",function(t){var n,r,a,l=this;return null==s.__at_exit__&&(s.__at_exit__=i),null==t&&(t=!0),(n=s.__at_exit__)!==!1&&n!==i?n:s.__at_exit__=[],(n=(r=l).$loop,n.$$p=(a=function(){var e=(a.$$s||this,i);return null==s.__at_exit__&&(s.__at_exit__=i),e=s.__at_exit__.$pop(),e!==!1&&e!==i?e.$call():(o.$v=i,o)},a.$$s=l,a),n).call(r),(n=t===!0)===i||n.$$is_boolean&&1!=n||(t=0),e.exit(t),i}),e.defn(_,"$extend",function(){var e=this,t=i,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var o=e.$singleton_class(),a=r.length-1;a>=0;a--){var s=r[a];s.$$is_module||e.$raise(y.get("TypeError"),"wrong argument type "+s.$class()+" (expected Module)"),s.$append_features(o),s.$extended(e)}return e}),e.defn(_,"$format",function(e){function t(){T&U&&d.$raise(y.get("ArgumentError"),"flag after width"),T&K&&d.$raise(y.get("ArgumentError"),"flag after precision")}function n(){T&U&&d.$raise(y.get("ArgumentError"),"width given twice"),T&K&&d.$raise(y.get("ArgumentError"),"width after precision")}function r(e){return e>=v.length&&d.$raise(y.get("ArgumentError"),"too few arguments"),v[e]}function o(){switch(D){case-1:d.$raise(y.get("ArgumentError"),"unnumbered("+R+") mixed with numbered");case-2:d.$raise(y.get("ArgumentError"),"unnumbered("+R+") mixed with named")}return D=R++,r(D-1)}function a(e){return D>0&&d.$raise(y.get("ArgumentError"),"numbered("+e+") after unnumbered("+D+")"),-2===D&&d.$raise(y.get("ArgumentError"),"numbered("+e+") after named"),1>e&&d.$raise(y.get("ArgumentError"),"invalid index - "+e+"$"),D=-1,r(e-1)}function l(){return void 0===I?o():I}function $(t){for(var n,r="";;_++){if(_===j&&d.$raise(y.get("ArgumentError"),"malformed format string - %*[0-9]"),e.charCodeAt(_)<48||e.charCodeAt(_)>57)return _--,n=parseInt(r,10)||0,n>2147483647&&d.$raise(y.get("ArgumentError"),""+t+" too big"),n;r+=e.charAt(_)}}function u(t){var n,r=$(t);return"$"===e.charAt(_+1)?(_++,n=a(r)):n=o(),n.$to_int()}var c,f,d=this,p=i,h=i;null==s.DEBUG&&(s.DEBUG=i);var g=arguments.length-1;0>g&&(g=0);var v=new Array(g);for(h=0;g>h;h++)v[h]=arguments[h+1];(c=(f=v.$length()["$=="](1))?v["$[]"](0)["$respond_to?"]("to_ary"):v.$length()["$=="](1))===i||c.$$is_boolean&&1!=c||(p=y.get("Opal")["$coerce_to?"](v["$[]"](0),y.get("Array"),"to_ary"),((c=p["$nil?"]())===i||c.$$is_boolean&&1!=c)&&(v=p.$to_a()));var m,_,b,w,x,k,E,A,O,C,S,M,N,L,I,T,z="",q=0,j=e.length,R=1,D=0,P=0,F=1,H=2,W=4,B=8,V=16,U=32,G=64,K=128;for(_=e.indexOf("%");-1!==_;_=e.indexOf("%",_)){switch(w=void 0,T=P,k=-1,E=-1,I=void 0,m=_,_++,e.charAt(_)){case"%":q=_;case"":case"\n":case"\x00":_++;continue}e:for(;j>_;_++)switch(e.charAt(_)){case" ":t(),T|=V;continue e;case"#":t(),T|=F;continue e;case"+":t(),T|=W;continue e;case"-":t(),T|=H;continue e;case"0":t(),T|=B;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(A=$("width"),"$"===e.charAt(_+1)){if(_+2===j){w="%",_++;break e}void 0!==I&&d.$raise(y.get("ArgumentError"),"value given twice - %"+A+"$"),I=a(A),_++}else n(),T|=U,k=A;continue e;case"<":case"{":for(C="<"===e.charAt(_)?">":"}",O="",_++;;_++){if(_===j&&d.$raise(y.get("ArgumentError"),"malformed name - unmatched parenthesis"),e.charAt(_)===C){if(D>0&&d.$raise(y.get("ArgumentError"),"named "+O+" after unnumbered("+D+")"),-1===D&&d.$raise(y.get("ArgumentError"),"named "+O+" after numbered"),D=-2,void 0!==v[0]&&v[0].$$is_hash||d.$raise(y.get("ArgumentError"),"one hash required"),I=v[0].$fetch(O),">"===C)continue e;if(w=I.toString(),-1!==E&&(w=w.slice(0,E)),T&H)for(;w.length<k;)w+=" ";else for(;w.length<k;)w=" "+w;break e}O+=e.charAt(_)}case"*":_++,n(),T|=U,k=u("width"),0>k&&(T|=H,k=-k);continue e;case".":if(T&K&&d.$raise(y.get("ArgumentError"),"precision given twice"),T|=G|K,E=0,_++,"*"===e.charAt(_)){_++,E=u("precision"),0>E&&(T&=~G);continue e}E=$("precision");continue e;case"d":case"i":case"u":if(b=d.$Integer(l()),b>=0){for(w=b.toString();w.length<E;)w="0"+w;if(T&H)for((T&W||T&V)&&(w=(T&W?"+":" ")+w);w.length<k;)w+=" ";else if(T&B&&-1===E){for(;w.length<k-(T&W||T&V?1:0);)w="0"+w;(T&W||T&V)&&(w=(T&W?"+":" ")+w)}else for((T&W||T&V)&&(w=(T&W?"+":" ")+w);w.length<k;)w=" "+w}else{for(w=(-b).toString();w.length<E;)w="0"+w;if(T&H)for(w="-"+w;w.length<k;)w+=" ";else if(T&B&&-1===E){for(;w.length<k-1;)w="0"+w;w="-"+w}else for(w="-"+w;w.length<k;)w=" "+w}break e;case"b":case"B":case"o":case"x":case"X":switch(e.charAt(_)){case"b":case"B":S=2,M="0b",N=/^1+/,L="1";break;case"o":S=8,M="0",N=/^3?7+/,L="7";break;case"x":case"X":S=16,M="0x",N=/^f+/,L="f"}if(b=d.$Integer(l()),b>=0){for(w=b.toString(S);w.length<E;)w="0"+w;if(T&H)for((T&W||T&V)&&(w=(T&W?"+":" ")+w),T&F&&0!==b&&(w=M+w);w.length<k;)w+=" ";else if(T&B&&-1===E){for(;w.length<k-(T&W||T&V?1:0)-(T&F&&0!==b?M.length:0);)w="0"+w;T&F&&0!==b&&(w=M+w),(T&W||T&V)&&(w=(T&W?"+":" ")+w)}else for(T&F&&0!==b&&(w=M+w),(T&W||T&V)&&(w=(T&W?"+":" ")+w);w.length<k;)w=" "+w}else if(T&W||T&V){for(w=(-b).toString(S);w.length<E;)w="0"+w;if(T&H)for(T&F&&(w=M+w),w="-"+w;w.length<k;)w+=" ";else if(T&B&&-1===E){for(;w.length<k-1-(T&F?2:0);)w="0"+w;T&F&&(w=M+w),w="-"+w}else for(T&F&&(w=M+w),w="-"+w;w.length<k;)w=" "+w}else{for(w=(b>>>0).toString(S).replace(N,L);w.length<E-2;)w=L+w;if(T&H)for(w=".."+w,T&F&&(w=M+w);w.length<k;)w+=" ";else if(T&B&&-1===E){for(;w.length<k-2-(T&F?M.length:0);)w=L+w;w=".."+w,T&F&&(w=M+w)}else for(w=".."+w,T&F&&(w=M+w);w.length<k;)w=" "+w}e.charAt(_)===e.charAt(_).toUpperCase()&&(w=w.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(b=d.$Float(l()),b>=0||isNaN(b)){if(b===1/0)w="Inf";else switch(e.charAt(_)){case"f":w=b.toFixed(-1===E?6:E);break;case"e":case"E":w=b.toExponential(-1===E?6:E);break;case"g":case"G":w=b.toExponential(),x=parseInt(w.split("e")[1],10),-4>x||x>=(-1===E?6:E)||(w=b.toPrecision(-1===E?T&F?6:void 0:E))}if(T&H)for((T&W||T&V)&&(w=(T&W?"+":" ")+w);w.length<k;)w+=" ";else if(T&B&&b!==1/0&&!isNaN(b)){for(;w.length<k-(T&W||T&V?1:0);)w="0"+w;(T&W||T&V)&&(w=(T&W?"+":" ")+w)}else for((T&W||T&V)&&(w=(T&W?"+":" ")+w);w.length<k;)w=" "+w}else{if(b===-(1/0))w="Inf";else switch(e.charAt(_)){case"f":w=(-b).toFixed(-1===E?6:E);break;case"e":case"E":w=(-b).toExponential(-1===E?6:E);break;case"g":case"G":w=(-b).toExponential(),x=parseInt(w.split("e")[1],10),-4>x||x>=(-1===E?6:E)||(w=(-b).toPrecision(-1===E?T&F?6:void 0:E))}if(T&H)for(w="-"+w;w.length<k;)w+=" ";else if(T&B&&b!==-(1/0)){for(;w.length<k-1;)w="0"+w;w="-"+w}else for(w="-"+w;w.length<k;)w=" "+w}e.charAt(_)!==e.charAt(_).toUpperCase()||b===1/0||b===-(1/0)||isNaN(b)||(w=w.toUpperCase()),w=w.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":d.$raise(y.get("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(b=l(),b["$respond_to?"]("to_ary")&&(b=b.$to_ary()[0]),w=b["$respond_to?"]("to_str")?b.$to_str():String.fromCharCode(y.get("Opal").$coerce_to(b,y.get("Integer"),"to_int")),1!==w.length&&d.$raise(y.get("ArgumentError"),"%c requires a character"),T&H)for(;w.length<k;)w+=" ";else for(;w.length<k;)w=" "+w;break e;case"p":if(w=l().$inspect(),-1!==E&&(w=w.slice(0,E)),T&H)for(;w.length<k;)w+=" ";else for(;w.length<k;)w=" "+w;break e;case"s":if(w=l().$to_s(),-1!==E&&(w=w.slice(0,E)),T&H)for(;w.length<k;)w+=" ";else for(;w.length<k;)w=" "+w;break e;default:d.$raise(y.get("ArgumentError"),"malformed format string - %"+e.charAt(_))}void 0===w&&d.$raise(y.get("ArgumentError"),"malformed format string - %"),z+=e.slice(q,m)+w,q=_+1}return s.DEBUG&&D>=0&&R<v.length&&d.$raise(y.get("ArgumentError"),"too many arguments for format string"),z+e.slice(q)}),e.defn(_,"$hash",function(){var e=this;return e.$__id__()}),e.defn(_,"$initialize_copy",function(e){return i}),e.defn(_,"$inspect",function(){var e=this;return e.$to_s()}),e.defn(_,"$instance_of?",function(e){var t=this;return e.$$is_class||e.$$is_module||t.$raise(y.get("TypeError"),"class or module required"),t.$$class===e}),e.defn(_,"$instance_variable_defined?",function(t){var n=this;return t=y.get("Opal")["$instance_variable_name!"](t),e.hasOwnProperty.call(n,t.substr(1))}),e.defn(_,"$instance_variable_get",function(t){var n=this;t=y.get("Opal")["$instance_variable_name!"](t);var r=n[e.ivar(t.substr(1))];return null==r?i:r}),e.defn(_,"$instance_variable_set",function(t,n){var r=this;return t=y.get("Opal")["$instance_variable_name!"](t),r[e.ivar(t.substr(1))]=n}),e.defn(_,"$remove_instance_variable",function(t){var n=this;t=y.get("Opal")["$instance_variable_name!"](t);var r,i=e.ivar(t.substr(1));return n.hasOwnProperty(i)?(r=n[i],delete n[i],r):n.$raise(y.get("NameError"),"instance variable "+t+" not defined")}),e.defn(_,"$instance_variables",function(){var e,t=this,n=[];for(var r in t)t.hasOwnProperty(r)&&"$"!==r.charAt(0)&&(e="$"===r.substr(-1)?r.slice(0,r.length-1):r,n.push("@"+e));return n}),e.defn(_,"$Integer",function(e,t){var n,r,o,a=this;return e.$$is_string?(void 0===t?t=0:(t=y.get("Opal").$coerce_to(t,y.get("Integer"),"to_int"),(1===t||0>t||t>36)&&a.$raise(y.get("ArgumentError"),"invalid radix "+t)),r=e.toLowerCase(),r=r.replace(/(\d)_(?=\d)/g,"$1"),r=r.replace(/^(\s*[+-]?)(0[bodx]?)/,function(n,r,i){switch(i){case"0b":if(0===t||2===t)return t=2,r;case"0":case"0o":if(0===t||8===t)return t=8,r;case"0d":if(0===t||10===t)return t=10,r;case"0x":if(0===t||16===t)return t=16,r}a.$raise(y.get("ArgumentError"),'invalid value for Integer(): "'+e+'"')}),t=0===t?10:t,o="0-"+(10>=t?t-1:"9a-"+String.fromCharCode(97+(t-11))),new RegExp("^\\s*[+-]?["+o+"]+\\s*$").test(r)||a.$raise(y.get("ArgumentError"),'invalid value for Integer(): "'+e+'"'),
n=parseInt(r,t),isNaN(n)&&a.$raise(y.get("ArgumentError"),'invalid value for Integer(): "'+e+'"'),n):(void 0!==t&&a.$raise(y.get("ArgumentError"),"base specified for non string value"),e===i&&a.$raise(y.get("TypeError"),"can't convert nil into Integer"),e.$$is_number?((e===1/0||e===-(1/0)||isNaN(e))&&a.$raise(y.get("FloatDomainError"),e),Math.floor(e)):e["$respond_to?"]("to_int")&&(n=e.$to_int(),n!==i)?n:y.get("Opal")["$coerce_to!"](e,y.get("Integer"),"to_i"))}),e.defn(_,"$Float",function(e){var t,n=this;return e===i&&n.$raise(y.get("TypeError"),"can't convert nil into Float"),e.$$is_string?(t=e.toString(),t=t.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(t)?n.$Integer(t):(/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(t)||n.$raise(y.get("ArgumentError"),'invalid value for Float(): "'+e+'"'),parseFloat(t))):y.get("Opal")["$coerce_to!"](e,y.get("Float"),"to_f")}),e.defn(_,"$Hash",function(e){var t,n;return(t=(n=e["$nil?"]())!==!1&&n!==i?n:e["$=="]([]))===i||t.$$is_boolean&&1!=t?(t=y.get("Hash")["$==="](e))===i||t.$$is_boolean&&1!=t?y.get("Opal")["$coerce_to!"](e,y.get("Hash"),"to_hash"):e:l([],{})}),e.defn(_,"$is_a?",function(t){var n=this;return t.$$is_class||t.$$is_module||n.$raise(y.get("TypeError"),"class or module required"),e.is_a(n,t)}),e.alias(_,"kind_of?","is_a?"),e.defn(_,"$lambda",p=function(){var e=p.$$p,t=e||i;return p.$$p=null,t.$$is_lambda=!0,t}),e.defn(_,"$load",function(t){return t=y.get("Opal")["$coerce_to!"](t,y.get("String"),"to_str"),e.load(t)}),e.defn(_,"$loop",h=function(){var e=this,t=h.$$p,n=t||i;for(h.$$p=null;;)if(n()===o)return o.$v;return e}),e.defn(_,"$nil?",function(){return!1}),e.alias(_,"object_id","__id__"),e.defn(_,"$printf",function(){var n,r=this,o=i,a=arguments.length-0;0>a&&(a=0);var s=new Array(a);for(o=0;a>o;o++)s[o]=arguments[o+0];return t(s.$length(),0)&&r.$print((n=r).$format.apply(n,e.to_a(s))),i}),e.defn(_,"$proc",g=function(){var e=this,t=g.$$p,n=t||i;return g.$$p=null,n!==!1&&n!==i||e.$raise(y.get("ArgumentError"),"tried to create Proc object without a block"),n.$$is_lambda=!1,n}),e.defn(_,"$puts",function(){var t,n=i;null==s.stdout&&(s.stdout=i);var r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];return(t=s.stdout).$puts.apply(t,e.to_a(o))}),e.defn(_,"$p",function(){var e,t,r,o=this,a=i,l=arguments.length-0;0>l&&(l=0);var $=new Array(l);for(a=0;l>a;a++)$[a]=arguments[a+0];return(e=(t=$).$each,e.$$p=(r=function(e){r.$$s||this;return null==s.stdout&&(s.stdout=i),null==e&&(e=i),s.stdout.$puts(e.$inspect())},r.$$s=o,r),e).call(t),n($.$length(),1)?$["$[]"](0):$}),e.defn(_,"$print",function(){var t,n=i;null==s.stdout&&(s.stdout=i);var r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];return(t=s.stdout).$print.apply(t,e.to_a(o))}),e.defn(_,"$warn",function(){var t,n,r=i;null==s.VERBOSE&&(s.VERBOSE=i),null==s.stderr&&(s.stderr=i);var o=arguments.length-0;0>o&&(o=0);var a=new Array(o);for(r=0;o>r;r++)a[r]=arguments[r+0];return(t=(n=s.VERBOSE["$nil?"]())!==!1&&n!==i?n:a["$empty?"]())===i||t.$$is_boolean&&1!=t?(t=s.stderr).$puts.apply(t,e.to_a(a)):i}),e.defn(_,"$raise",function(t,n,r){if(null==s["!"]&&(s["!"]=i),null==n&&(n=i),null==r&&(r=i),null==t&&s["!"]!==i)throw s["!"];throw null==t?t=y.get("RuntimeError").$new():t.$$is_string?t=y.get("RuntimeError").$new(t):t.$$is_class&&t["$respond_to?"]("exception")?t=t.$exception(n):t["$kind_of?"](y.get("Exception"))||(t=y.get("TypeError").$new("exception class/object expected")),s["!"]!==i&&e.exceptions.push(s["!"]),s["!"]=t,t}),e.alias(_,"fail","raise"),e.defn(_,"$rand",function(e){var t=this;if(void 0===e)return Math.random();if(e.$$is_range){var n=e.begin,r=e.end-n;return e.exclude||r++,t.$rand(r)+n}return Math.floor(Math.random()*Math.abs(y.get("Opal").$coerce_to(e,y.get("Integer"),"to_int")))}),e.defn(_,"$respond_to?",function(e,t){var n,r=this;if(null==t&&(t=!1),(n=r["$respond_to_missing?"](e,t))!==i&&(!n.$$is_boolean||1==n))return!0;var o=r["$"+e];return"function"!=typeof o||o.$$stub?!1:!0}),e.defn(_,"$respond_to_missing?",function(e,t){return null==t&&(t=!1),!1}),e.defn(_,"$require",function(t){return t=y.get("Opal")["$coerce_to!"](t,y.get("String"),"to_str"),e.require(t)}),e.defn(_,"$require_relative",function(t){return y.get("Opal")["$try_convert!"](t,y.get("String"),"to_str"),t=y.get("File").$expand_path(y.get("File").$join(e.current_file,"..",t)),e.require(t)}),e.defn(_,"$require_tree",function(t){t=y.get("File").$expand_path(t),t["$=="](".")&&(t="");for(var n in e.modules)n["$start_with?"](t)&&e.require(n);return i}),e.alias(_,"send","__send__"),e.alias(_,"public_send","__send__"),e.defn(_,"$singleton_class",function(){var t=this;return e.get_singleton_class(t)}),e.defn(_,"$sleep",function(e){var t=this;null==e&&(e=i),e===i&&t.$raise(y.get("TypeError"),"can't convert NilClass into time interval"),e.$$is_number||t.$raise(y.get("TypeError"),"can't convert "+e.$class()+" into time interval"),0>e&&t.$raise(y.get("ArgumentError"),"time interval must be positive");for(var n=new Date;new Date-n<=1e3*e;);return e}),e.alias(_,"sprintf","format"),e.alias(_,"srand","rand"),e.defn(_,"$String",function(e){var t;return(t=y.get("Opal")["$coerce_to?"](e,y.get("String"),"to_str"))!==!1&&t!==i?t:y.get("Opal")["$coerce_to!"](e,y.get("String"),"to_s")}),e.defn(_,"$tap",v=function(){var t=this,n=v.$$p,r=n||i;return v.$$p=null,e.yield1(r,t)===o?o.$v:t}),e.defn(_,"$to_proc",function(){var e=this;return e}),e.defn(_,"$to_s",function(){var e=this;return"#<"+e.$class()+":0x"+e.$__id__().$to_s(16)+">"}),e.defn(_,"$catch",m=function(t){var n,r=this,a=m.$$p,s=a||i,l=i;m.$$p=null;try{return n=e.yieldX(s,[]),n===o?n:n}catch($){if(!e.rescue($,[y.get("UncaughtThrowError")]))throw $;l=$;try{return l.$sym()["$=="](t)?l.$arg():r.$raise()}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(_,"$throw",function(){var e=this,t=i,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.$raise(y.get("UncaughtThrowError").$new(r))})}(r.base),function(e,$super){function t(){}var n=t=$(e,$super,"Object",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("Kernel"))}(r.base,null)},Opal.modules["corelib/error"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,i=(e.breaker,e.slice,e.klass),o=e.module;return e.add_stubs(["$new","$clone","$to_s","$empty?","$class","$attr_reader","$[]","$>","$length","$inspect"]),function(t,$super){function n(){}var o=n=i(t,$super,"Exception",n),a=o.$$proto;o.$$scope;return a.message=r,e.defs(o,"$new",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var i=new Array(n);for(t=0;n>t;t++)i[t]=arguments[t+0];var o=i.length>0?i[0]:r,a=new e.$$alloc(o);return Error.captureStackTrace&&Error.captureStackTrace(a),a.name=e.$$name,a.$initialize.apply(a,i),a}),e.defs(o,"$exception",function(){var t,n=this,i=r,o=arguments.length-0;0>o&&(o=0);var a=new Array(o);for(i=0;o>i;i++)a[i]=arguments[i+0];return(t=n).$new.apply(t,e.to_a(a))}),e.defn(o,"$initialize",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var i=new Array(n);for(t=0;n>t;t++)i[t]=arguments[t+0];return e.message=i.length>0?i[0]:r}),e.defn(o,"$backtrace",function(){var e=this,t=e.stack;return"string"==typeof t?t.split("\n").slice(0,15):t?t.slice(0,15):[]}),e.defn(o,"$exception",function(e){var t=this;if(null==e&&(e=r),e===r||t===e)return t;var n=t.$clone();return n.message=e,n}),e.defn(o,"$message",function(){var e=this;return e.$to_s()}),e.defn(o,"$inspect",function(){var e,t=this,n=r;return n=t.$to_s(),(e=n["$empty?"]())===r||e.$$is_boolean&&1!=e?"#<"+t.$class().$to_s()+": "+t.$to_s()+">":t.$class().$to_s()}),e.defn(o,"$to_s",function(){var e,t,n=this;return t=n.message,(e=t!==!1&&t!==r?n.message.$to_s():t)!==!1&&e!==r?e:n.$class().$to_s()}),r&&"to_s"}(n.base,Error),function(e,$super){function t(){}var n=t=i(e,$super,"ScriptError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=i(e,$super,"SyntaxError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("ScriptError")),function(e,$super){function t(){}var n=t=i(e,$super,"LoadError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("ScriptError")),function(e,$super){function t(){}var n=t=i(e,$super,"NotImplementedError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("ScriptError")),function(e,$super){function t(){}var n=t=i(e,$super,"SystemExit",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=i(e,$super,"NoMemoryError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=i(e,$super,"SignalException",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=i(e,$super,"Interrupt",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=i(e,$super,"SecurityError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=i(e,$super,"StandardError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=i(e,$super,"ZeroDivisionError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=i(e,$super,"NameError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=i(e,$super,"NoMethodError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("NameError")),function(e,$super){function t(){}var n=t=i(e,$super,"RuntimeError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=i(e,$super,"LocalJumpError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=i(e,$super,"TypeError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=i(e,$super,"ArgumentError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=i(e,$super,"IndexError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=i(e,$super,"StopIteration",t);n.$$proto,n.$$scope;return r}(n.base,n.get("IndexError")),function(e,$super){function t(){}var n=t=i(e,$super,"KeyError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("IndexError")),function(e,$super){function t(){}var n=t=i(e,$super,"RangeError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=i(e,$super,"FloatDomainError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("RangeError")),function(e,$super){function t(){}var n=t=i(e,$super,"IOError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=i(e,$super,"SystemCallError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(t){var n,a=n=o(t,"Errno"),s=(a.$$proto,a.$$scope);!function(t,$super){function n(){}var o,a=n=i(t,$super,"EINVAL",n);a.$$proto,a.$$scope;return e.defs(a,"$new",o=function(){var t=this;o.$$p;return o.$$p=null,e.find_super_dispatcher(t,"new",o,null,n).apply(t,["Invalid argument"])}),r&&"new"}(s.base,s.get("SystemCallError"))}(n.base),function(n,$super){function o(){}var a,s=o=i(n,$super,"UncaughtThrowError",o),l=s.$$proto;s.$$scope;return l.sym=r,s.$attr_reader("sym","arg"),e.defn(s,"$initialize",a=function(n){var r=this;a.$$p;return a.$$p=null,r.sym=n["$[]"](0),t(n.$length(),1)&&(r.arg=n["$[]"](1)),e.find_super_dispatcher(r,"initialize",a,null).apply(r,["uncaught throw "+r.sym.$inspect()])}),r&&"initialize"}(n.base,n.get("ArgumentError")),function(t,$super){function n(){}var o,a=n=i(t,$super,"NameError",n);a.$$proto,a.$$scope;return a.$attr_reader("name"),e.defn(a,"$initialize",o=function(t,n){var i=this;o.$$p;return null==n&&(n=r),o.$$p=null,e.find_super_dispatcher(i,"initialize",o,null).apply(i,[t]),i.name=n}),r&&"initialize"}(n.base,null),function(t,$super){function n(){}var o,a=n=i(t,$super,"NoMethodError",n);a.$$proto,a.$$scope;return a.$attr_reader("args"),e.defn(a,"$initialize",o=function(t,n,r){var i=this;o.$$p;return null==r&&(r=[]),o.$$p=null,e.find_super_dispatcher(i,"initialize",o,null).apply(i,[t,n]),i.args=r}),r&&"initialize"}(n.base,null)},Opal.modules["corelib/constants"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e);e.nil,e.breaker,e.slice;return e.cdecl(t,"RUBY_PLATFORM","opal"),e.cdecl(t,"RUBY_ENGINE","opal"),e.cdecl(t,"RUBY_VERSION","2.2.3"),e.cdecl(t,"RUBY_ENGINE_VERSION","0.9.0"),e.cdecl(t,"RUBY_RELEASE_DATE","2015-12-20"),e.cdecl(t,"RUBY_PATCHLEVEL",0),e.cdecl(t,"RUBY_REVISION",0),e.cdecl(t,"RUBY_COPYRIGHT","opal - Copyright (C) 2013-2015 Adam Beynon"),e.cdecl(t,"RUBY_DESCRIPTION","opal "+t.get("RUBY_ENGINE_VERSION")+" ("+t.get("RUBY_RELEASE_DATE")+" revision "+t.get("RUBY_REVISION")+")")},Opal.modules["opal/base"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("corelib/runtime"),t.$require("corelib/helpers"),t.$require("corelib/module"),t.$require("corelib/class"),t.$require("corelib/basic_object"),t.$require("corelib/kernel"),t.$require("corelib/error"),t.$require("corelib/constants")},Opal.modules["corelib/nil"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,i=(e.breaker,e.slice,e.klass);return e.add_stubs(["$raise","$class","$new","$>","$length","$Rational"]),function(n,$super){function o(){}var a=o=i(n,$super,"NilClass",o),s=a.$$proto,l=a.$$scope;return s.$$meta=a,e.defn(a,"$!",function(){return!0}),e.defn(a,"$&",function(e){return!1}),e.defn(a,"$|",function(e){return e!==!1&&e!==r}),e.defn(a,"$^",function(e){return e!==!1&&e!==r}),e.defn(a,"$==",function(e){return e===r}),e.defn(a,"$dup",function(){var e=this;return e.$raise(l.get("TypeError"),"can't dup "+e.$class())}),e.defn(a,"$clone",function(){var e=this;return e.$raise(l.get("TypeError"),"can't clone "+e.$class())}),e.defn(a,"$inspect",function(){return"nil"}),e.defn(a,"$nil?",function(){return!0}),e.defn(a,"$singleton_class",function(){return l.get("NilClass")}),e.defn(a,"$to_a",function(){return[]}),e.defn(a,"$to_h",function(){return e.hash()}),e.defn(a,"$to_i",function(){return 0}),e.alias(a,"to_f","to_i"),e.defn(a,"$to_s",function(){return""}),e.defn(a,"$to_c",function(){return l.get("Complex").$new(0,0)}),e.defn(a,"$rationalize",function(){var e=this,n=r,i=arguments.length-0;0>i&&(i=0);var o=new Array(i);for(n=0;i>n;n++)o[n]=arguments[n+0];return t(o.$length(),1)&&e.$raise(l.get("ArgumentError")),e.$Rational(0,1)}),e.defn(a,"$to_r",function(){var e=this;return e.$Rational(0,1)}),e.defn(a,"$instance_variables",function(){return[]}),r&&"instance_variables"}(n.base,null),e.cdecl(n,"NIL",r)},Opal.modules["corelib/boolean"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$raise","$class"]),function(t,$super){function i(){}var o=i=r(t,$super,"Boolean",i),a=o.$$proto,s=o.$$scope;return a.$$is_boolean=!0,a.$$meta=o,e.defn(o,"$__id__",function(){var e=this;return e.valueOf()?2:0}),e.alias(o,"object_id","__id__"),e.defn(o,"$!",function(){var e=this;return 1!=e}),e.defn(o,"$&",function(e){var t=this;return 1==t?e!==!1&&e!==n:!1}),e.defn(o,"$|",function(e){var t=this;return 1==t?!0:e!==!1&&e!==n}),e.defn(o,"$^",function(e){var t=this;return 1==t?e===!1||e===n:e!==!1&&e!==n}),e.defn(o,"$==",function(e){var t=this;return 1==t===e.valueOf()}),e.alias(o,"equal?","=="),e.alias(o,"eql?","=="),e.defn(o,"$singleton_class",function(){return s.get("Boolean")}),e.defn(o,"$to_s",function(){var e=this;return 1==e?"true":"false"}),e.defn(o,"$dup",function(){var e=this;return e.$raise(s.get("TypeError"),"can't dup "+e.$class())}),e.defn(o,"$clone",function(){var e=this;return e.$raise(s.get("TypeError"),"can't clone "+e.$class())}),n&&"clone"}(t.base,Boolean),e.cdecl(t,"TrueClass",t.get("Boolean")),e.cdecl(t,"FalseClass",t.get("Boolean")),e.cdecl(t,"TRUE",!0),e.cdecl(t,"FALSE",!1)},Opal.modules["corelib/comparable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),i=e.nil,o=(e.breaker,e.slice,e.module);return e.add_stubs(["$===","$>","$<","$equal?","$<=>","$normalize","$raise","$class"]),function(r){var a,s=a=o(r,"Comparable"),l=(s.$$proto,s.$$scope);e.defs(s,"$normalize",function(e){var r;return(r=l.get("Integer")["$==="](e))===i||r.$$is_boolean&&1!=r?t(e,0)?1:n(e,0)?-1:0:e}),e.defn(s,"$==",function(t){var n,r=this,o=i;try{return(n=r["$equal?"](t))===i||n.$$is_boolean&&1!=n?r["$<=>"]==e.Kernel["$<=>"]?!1:r.$$comparable?(delete r.$$comparable,!1):(n=o=r["$<=>"](t))===i||n.$$is_boolean&&1!=n?!1:0==l.get("Comparable").$normalize(o):!0}catch(a){if(!e.rescue(a,[l.get("StandardError")]))throw a;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(s,"$>",function(e){var t,n=this,r=i;return((t=r=n["$<=>"](e))===i||t.$$is_boolean&&1!=t)&&n.$raise(l.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),l.get("Comparable").$normalize(r)>0}),e.defn(s,"$>=",function(e){var t,n=this,r=i;return((t=r=n["$<=>"](e))===i||t.$$is_boolean&&1!=t)&&n.$raise(l.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),l.get("Comparable").$normalize(r)>=0}),e.defn(s,"$<",function(e){var t,n=this,r=i;return((t=r=n["$<=>"](e))===i||t.$$is_boolean&&1!=t)&&n.$raise(l.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),l.get("Comparable").$normalize(r)<0}),e.defn(s,"$<=",function(e){var t,n=this,r=i;return((t=r=n["$<=>"](e))===i||t.$$is_boolean&&1!=t)&&n.$raise(l.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),l.get("Comparable").$normalize(r)<=0}),e.defn(s,"$between?",function(e,r){var i=this;return n(i,e)?!1:t(i,r)?!1:!0})}(r.base)},Opal.modules["corelib/regexp"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass),i=e.gvars;return e.add_stubs(["$nil?","$[]","$raise","$escape","$options","$to_str","$new","$join","$coerce_to!","$!","$match","$coerce_to?","$begin","$coerce_to","$call","$=~","$attr_reader","$===","$inspect","$to_a"]),function(e,$super){function t(){}var i=t=r(e,$super,"RegexpError",t);i.$$proto,i.$$scope;return n}(t.base,t.get("StandardError")),function(t,$super){function o(){}var a,s=o=r(t,$super,"Regexp",o),l=s.$$proto,$=s.$$scope;return e.cdecl($,"IGNORECASE",1),e.cdecl($,"MULTILINE",4),l.$$is_regexp=!0,function(t){var r,o=t.$$scope;t.$$proto;return e.defn(t,"$allocate",r=function(){var t=this,i=r.$$p,o=n,a=n,s=n;for(r.$$p=null,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o=e.find_super_dispatcher(t,"allocate",r,i).apply(t,a),o.uninitialized=!0,o}),e.defn(t,"$escape",function(e){return e.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")}),e.defn(t,"$last_match",function(e){var t;return null==i["~"]&&(i["~"]=n),null==e&&(e=n),(t=e["$nil?"]())===n||t.$$is_boolean&&1!=t?i["~"]["$[]"](e):i["~"]}),e.alias(t,"quote","escape"),e.defn(t,"$union",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var i=new Array(r);for(t=0;r>t;t++)i[t]=arguments[t+0];var a,s,l,$,u;if(0==i.length)return/(?!)/;a=i[0].$$is_array,i.length>1&&a&&e.$raise(o.get("TypeError"),"no implicit conversion of Array into String"),a&&(i=i[0]),$=void 0,s=[];for(var c=0;c<i.length;c++)l=i[c],l.$$is_string?s.push(e.$escape(l)):l.$$is_regexp?(u=l.$options(),void 0!=$&&$!=u&&e.$raise(o.get("TypeError"),"All expressions must use the same options"),$=u,s.push("("+l.source+")")):s.push(e.$escape(l.$to_str()));return e.$new(s.$join("|"),$)}),e.defn(t,"$new",function(e,t){var n=this;if(e.$$is_regexp)return new RegExp(e);if(e=o.get("Opal")["$coerce_to!"](e,o.get("String"),"to_str"),"\\"===e.charAt(e.length-1)&&n.$raise(o.get("RegexpError"),"too short escape sequence: /"+e+"/"),void 0===t||t["$!"]())return new RegExp(e);if(t.$$is_number){var r="";o.get("IGNORECASE")&t&&(r+="i"),o.get("MULTILINE")&t&&(r+="m"),t=r}else t="i";return new RegExp(e,t)}),n&&"new"}(e.get_singleton_class(s)),e.defn(s,"$==",function(e){var t=this;return e.constructor==RegExp&&t.toString()===e.toString()}),e.defn(s,"$===",function(e){var t=this;return t.$match($.get("Opal")["$coerce_to?"](e,$.get("String"),"to_str"))!==n}),e.defn(s,"$=~",function(e){var t,r=this;return null==i["~"]&&(i["~"]=n),t=r.$match(e),t!==!1&&t!==n?i["~"].$begin(0):t}),e.alias(s,"eql?","=="),e.defn(s,"$inspect",function(){var e=this;return e.toString()}),e.defn(s,"$match",a=function(e,t){var r=this,o=a.$$p,s=o||n;if(null==i["~"]&&(i["~"]=n),a.$$p=null,r.uninitialized&&r.$raise($.get("TypeError"),"uninitialized Regexp"),t=void 0===t?0:$.get("Opal").$coerce_to(t,$.get("Integer"),"to_int"),e===n)return i["~"]=n;if(e=$.get("Opal").$coerce_to(e,$.get("String"),"to_str"),0>t&&(t+=e.length,0>t))return i["~"]=n;var l=r.source,u="g";r.multiline&&(l=l.replace(".","[\\s\\S]"),u+="m");for(var c,f=new RegExp(l,u+(r.ignoreCase?"i":""));;){if(c=f.exec(e),null===c)return i["~"]=n;if(c.index>=t)return i["~"]=$.get("MatchData").$new(f,c),s===n?i["~"]:s.$call(i["~"]);f.lastIndex=c.index+1}}),e.defn(s,"$~",function(){var e=this;return null==i._&&(i._=n),e["$=~"](i._)}),e.defn(s,"$source",function(){var e=this;return e.source}),e.defn(s,"$options",function(){var e=this;e.uninitialized&&e.$raise($.get("TypeError"),"uninitialized Regexp");var t=0;return e.multiline&&(t|=$.get("MULTILINE")),e.ignoreCase&&(t|=$.get("IGNORECASE")),t}),e.defn(s,"$casefold?",function(){var e=this;return e.ignoreCase}),e.alias(s,"to_s","source")}(t.base,RegExp),function(t,$super){function o(){}var a=o=r(t,$super,"MatchData",o),s=a.$$proto,l=a.$$scope;return s.matches=n,a.$attr_reader("post_match","pre_match","regexp","string"),e.defn(a,"$initialize",function(e,t){var r=this;i["~"]=r,r.regexp=e,r.begin=t.index,r.string=t.input,r.pre_match=t.input.slice(0,t.index),r.post_match=t.input.slice(t.index+t[0].length),r.matches=[];for(var o=0,a=t.length;a>o;o++){var s=t[o];null==s?r.matches.push(n):r.matches.push(s)}}),e.defn(a,"$[]",function(){var t,r=this,i=n,o=arguments.length-0;0>o&&(o=0);var a=new Array(o);for(i=0;o>i;i++)a[i]=arguments[i+0];return(t=r.matches)["$[]"].apply(t,e.to_a(a))}),e.defn(a,"$offset",function(e){var t=this;return 0!==e&&t.$raise(l.get("ArgumentError"),"MatchData#offset only supports 0th element"),[t.begin,t.begin+t.matches[e].length]}),e.defn(a,"$==",function(e){var t,r,i,o,a=this;return(t=l.get("MatchData")["$==="](e))===n||t.$$is_boolean&&1!=t?!1:(o=a.string==e.string,i=o!==!1&&o!==n?a.regexp.toString()==e.regexp.toString():o,r=i!==!1&&i!==n?a.pre_match==e.pre_match:i,t=r!==!1&&r!==n?a.post_match==e.post_match:r,t!==!1&&t!==n?a.begin==e.begin:t)}),e.alias(a,"eql?","=="),e.defn(a,"$begin",function(e){var t=this;return 0!==e&&t.$raise(l.get("ArgumentError"),"MatchData#begin only supports 0th element"),t.begin}),e.defn(a,"$end",function(e){var t=this;return 0!==e&&t.$raise(l.get("ArgumentError"),"MatchData#end only supports 0th element"),t.begin+t.matches[e].length}),e.defn(a,"$captures",function(){var e=this;return e.matches.slice(1)}),e.defn(a,"$inspect",function(){for(var e=this,t="#<MatchData "+e.matches[0].$inspect(),n=1,r=e.matches.length;r>n;n++)t+=" "+n+":"+e.matches[n].$inspect();return t+">"}),e.defn(a,"$length",function(){var e=this;return e.matches.length}),e.alias(a,"size","length"),e.defn(a,"$to_a",function(){var e=this;return e.matches}),e.defn(a,"$to_s",function(){var e=this;return e.matches[0]}),e.defn(a,"$values_at",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var i=new Array(r);for(t=0;r>t;t++)i[t]=arguments[t+0];var o,a,s,$=[];for(o=0;o<i.length;o++)i[o].$$is_range&&(a=i[o].$to_a(),a.unshift(o,1),Array.prototype.splice.apply(i,a)),s=l.get("Opal")["$coerce_to!"](i[o],l.get("Integer"),"to_int"),0>s&&(s+=e.matches.length,0>s)?$.push(n):$.push(e.matches[s]);return $}),n&&"values_at"}(t.base,null)},Opal.modules["corelib/string"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var r=e.top,i=e,o=e.nil,a=e.breaker,s=e.slice,l=e.klass,$=e.gvars;return e.add_stubs(["$require","$include","$coerce_to?","$coerce_to","$raise","$===","$format","$to_s","$respond_to?","$to_str","$<=>","$==","$=~","$new","$empty?","$ljust","$ceil","$/","$+","$rjust","$floor","$to_a","$each_char","$to_proc","$coerce_to!","$copy_singleton_methods","$initialize_clone","$initialize_dup","$enum_for","$size","$chomp","$[]","$to_i","$class","$each_line","$match","$captures","$proc","$shift","$__send__","$succ","$escape"]),r.$require("corelib/comparable"),r.$require("corelib/regexp"),function(r,$super){function i(){}function u(e){function t(e){var t,n,r,i,o,a,s="",l=e.length;for(t=0;l>t;t++)if(n=e.charAt(t),"-"===n&&t>0&&l-1>t&&!r){for(i=e.charCodeAt(t-1),o=e.charCodeAt(t+1),i>o&&y.$raise(w.get("ArgumentError"),'invalid range "'+i+"-"+o+'" in string transliteration'),a=i+1;o+1>a;a++)s+=String.fromCharCode(a);r=!0,t++}else r="\\"===n,s+=n;return s}function n(e,t){if(0===e.length)return t;var n,r,i="",o=e.length;for(n=0;o>n;n++)r=e.charAt(n),-1!==t.indexOf(r)&&(i+=r);return i}var r,i,o,a,s,l,$="",u="";for(r=0,i=e.length;i>r;r++)o=w.get("Opal").$coerce_to(e[r],w.get("String"),"to_str"),a="^"===o.charAt(0)&&o.length>1,o=t(a?o.slice(1):o),a?u=n(u,o):$=n($,o);if($.length>0&&u.length>0){for(l="",r=0,i=$.length;i>r;r++)s=$.charAt(r),-1===u.indexOf(s)&&(l+=s);$=l,u=""}return $.length>0?"["+w.get("Regexp").$escape($)+"]":u.length>0?"[^"+w.get("Regexp").$escape(u)+"]":null}var c,f,d,p,h,g,v,m,_,y=i=l(r,$super,"String",i),b=y.$$proto,w=y.$$scope;b.length=o,y.$include(w.get("Comparable")),b.$$is_string=!0,e.defn(y,"$__id__",function(){var e=this;return e.toString()}),e.alias(y,"object_id","__id__"),e.defs(y,"$try_convert",function(e){return w.get("Opal")["$coerce_to?"](e,w.get("String"),"to_str")}),e.defs(y,"$new",function(e){return null==e&&(e=""),e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str"),new String(e)}),e.defn(y,"$initialize",function(e){var t=this;return void 0===e?t:t.$raise(w.get("NotImplementedError"),"Mutable strings are not supported in Opal.")}),e.defn(y,"$%",function(t){var n,r=this;return(n=w.get("Array")["$==="](t))===o||n.$$is_boolean&&1!=n?r.$format(r,t):(n=r).$format.apply(n,[r].concat(e.to_a(t)))}),e.defn(y,"$*",function(e){var t=this;if(e=w.get("Opal").$coerce_to(e,w.get("Integer"),"to_int"),0>e&&t.$raise(w.get("ArgumentError"),"negative argument"),0===e)return"";var n="",r=t.toString();for(r.length*e>=1<<28&&t.$raise(w.get("RangeError"),"multiply count must not overflow maximum string size");1===(1&e)&&(n+=r),e>>>=1,0!==e;)r+=r;return n}),e.defn(y,"$+",function(e){var t=this;return e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str"),t+e.$to_s()}),e.defn(y,"$<=>",function(e){var t,n=this;if((t=e["$respond_to?"]("to_str"))===o||t.$$is_boolean&&1!=t){var r=e["$<=>"](n);return r===o?o:r>0?-1:0>r?1:0}return e=e.$to_str().$to_s(),n>e?1:e>n?-1:0}),e.defn(y,"$==",function(e){var t=this;return e.$$is_string?t.toString()===e.toString():w.get("Opal")["$respond_to?"](e,"to_str")?e["$=="](t):!1}),e.alias(y,"eql?","=="),e.alias(y,"===","=="),e.defn(y,"$=~",function(e){var t=this;return e.$$is_string&&t.$raise(w.get("TypeError"),"type mismatch: String given"),e["$=~"](t)}),e.defn(y,"$[]",function(e,t){var n,r=this,i=r.length;if(e.$$is_range)return n=e.exclude,t=w.get("Opal").$coerce_to(e.end,w.get("Integer"),"to_int"),e=w.get("Opal").$coerce_to(e.begin,w.get("Integer"),"to_int"),Math.abs(e)>i?o:(0>e&&(e+=i),0>t&&(t+=i),n||(t+=1),t-=e,0>t&&(t=0),r.substr(e,t));if(e.$$is_string)return null!=t&&r.$raise(w.get("TypeError")),-1!==r.indexOf(e)?e:o;if(e.$$is_regexp){var a=r.match(e);return null===a?($["~"]=o,o):($["~"]=w.get("MatchData").$new(e,a),null==t?a[0]:(t=w.get("Opal").$coerce_to(t,w.get("Integer"),"to_int"),0>t&&-t<a.length?a[t+=a.length]:t>=0&&t<a.length?a[t]:o))}return e=w.get("Opal").$coerce_to(e,w.get("Integer"),"to_int"),0>e&&(e+=i),null==t?e>=i||0>e?o:r.substr(e,1):(t=w.get("Opal").$coerce_to(t,w.get("Integer"),"to_int"),0>t?o:e>i||0>e?o:r.substr(e,t))}),e.alias(y,"byteslice","[]"),e.defn(y,"$capitalize",function(){var e=this;return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),e.defn(y,"$casecmp",function(e){var t=this;e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str").$to_s();var n=/^[\x00-\x7F]*$/;return n.test(t)&&n.test(e)&&(t=t.toLowerCase(),e=e.toLowerCase()),t["$<=>"](e)}),e.defn(y,"$center",function(e,r){var i,a=this;if(null==r&&(r=" "),e=w.get("Opal").$coerce_to(e,w.get("Integer"),"to_int"),r=w.get("Opal").$coerce_to(r,w.get("String"),"to_str").$to_s(),(i=r["$empty?"]())===o||i.$$is_boolean&&1!=i||a.$raise(w.get("ArgumentError"),"zero width padding"),(i=e<=a.length)!==o&&(!i.$$is_boolean||1==i))return a;var s=a.$ljust(t(n(e,a.length),2).$ceil(),r),l=a.$rjust(t(n(e,a.length),2).$floor(),r);return l+s.slice(a.length)}),e.defn(y,"$chars",c=function(){var e,t,n=this,r=c.$$p,i=r||o;return c.$$p=null,i===!1||i===o?n.$each_char().$to_a():(e=(t=n).$each_char,e.$$p=i.$to_proc(),e).call(t)}),e.defn(y,"$chomp",function(e){var t,n=this;if(null==$["/"]&&($["/"]=o),null==e&&(e=$["/"]),(t=e===o||0===n.length)!==o&&(!t.$$is_boolean||1==t))return n;if(e=w.get("Opal")["$coerce_to!"](e,w.get("String"),"to_str").$to_s(),"\n"===e)return n.replace(/\r?\n?$/,"");if(""===e)return n.replace(/(\r?\n)+$/,"");if(n.length>e.length){var r=n.substr(n.length-e.length,e.length);if(r===e)return n.substr(0,n.length-e.length)}return n}),e.defn(y,"$chop",function(){var e=this,t=e.length;return 1>=t?"":"\n"===e.charAt(t-1)&&"\r"===e.charAt(t-2)?e.substr(0,t-2):e.substr(0,t-1)}),e.defn(y,"$chr",function(){var e=this;return e.charAt(0)}),e.defn(y,"$clone",function(){var e=this,t=o;return t=e.slice(),t.$copy_singleton_methods(e),t.$initialize_clone(e),t}),e.defn(y,"$dup",function(){var e=this,t=o;return t=e.slice(),t.$initialize_dup(e),t}),e.defn(y,"$count",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];0===r.length&&e.$raise(w.get("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var i=u(r);return null===i?0:e.length-e.replace(new RegExp(i,"g"),"").length}),e.defn(y,"$delete",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];0===r.length&&e.$raise(w.get("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var i=u(r);return null===i?e:e.replace(new RegExp(i,"g"),"")}),e.defn(y,"$downcase",function(){var e=this;return e.toLowerCase()}),e.defn(y,"$each_char",f=function(){var t,n,r,i=this,s=f.$$p,l=s||o;if(f.$$p=null,l===o)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=i,r),t).call(n,"each_char");for(var $=0,u=i.length;u>$;$++){var c=e.yield1(l,i.charAt($));if(c===a)return a.$v}return i}),e.defn(y,"$each_line",d=function(t){var n=this,r=d.$$p,i=r||o;if(null==$["/"]&&($["/"]=o),null==t&&(t=$["/"]),d.$$p=null,i===o)return n.$enum_for("each_line",t);var s;if(t===o)return s=e.yield1(i,n),s===a?s.$v:n;t=w.get("Opal").$coerce_to(t,w.get("String"),"to_str");var l,u,c,f,p,h,g;if(0===t.length){for(l=n.split(/(\n{2,})/),u=0,c=l.length;c>u;u+=2)if((l[u]||l[u+1])&&(s=e.yield1(i,(l[u]||"")+(l[u+1]||"")),s===a))return s.$v;return n}for(p=n.$chomp(t),h=n.length!=p.length,g=p.split(t),u=0,f=g.length;f>u;u++)if(f-1>u||h){if(s=e.yield1(i,g[u]+t),s===a)return s.$v}else if(s=e.yield1(i,g[u]),s===a)return s.$v;return n}),e.defn(y,"$empty?",function(){var e=this;return 0===e.length}),e.defn(y,"$end_with?",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var i=0,a=r.length;a>i;i++){var s=w.get("Opal").$coerce_to(r[i],w.get("String"),"to_str").$to_s();if(e.length>=s.length&&e.substr(e.length-s.length,s.length)==s)return!0}return!1}),e.alias(y,"eql?","=="),e.alias(y,"equal?","==="),e.defn(y,"$gsub",p=function(e,t){var n=this,r=p.$$p,i=r||o;if(p.$$p=null,void 0===t&&i===o)return n.$enum_for("gsub",e);var a,s,l="",u=o,c=0;for(e.$$is_regexp?e=new RegExp(e.source,"gm"+(e.ignoreCase?"i":"")):(e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));;){if(a=e.exec(n),null===a){$["~"]=o,
l+=n.slice(c);break}u=w.get("MatchData").$new(e,a),void 0===t?s=i(a[0]):t.$$is_hash?s=t["$[]"](a[0]).$to_s():(t.$$is_string||(t=w.get("Opal").$coerce_to(t,w.get("String"),"to_str")),s=t.replace(/([\\]+)([0-9+&`'])/g,function(e,t,r){if(t.length%2===0)return e;switch(r){case"+":for(var i=a.length-1;i>0;i--)if(void 0!==a[i])return t.slice(1)+a[i];return"";case"&":return t.slice(1)+a[0];case"`":return t.slice(1)+n.slice(0,a.index);case"'":return t.slice(1)+n.slice(a.index+a[0].length);default:return t.slice(1)+(a[r]||"")}}).replace(/\\\\/g,"\\")),e.lastIndex===a.index?(l+=s+n.slice(c,a.index+1),e.lastIndex+=1):l+=n.slice(c,a.index)+s,c=e.lastIndex}return $["~"]=u,l}),e.defn(y,"$hash",function(){var e=this;return e.toString()}),e.defn(y,"$hex",function(){var e=this;return e.$to_i(16)}),e.defn(y,"$include?",function(e){var t,n=this;return e.$$is_string?-1!==n.indexOf(e):(((t=e["$respond_to?"]("to_str"))===o||t.$$is_boolean&&1!=t)&&n.$raise(w.get("TypeError"),"no implicit conversion of "+e.$class()+" into String"),-1!==n.indexOf(e.$to_str()))}),e.defn(y,"$index",function(e,t){var n,r,i,a=this;if(void 0===t)t=0;else if(t=w.get("Opal").$coerce_to(t,w.get("Integer"),"to_int"),0>t&&(t+=a.length,0>t))return o;if(e.$$is_regexp)for(i=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if(r=i.exec(a),null===r){$["~"]=o,n=-1;break}if(r.index>=t){$["~"]=w.get("MatchData").$new(i,r),n=r.index;break}i.lastIndex=r.index+1}else e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str"),n=0===e.length&&t>a.length?-1:a.indexOf(e,t);return-1===n?o:n}),e.defn(y,"$inspect",function(){var e=this,t=/[\\\"\x00-\x1f\x7f-\x9f\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"":"\\a","":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","":"\\v",'"':'\\"',"\\":"\\\\"},r=e.replace(t,function(e){return n[e]||"\\u"+("0000"+e.charCodeAt(0).toString(16).toUpperCase()).slice(-4)});return'"'+r.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),e.defn(y,"$intern",function(){var e=this;return e}),e.defn(y,"$lines",h=function(e){var t,n,r=this,i=h.$$p,a=i||o,s=o;return null==$["/"]&&($["/"]=o),null==e&&(e=$["/"]),h.$$p=null,s=(t=(n=r).$each_line,t.$$p=a.$to_proc(),t).call(n,e),a!==!1&&a!==o?r:s.$to_a()}),e.defn(y,"$length",function(){var e=this;return e.length}),e.defn(y,"$ljust",function(e,t){var n,r=this;if(null==t&&(t=" "),e=w.get("Opal").$coerce_to(e,w.get("Integer"),"to_int"),t=w.get("Opal").$coerce_to(t,w.get("String"),"to_str").$to_s(),(n=t["$empty?"]())===o||n.$$is_boolean&&1!=n||r.$raise(w.get("ArgumentError"),"zero width padding"),(n=e<=r.length)!==o&&(!n.$$is_boolean||1==n))return r;var i=-1,a="";for(e-=r.length;++i<e;)a+=t;return r+a.slice(0,e)}),e.defn(y,"$lstrip",function(){var e=this;return e.replace(/^\s*/,"")}),e.defn(y,"$match",g=function(e,t){var n,r,i=this,a=g.$$p,s=a||o;return g.$$p=null,(n=(r=w.get("String")["$==="](e))!==!1&&r!==o?r:e["$respond_to?"]("to_str"))===o||n.$$is_boolean&&1!=n||(e=w.get("Regexp").$new(e.$to_str())),((n=w.get("Regexp")["$==="](e))===o||n.$$is_boolean&&1!=n)&&i.$raise(w.get("TypeError"),"wrong argument type "+e.$class()+" (expected Regexp)"),(n=(r=e).$match,n.$$p=s.$to_proc(),n).call(r,i,t)}),e.defn(y,"$next",function(){var e=this,t=e.length;if(0===t)return"";for(var n,r=e,i=e.search(/[a-zA-Z0-9]/),o=!1;t--;){if(n=e.charCodeAt(t),n>=48&&57>=n||n>=65&&90>=n||n>=97&&122>=n)switch(n){case 57:o=!0,n=48;break;case 90:o=!0,n=65;break;case 122:o=!0,n=97;break;default:o=!1,n+=1}else-1===i?255===n?(o=!0,n=0):(o=!1,n+=1):o=!0;if(r=r.slice(0,t)+String.fromCharCode(n)+r.slice(t+1),o&&(0===t||t===i)){switch(n){case 65:break;case 97:break;default:n+=1}r=0===t?String.fromCharCode(n)+r:r.slice(0,t)+String.fromCharCode(n)+r.slice(t),o=!1}if(!o)break}return r}),e.defn(y,"$oct",function(){var e,t=this,n=t,r=8;return/^\s*_/.test(n)?0:(n=n.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(e,t,n,i){switch(i.charAt(0)){case"+":case"-":return e;case"0":if("x"===i.charAt(1)&&"0x"===n)return e}switch(n){case"0b":r=2;break;case"0":case"0o":r=8;break;case"0d":r=10;break;case"0x":r=16}return t+i}),e=parseInt(n.replace(/_(?!_)/g,""),r),isNaN(e)?0:e)}),e.defn(y,"$ord",function(){var e=this;return e.charCodeAt(0)}),e.defn(y,"$partition",function(e){var t,n,r=this;return e.$$is_regexp?(n=e.exec(r),null===n?t=-1:(w.get("MatchData").$new(e,n),e=n[0],t=n.index)):(e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str"),t=r.indexOf(e)),-1===t?[r,"",""]:[r.slice(0,t),r.slice(t,t+e.length),r.slice(t+e.length)]}),e.defn(y,"$reverse",function(){var e=this;return e.split("").reverse().join("")}),e.defn(y,"$rindex",function(e,t){var n,r,i,a,s=this;if(void 0===t)t=s.length;else if(t=w.get("Opal").$coerce_to(t,w.get("Integer"),"to_int"),0>t&&(t+=s.length,0>t))return o;if(e.$$is_regexp){for(r=null,i=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if(a=i.exec(s),null===a||a.index>t)break;r=a,i.lastIndex=r.index+1}null===r?($["~"]=o,n=-1):(w.get("MatchData").$new(i,r),n=r.index)}else e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str"),n=s.lastIndexOf(e,t);return-1===n?o:n}),e.defn(y,"$rjust",function(e,t){var n,r=this;if(null==t&&(t=" "),e=w.get("Opal").$coerce_to(e,w.get("Integer"),"to_int"),t=w.get("Opal").$coerce_to(t,w.get("String"),"to_str").$to_s(),(n=t["$empty?"]())===o||n.$$is_boolean&&1!=n||r.$raise(w.get("ArgumentError"),"zero width padding"),(n=e<=r.length)!==o&&(!n.$$is_boolean||1==n))return r;var i=Math.floor(e-r.length),a=Math.floor(i/t.length),s=Array(a+1).join(t),l=i-s.length;return s+t.slice(0,l)+r}),e.defn(y,"$rpartition",function(e){var t,n,r,i,o=this;if(e.$$is_regexp){for(n=null,r=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if(i=r.exec(o),null===i)break;n=i,r.lastIndex=n.index+1}null===n?t=-1:(w.get("MatchData").$new(r,n),e=n[0],t=n.index)}else e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str"),t=o.lastIndexOf(e);return-1===t?["","",o]:[o.slice(0,t),o.slice(t,t+e.length),o.slice(t+e.length)]}),e.defn(y,"$rstrip",function(){var e=this;return e.replace(/[\s\u0000]*$/,"")}),e.defn(y,"$scan",v=function(e){var t=this,n=v.$$p,r=n||o;v.$$p=null;var i,a=[],s=o;for(e.$$is_regexp?e=new RegExp(e.source,"gm"+(e.ignoreCase?"i":"")):(e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));null!=(i=e.exec(t));)s=w.get("MatchData").$new(e,i),r===o?1==i.length?a.push(i[0]):a.push(s.$captures()):1==i.length?r(i[0]):r.call(t,s.$captures()),e.lastIndex===i.index&&(e.lastIndex+=1);return $["~"]=s,r!==o?t:a}),e.alias(y,"size","length"),e.alias(y,"slice","[]"),e.defn(y,"$split",function(e,t){var n,r=this;if(null==$[";"]&&($[";"]=o),0===r.length)return[];if(void 0===t)t=0;else if(t=w.get("Opal")["$coerce_to!"](t,w.get("Integer"),"to_int"),1===t)return[r];(void 0===e||e===o)&&(e=(n=$[";"])!==!1&&n!==o?n:" ");var i,a,s=[],l=r.toString(),u=0;if(e.$$is_regexp?e=new RegExp(e.source,"gm"+(e.ignoreCase?"i":"")):(e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str").$to_s()," "===e?(e=/\s+/gm,l=l.replace(/^\s+/,"")):e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm")),s=l.split(e),1===s.length&&s[0]===l)return s;for(;-1!==(a=s.indexOf(void 0));)s.splice(a,1);if(0===t){for(;""===s[s.length-1];)s.length-=1;return s}if(i=e.exec(l),0>t){if(null!==i&&""===i[0]&&-1===e.source.indexOf("(?="))for(a=0;a<i.length;a++)s.push("");return s}if(null!==i&&""===i[0])return s.splice(t-1,s.length-1,s.slice(t-1).join("")),s;for(a=0;null!==i&&(a++,u=e.lastIndex,a+1!==t);)i=e.exec(l);return s.splice(t-1,s.length-1,l.slice(u)),s}),e.defn(y,"$squeeze",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];if(0===r.length)return e.replace(/(.)\1+/g,"$1");var i=u(r);return null===i?e:e.replace(new RegExp("("+i+")\\1+","g"),"$1")}),e.defn(y,"$start_with?",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var i=0,a=r.length;a>i;i++){var s=w.get("Opal").$coerce_to(r[i],w.get("String"),"to_str").$to_s();if(0===e.indexOf(s))return!0}return!1}),e.defn(y,"$strip",function(){var e=this;return e.replace(/^\s*/,"").replace(/[\s\u0000]*$/,"")}),e.defn(y,"$sub",m=function(e,t){var n=this,r=m.$$p,i=r||o;m.$$p=null,e.$$is_regexp||(e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var a=e.exec(n);return null===a?($["~"]=o,n.toString()):(w.get("MatchData").$new(e,a),void 0===t?(i===o&&n.$raise(w.get("ArgumentError"),"wrong number of arguments (1 for 2)"),n.slice(0,a.index)+i(a[0])+n.slice(a.index+a[0].length)):t.$$is_hash?n.slice(0,a.index)+t["$[]"](a[0]).$to_s()+n.slice(a.index+a[0].length):(t=w.get("Opal").$coerce_to(t,w.get("String"),"to_str"),t=t.replace(/([\\]+)([0-9+&`'])/g,function(e,t,r){if(t.length%2===0)return e;switch(r){case"+":for(var i=a.length-1;i>0;i--)if(void 0!==a[i])return t.slice(1)+a[i];return"";case"&":return t.slice(1)+a[0];case"`":return t.slice(1)+n.slice(0,a.index);case"'":return t.slice(1)+n.slice(a.index+a[0].length);default:return t.slice(1)+(a[r]||"")}}).replace(/\\\\/g,"\\"),n.slice(0,a.index)+t+n.slice(a.index+a[0].length)))}),e.alias(y,"succ","next"),e.defn(y,"$sum",function(e){var t=this;null==e&&(e=16),e=w.get("Opal").$coerce_to(e,w.get("Integer"),"to_int");for(var n=0,r=t.length,i=0;r>i;i++)n+=t.charCodeAt(i);return 0>=e?n:n&Math.pow(2,e)-1}),e.defn(y,"$swapcase",function(){var e=this,t=e.replace(/([a-z]+)|([A-Z]+)/g,function(e,t,n){return t?e.toUpperCase():e.toLowerCase()});return e.constructor===String?t:e.$class().$new(t)}),e.defn(y,"$to_f",function(){var e=this;if("_"===e.charAt(0))return 0;var t=parseFloat(e.replace(/_/g,""));return isNaN(t)||t==1/0||t==-(1/0)?0:t}),e.defn(y,"$to_i",function(e){var t=this;null==e&&(e=10);var n,r=t.toLowerCase(),i=w.get("Opal").$coerce_to(e,w.get("Integer"),"to_int");return(1===i||0>i||i>36)&&t.$raise(w.get("ArgumentError"),"invalid radix "+i),/^\s*_/.test(r)?0:(r=r.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(e,t,n,r){switch(r.charAt(0)){case"+":case"-":return e;case"0":if("x"===r.charAt(1)&&"0x"===n&&(0===i||16===i))return e}switch(n){case"0b":if(0===i||2===i)return i=2,t+r;break;case"0":case"0o":if(0===i||8===i)return i=8,t+r;break;case"0d":if(0===i||10===i)return i=10,t+r;break;case"0x":if(0===i||16===i)return i=16,t+r}return e}),n=parseInt(r.replace(/_(?!_)/g,""),i),isNaN(n)?0:n)}),e.defn(y,"$to_proc",function(){var t,n,r,i=this,a=o;return a=i,(t=(n=i).$proc,t.$$p=(r=function(t){var n,i,l,$=r.$$s||this,u=o;return t=s.call(arguments,0),n=r.$$p||o,r.$$p=null,(i=t["$empty?"]())===o||i.$$is_boolean&&1!=i||$.$raise(w.get("ArgumentError"),"no receiver given"),u=t.$shift(),(i=(l=u).$__send__,i.$$p=n.$to_proc(),i).apply(l,[a].concat(e.to_a(t)))},r.$$s=i,r),t).call(n)}),e.defn(y,"$to_s",function(){var e=this;return e.toString()}),e.alias(y,"to_str","to_s"),e.alias(y,"to_sym","intern"),e.defn(y,"$tr",function(e,t){var n=this;if(e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str").$to_s(),t=w.get("Opal").$coerce_to(t,w.get("String"),"to_str").$to_s(),0==e.length||e===t)return n;var r,i,o,a,s,l,$,u={},c=e.split(""),f=c.length,d=t.split(""),p=d.length,h=!1,g=null;"^"===c[0]&&c.length>1&&(h=!0,c.shift(),g=d[p-1],f-=1);var v=[],m=null;for(i=!1,r=0;f>r;r++)if(a=c[r],null==m)m=a,v.push(a);else if("-"===a)"-"===m?(v.push("-"),v.push("-")):r==f-1?v.push("-"):i=!0;else if(i){for(s=m.charCodeAt(0),l=a.charCodeAt(0),s>l&&n.$raise(w.get("ArgumentError"),'invalid range "'+String.fromCharCode(s)+"-"+String.fromCharCode(l)+'" in string transliteration'),o=s+1;l>o;o++)v.push(String.fromCharCode(o));v.push(a),i=null,m=null}else v.push(a);if(c=v,f=c.length,h)for(r=0;f>r;r++)u[c[r]]=!0;else{if(p>0){var _=[],y=null;for(i=!1,r=0;p>r;r++)if(a=d[r],null==m)m=a,_.push(a);else if("-"===a)"-"===y?(_.push("-"),_.push("-")):r==p-1?_.push("-"):i=!0;else if(i){for(s=m.charCodeAt(0),l=a.charCodeAt(0),s>l&&n.$raise(w.get("ArgumentError"),'invalid range "'+String.fromCharCode(s)+"-"+String.fromCharCode(l)+'" in string transliteration'),o=s+1;l>o;o++)_.push(String.fromCharCode(o));_.push(a),i=null,m=null}else _.push(a);d=_,p=d.length}var b=f-p;if(b>0){var x=p>0?d[p-1]:"";for(r=0;b>r;r++)d.push(x)}for(r=0;f>r;r++)u[c[r]]=d[r]}var k="";for(r=0,$=n.length;$>r;r++){a=n.charAt(r);var E=u[a];k+=h?null==E?g:a:null!=E?E:a}return k}),e.defn(y,"$tr_s",function(e,t){var n=this;if(e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str").$to_s(),t=w.get("Opal").$coerce_to(t,w.get("String"),"to_str").$to_s(),0==e.length)return n;var r,i,o,a,s,l,$,u={},c=e.split(""),f=c.length,d=t.split(""),p=d.length,h=!1,g=null;"^"===c[0]&&c.length>1&&(h=!0,c.shift(),g=d[p-1],f-=1);var v=[],m=null;for(i=!1,r=0;f>r;r++)if(a=c[r],null==m)m=a,v.push(a);else if("-"===a)"-"===m?(v.push("-"),v.push("-")):r==f-1?v.push("-"):i=!0;else if(i){for(s=m.charCodeAt(0),l=a.charCodeAt(0),s>l&&n.$raise(w.get("ArgumentError"),'invalid range "'+String.fromCharCode(s)+"-"+String.fromCharCode(l)+'" in string transliteration'),o=s+1;l>o;o++)v.push(String.fromCharCode(o));v.push(a),i=null,m=null}else v.push(a);if(c=v,f=c.length,h)for(r=0;f>r;r++)u[c[r]]=!0;else{if(p>0){var _=[],y=null;for(i=!1,r=0;p>r;r++)if(a=d[r],null==m)m=a,_.push(a);else if("-"===a)"-"===y?(_.push("-"),_.push("-")):r==p-1?_.push("-"):i=!0;else if(i){for(s=m.charCodeAt(0),l=a.charCodeAt(0),s>l&&n.$raise(w.get("ArgumentError"),'invalid range "'+String.fromCharCode(s)+"-"+String.fromCharCode(l)+'" in string transliteration'),o=s+1;l>o;o++)_.push(String.fromCharCode(o));_.push(a),i=null,m=null}else _.push(a);d=_,p=d.length}var b=f-p;if(b>0){var x=p>0?d[p-1]:"";for(r=0;b>r;r++)d.push(x)}for(r=0;f>r;r++)u[c[r]]=d[r]}var k="",E=null;for(r=0,$=n.length;$>r;r++){a=n.charAt(r);var A=u[a];h?null==A?null==E&&(k+=g,E=!0):(k+=a,E=null):null!=A?(null==E||E!==A)&&(k+=A,E=A):(k+=a,E=null)}return k}),e.defn(y,"$upcase",function(){var e=this;return e.toUpperCase()}),e.defn(y,"$upto",_=function(e,t){var n=this,r=_.$$p,i=r||o;if(null==t&&(t=!1),_.$$p=null,i===o)return n.$enum_for("upto",e,t);e=w.get("Opal").$coerce_to(e,w.get("String"),"to_str");var s,l,$,u=n.toString();if(1===u.length&&1===e.length)for(s=u.charCodeAt(0),l=e.charCodeAt(0);l>=s&&(!t||s!==l);){if($=i(String.fromCharCode(s)),$===a)return a.$v;s+=1}else if(parseInt(u,10).toString()===u&&parseInt(e,10).toString()===e)for(s=parseInt(u,10),l=parseInt(e,10);l>=s&&(!t||s!==l);){if($=i(s.toString()),$===a)return a.$v;s+=1}else for(;u.length<=e.length&&e>=u&&(!t||u!==e);){if($=i(u),$===a)return a.$v;u=u.$succ()}return n})}(i.base,String),e.cdecl(i,"Symbol",i.get("String"))},Opal.modules["corelib/enumerable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}e.dynamic_require_severity="ignore";var s=(e.top,e),l=e.nil,$=e.breaker,u=e.slice,c=e.module;return e.add_stubs(["$raise","$new","$yield","$dup","$enum_for","$enumerator_size","$flatten","$map","$==","$destructure","$respond_to?","$coerce_to!","$>","$*","$nil?","$coerce_to","$try_convert","$<","$+","$-","$ceil","$/","$size","$===","$<<","$[]","$[]=","$inspect","$__send__","$compare","$<=>","$proc","$call","$to_a","$lambda","$sort!","$map!","$first","$zip"]),function(s){var f,d,p,h,g,v,m,_,y,b,w,x,k,E,A,O,C,S,M,N,L,I,T,z,q,j,R,D,P,F,H,W,B,V,U,G,K=f=c(s,"Enumerable"),Y=(K.$$proto,K.$$scope);e.defn(K,"$all?",d=function(){var t,n=this,r=d.$$p,i=r||l;d.$$p=null;var o=!0;return i!==l?n.$each.$$p=function(){var n=e.yieldX(i,arguments);return n===$?(o=$.$v,$):(t=n)===l||t.$$is_boolean&&0==t?(o=!1,$):void 0}:n.$each.$$p=function(e){return 1==arguments.length&&((t=e)===l||t.$$is_boolean&&0==t)?(o=!1,$):void 0},n.$each(),o}),e.defn(K,"$any?",p=function(){var t,n=this,r=p.$$p,i=r||l;p.$$p=null;var o=!1;return i!==l?n.$each.$$p=function(){var n=e.yieldX(i,arguments);return n===$?(o=$.$v,$):(t=n)===l||t.$$is_boolean&&1!=t?void 0:(o=!0,$)}:n.$each.$$p=function(e){return 1==arguments.length&&((t=e)===l||t.$$is_boolean&&1!=t)?void 0:(o=!0,$)},n.$each(),o}),e.defn(K,"$chunk",h=function(t){var n,r,i,o=this,a=h.$$p,s=a||l;return h.$$p=null,s!==!1&&s!==l||Y.get("Kernel").$raise(Y.get("ArgumentError"),"no block given"),(n=(r=e.get("Enumerator")).$new,n.$$p=(i=function(n){function r(){p.length>0&&n.$yield(d,p)}var o,a,u,c=i.$$s||this;null==n&&(n=l);var f,d=l,p=[];f=void 0==t||t===l?s:(o=(a=Y.get("Proc")).$new,o.$$p=(u=function(e){u.$$s||this;return null==e&&(e=l),s.$yield(e,t.$dup())},u.$$s=c,u),o).call(a),c.$each.$$p=function(t){var n=e.yield1(f,t);return n===$?$:void(n===l?(r(),p=[],d=l):(d===l||d===n?p.push(t):(r(),p=[t]),d=n))},c.$each(),r()},i.$$s=o,i),n).call(r)}),e.defn(K,"$collect",g=function(){var t,n,r,i=this,o=g.$$p,a=o||l;if(g.$$p=null,a===l)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=i,r),t).call(n,"collect");var s=[];return i.$each.$$p=function(){var t=e.yieldX(a,arguments);return t===$?(s=$.$v,$):void s.push(t)},i.$each(),s}),e.defn(K,"$collect_concat",v=function(){var t,n,r,i,o,a=this,s=v.$$p,u=s||l;return v.$$p=null,u===l?(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=a,r),t).call(n,"collect_concat"):(t=(i=a).$map,t.$$p=(o=function(t){var n;o.$$s||this;return null==t&&(t=l),n=e.yield1(u,t),n===$?n:n},o.$$s=a,o),t).call(i).$flatten(1)}),e.defn(K,"$count",m=function(t){var n,r=this,i=m.$$p,o=i||l;m.$$p=null;var a=0;return null!=t?o=function(){return Y.get("Opal").$destructure(arguments)["$=="](t)}:o===l&&(o=function(){return!0}),r.$each.$$p=function(){var t=e.yieldX(o,arguments);return t===$?(a=$.$v,$):void((n=t)===l||n.$$is_boolean&&1!=n||a++)},r.$each(),a}),e.defn(K,"$cycle",_=function(r){var i,o,a,s=this,u=_.$$p,c=u||l;if(null==r&&(r=l),_.$$p=null,c===l)return(i=(o=s).$enum_for,i.$$p=(a=function(){var e,i=a.$$s||this;return r["$=="](l)?(e=i["$respond_to?"]("size"))===l||e.$$is_boolean&&1!=e?l:Y.get("Float").$$scope.get("INFINITY"):(r=Y.get("Opal")["$coerce_to!"](r,Y.get("Integer"),"to_int"),t(r,0)?n(i.$enumerator_size(),r):0)},a.$$s=s,a),i).call(o,"cycle",r);if((i=r["$nil?"]())===l||i.$$is_boolean&&1!=i){if(r=Y.get("Opal")["$coerce_to!"](r,Y.get("Integer"),"to_int"),(i=0>=r)!==l&&(!i.$$is_boolean||1==i))return l}else;var f,d,p,h,g=[];if(s.$each.$$p=function(){var t=Y.get("Opal").$destructure(arguments),n=e.yield1(c,t);return n===$?(f=$.$v,$):void g.push(t)},s.$each(),void 0!==f)return f;if(0===g.length)return l;if(r===l){for(;;)for(d=0,p=g.length;p>d;d++)if(h=e.yield1(c,g[d]),h===$)return $.$v}else for(;r>1;){for(d=0,p=g.length;p>d;d++)if(h=e.yield1(c,g[d]),h===$)return $.$v;r--}}),e.defn(K,"$detect",y=function(t){var n,r=this,i=y.$$p,o=i||l;if(y.$$p=null,o===l)return r.$enum_for("detect",t);var a;return r.$each.$$p=function(){var t=Y.get("Opal").$destructure(arguments),r=e.yield1(o,t);return r===$?(a=$.$v,$):(n=r)===l||n.$$is_boolean&&1!=n?void 0:(a=t,$)},r.$each(),void 0===a&&void 0!==t&&(a="function"==typeof t?t():t),void 0===a?l:a}),e.defn(K,"$drop",function(e){var t,n=this;e=Y.get("Opal").$coerce_to(e,Y.get("Integer"),"to_int"),(t=0>e)===l||t.$$is_boolean&&1!=t||n.$raise(Y.get("ArgumentError"),"attempt to drop negative size");var r=[],i=0;return n.$each.$$p=function(){i>=e&&r.push(Y.get("Opal").$destructure(arguments)),i++},n.$each(),r}),e.defn(K,"$drop_while",b=function(){var t,n=this,r=b.$$p,i=r||l;if(b.$$p=null,i===l)return n.$enum_for("drop_while");var o=[],a=!0;return n.$each.$$p=function(){var n=Y.get("Opal").$destructure(arguments);if(a){var r=e.yield1(i,n);if(r===$)return o=$.$v,$;((t=r)===l||t.$$is_boolean&&0==t)&&(a=!1,o.push(n))}else o.push(n)},n.$each(),o}),e.defn(K,"$each_cons",w=function(t){var n,a,s,u=this,c=w.$$p,f=c||l;if(w.$$p=null,(n=1!=arguments.length)===l||n.$$is_boolean&&1!=n||u.$raise(Y.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),t=Y.get("Opal").$try_convert(t,Y.get("Integer"),"to_int"),(n=0>=t)===l||n.$$is_boolean&&1!=n||u.$raise(Y.get("ArgumentError"),"invalid size"),f===l)return(n=(a=u).$enum_for,n.$$p=(s=function(){var e,n,a=s.$$s||this,$=l;return $=a.$enumerator_size(),(e=$["$nil?"]())===l||e.$$is_boolean&&1!=e?(e=(n=$["$=="](0))!==!1&&n!==l?n:r($,t))===l||e.$$is_boolean&&1!=e?i(o($,t),1):0:l},s.$$s=u,s),n).call(a,"each_cons",t);var d=[],p=l;return u.$each.$$p=function(){var n=Y.get("Opal").$destructure(arguments);if(d.push(n),d.length>t&&d.shift(),d.length==t){var r=e.yield1(f,d.slice(0,t));if(r==$)return p=$.$v,$}},u.$each(),p}),e.defn(K,"$each_entry",x=function(){var e=this;x.$$p;return x.$$p=null,e.$raise(Y.get("NotImplementedError"))}),e.defn(K,"$each_slice",k=function(t){var n,r,i,o=this,s=k.$$p,u=s||l;if(k.$$p=null,t=Y.get("Opal").$coerce_to(t,Y.get("Integer"),"to_int"),(n=0>=t)===l||n.$$is_boolean&&1!=n||o.$raise(Y.get("ArgumentError"),"invalid slice size"),u===l)return(n=(r=o).$enum_for,n.$$p=(i=function(){var e,n=i.$$s||this;return(e=n["$respond_to?"]("size"))===l||e.$$is_boolean&&1!=e?l:a(n.$size(),t).$ceil()},i.$$s=o,i),n).call(r,"each_slice",t);var c,f=[];return o.$each.$$p=function(){var n=Y.get("Opal").$destructure(arguments);if(f.push(n),f.length===t){if(e.yield1(u,f)===$)return c=$.$v,$;f=[]}},o.$each(),void 0!==c?c:f.length>0&&e.yield1(u,f)===$?$.$v:l}),e.defn(K,"$each_with_index",E=function(){var t,n,r,i=this,o=E.$$p,a=o||l,s=l,u=arguments.length-0;0>u&&(u=0);var c=new Array(u);for(s=0;u>s;s++)c[s]=arguments[s+0];if(E.$$p=null,a===l)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=i,r),t).apply(n,["each_with_index"].concat(e.to_a(c)));var f,d=0;return i.$each.$$p=function(){var e=Y.get("Opal").$destructure(arguments),t=a(e,d);return t===$?(f=$.$v,$):void d++},i.$each.apply(i,c),void 0!==f?f:i}),e.defn(K,"$each_with_object",A=function(e){var t,n,r,i=this,o=A.$$p,a=o||l;if(A.$$p=null,a===l)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=i,r),t).call(n,"each_with_object",e);var s;return i.$each.$$p=function(){var t=Y.get("Opal").$destructure(arguments),n=a(t,e);return n===$?(s=$.$v,$):void 0},i.$each(),void 0!==s?s:e}),e.defn(K,"$entries",function(){var e=this,t=l,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];var i=[];return e.$each.$$p=function(){i.push(Y.get("Opal").$destructure(arguments))},e.$each.apply(e,r),i}),e.alias(K,"find","detect"),e.defn(K,"$find_all",O=function(){var t,n,r,i=this,o=O.$$p,a=o||l;if(O.$$p=null,a===l)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=i,r),t).call(n,"find_all");var s=[];return i.$each.$$p=function(){var n=Y.get("Opal").$destructure(arguments),r=e.yield1(a,n);return r===$?(s=$.$v,$):void((t=r)===l||t.$$is_boolean&&1!=t||s.push(n))},i.$each(),s}),e.defn(K,"$find_index",C=function(t){var n,r=this,i=C.$$p,o=i||l;if(C.$$p=null,(n=void 0===t&&o===l)!==l&&(!n.$$is_boolean||1==n))return r.$enum_for("find_index");var a=l,s=0;return null!=t?r.$each.$$p=function(){var e=Y.get("Opal").$destructure(arguments);return e["$=="](t)?(a=s,$):void(s+=1)}:o!==l&&(r.$each.$$p=function(){var t=e.yieldX(o,arguments);return t===$?(a=$.$v,$):(n=t)===l||n.$$is_boolean&&1!=n?void(s+=1):(a=s,$)}),r.$each(),a}),e.defn(K,"$first",function(e){var t,n=this,r=l;if((t=void 0===e)===l||t.$$is_boolean&&1!=t){if(r=[],e=Y.get("Opal").$coerce_to(e,Y.get("Integer"),"to_int"),(t=0>e)===l||t.$$is_boolean&&1!=t||n.$raise(Y.get("ArgumentError"),"attempt to take negative size"),(t=0==e)!==l&&(!t.$$is_boolean||1==t))return[];var i=0;e=Y.get("Opal").$coerce_to(e,Y.get("Integer"),"to_int"),n.$each.$$p=function(){return r.push(Y.get("Opal").$destructure(arguments)),e<=++i?$:void 0},n.$each()}else r=l,n.$each.$$p=function(){return r=Y.get("Opal").$destructure(arguments),$},n.$each();return r}),e.alias(K,"flat_map","collect_concat"),e.defn(K,"$grep",S=function(t){var n,r=this,i=S.$$p,o=i||l;S.$$p=null;var a=[];return o!==l?r.$each.$$p=function(){var r=Y.get("Opal").$destructure(arguments),i=t["$==="](r);if((n=i)!==l&&(!n.$$is_boolean||1==n)){if(i=e.yield1(o,r),i===$)return a=$.$v,$;a.push(i)}}:r.$each.$$p=function(){var e=Y.get("Opal").$destructure(arguments),r=t["$==="](e);(n=r)===l||n.$$is_boolean&&1!=n||a.push(e)},r.$each(),a}),e.defn(K,"$group_by",M=function(){var t,n,r,i,o,a=this,s=M.$$p,u=s||l,c=l;if(M.$$p=null,u===l)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=a,r),t).call(n,"group_by");c=Y.get("Hash").$new();var f;return a.$each.$$p=function(){var n=Y.get("Opal").$destructure(arguments),r=e.yield1(u,n);return r===$?(f=$.$v,$):void(t=r,i=c,(o=i["$[]"](t))!==!1&&o!==l?o:i["$[]="](t,[]))["$<<"](n)},a.$each(),void 0!==f?f:c}),e.defn(K,"$include?",function(e){var t=this,n=!1;return t.$each.$$p=function(){var t=Y.get("Opal").$destructure(arguments);return t["$=="](e)?(n=!0,$):void 0},t.$each(),n}),e.defn(K,"$inject",N=function(t,n){var r=this,i=N.$$p,o=i||l;N.$$p=null;var a=t;return o!==l&&void 0===n?r.$each.$$p=function(){var t=Y.get("Opal").$destructure(arguments);return void 0===a?void(a=t):(t=e.yieldX(o,[a,t]),t===$?(a=$.$v,$):void(a=t))}:(void 0===n&&(Y.get("Symbol")["$==="](t)||r.$raise(Y.get("TypeError"),""+t.$inspect()+" is not a Symbol"),n=t,a=void 0),r.$each.$$p=function(){var e=Y.get("Opal").$destructure(arguments);return void 0===a?void(a=e):void(a=a.$__send__(n,e))}),r.$each(),void 0==a?l:a}),e.defn(K,"$lazy",function(){var t,n,r,i=this;return(t=(n=Y.get("Enumerator").$$scope.get("Lazy")).$new,t.$$p=(r=function(t,n){var i;r.$$s||this;return null==t&&(t=l),n=u.call(arguments,1),(i=t).$yield.apply(i,e.to_a(n))},r.$$s=i,r),t).call(n,i,i.$enumerator_size())}),e.defn(K,"$enumerator_size",function(){var e,t=this;return(e=t["$respond_to?"]("size"))===l||e.$$is_boolean&&1!=e?l:t.$size()}),e.alias(K,"map","collect"),e.defn(K,"$max",L=function(){var e=this,t=L.$$p,n=t||l;L.$$p=null;var r;return n!==l?e.$each.$$p=function(){var t=Y.get("Opal").$destructure(arguments);if(void 0===r)return void(r=t);var i=n(t,r);return i===$?(r=$.$v,$):(i===l&&e.$raise(Y.get("ArgumentError"),"comparison failed"),void(i>0&&(r=t)))}:e.$each.$$p=function(){var e=Y.get("Opal").$destructure(arguments);return void 0===r?void(r=e):void(Y.get("Opal").$compare(e,r)>0&&(r=e))},e.$each(),void 0===r?l:r}),e.defn(K,"$max_by",I=function(){var t,n,r,i=this,o=I.$$p,a=o||l;if(I.$$p=null,a===!1||a===l)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=i,r),t).call(n,"max_by");var s,u;return i.$each.$$p=function(){var t=Y.get("Opal").$destructure(arguments),n=e.yield1(a,t);return void 0===s?(s=t,void(u=n)):n===$?(s=$.$v,$):void(n["$<=>"](u)>0&&(s=t,u=n))},i.$each(),void 0===s?l:s}),e.alias(K,"member?","include?"),e.defn(K,"$min",T=function(){var e=this,t=T.$$p,n=t||l;T.$$p=null;var r;return n!==l?e.$each.$$p=function(){var t=Y.get("Opal").$destructure(arguments);if(void 0===r)return void(r=t);var i=n(t,r);return i===$?(r=$.$v,$):(i===l&&e.$raise(Y.get("ArgumentError"),"comparison failed"),void(0>i&&(r=t)))}:e.$each.$$p=function(){var e=Y.get("Opal").$destructure(arguments);return void 0===r?void(r=e):void(Y.get("Opal").$compare(e,r)<0&&(r=e))},e.$each(),void 0===r?l:r}),e.defn(K,"$min_by",z=function(){var t,n,r,i=this,o=z.$$p,a=o||l;if(z.$$p=null,a===!1||a===l)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=i,r),t).call(n,"min_by");var s,u;return i.$each.$$p=function(){var t=Y.get("Opal").$destructure(arguments),n=e.yield1(a,t);return void 0===s?(s=t,void(u=n)):n===$?(s=$.$v,$):void(n["$<=>"](u)<0&&(s=t,u=n))},i.$each(),void 0===s?l:s}),e.defn(K,"$minmax",q=function(){var e,t,n,r,i=this,o=q.$$p,a=o||l;q.$$p=null,(e=a)!==!1&&e!==l?e:a=(t=(n=i).$proc,t.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=l),null==t&&(t=l),e["$<=>"](t)},r.$$s=i,r),t).call(n);var s=l,$=l,u=!0;return i.$each.$$p=function(){var e=Y.get("Opal").$destructure(arguments);if(u)s=$=e,u=!1;else{var t=a.$call(s,e);t===l?i.$raise(Y.get("ArgumentError"),"comparison failed"):t>0&&(s=e);var n=a.$call($,e);n===l?i.$raise(Y.get("ArgumentError"),"comparison failed"):0>n&&($=e)}},i.$each(),[s,$]}),e.defn(K,"$minmax_by",j=function(){var e=this;j.$$p;return j.$$p=null,e.$raise(Y.get("NotImplementedError"))}),e.defn(K,"$none?",R=function(){var t,n=this,r=R.$$p,i=r||l;R.$$p=null;var o=!0;return i!==l?n.$each.$$p=function(){var n=e.yieldX(i,arguments);return n===$?(o=$.$v,$):(t=n)===l||t.$$is_boolean&&1!=t?void 0:(o=!1,$)}:n.$each.$$p=function(){var e=Y.get("Opal").$destructure(arguments);return(t=e)===l||t.$$is_boolean&&1!=t?void 0:(o=!1,$)},n.$each(),o}),e.defn(K,"$one?",D=function(){var t,n=this,r=D.$$p,i=r||l;D.$$p=null;var o=!1;return i!==l?n.$each.$$p=function(){var n=e.yieldX(i,arguments);if(n===$)return o=$.$v,$;if((t=n)!==l&&(!t.$$is_boolean||1==t)){if(o===!0)return o=!1,$;o=!0}}:n.$each.$$p=function(){var e=Y.get("Opal").$destructure(arguments);if((t=e)!==l&&(!t.$$is_boolean||1==t)){if(o===!0)return o=!1,$;o=!0}},n.$each(),o}),e.defn(K,"$partition",P=function(){var t,n,r,i=this,o=P.$$p,a=o||l;if(P.$$p=null,a===l)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=i,r),t).call(n,"partition");var s,u=[],c=[];return i.$each.$$p=function(){var n=Y.get("Opal").$destructure(arguments),r=e.yield1(a,n);return r===$?(s=$.$v,$):void((t=r)===l||t.$$is_boolean&&1!=t?c.push(n):u.push(n))},i.$each(),[u,c]}),e.alias(K,"reduce","inject"),e.defn(K,"$reject",F=function(){var t,n,r,i=this,o=F.$$p,a=o||l;if(F.$$p=null,a===l)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=i,r),t).call(n,"reject");var s=[];return i.$each.$$p=function(){var n=Y.get("Opal").$destructure(arguments),r=e.yield1(a,n);return r===$?(s=$.$v,$):void(((t=r)===l||t.$$is_boolean&&0==t)&&s.push(n))},i.$each(),s}),e.defn(K,"$reverse_each",H=function(){var t,n,r,i=this,o=H.$$p,a=o||l;if(H.$$p=null,a===l)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=i,r),t).call(n,"reverse_each");var s=[];i.$each.$$p=function(){s.push(arguments)},i.$each();for(var $=s.length-1;$>=0;$--)e.yieldX(a,s[$]);return s}),e.alias(K,"select","find_all"),e.defn(K,"$slice_before",W=function(t){var n,r,i,o=this,a=W.$$p,s=a||l;return W.$$p=null,(n=void 0===t&&s===l||arguments.length>1)===l||n.$$is_boolean&&1!=n||o.$raise(Y.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),(n=(r=Y.get("Enumerator")).$new,n.$$p=(i=function(n){var r,o=i.$$s||this;null==n&&(n=l);var a=[];s!==l?void 0===t?o.$each.$$p=function(){var t=Y.get("Opal").$destructure(arguments),i=e.yield1(s,t);(r=i)!==l&&(!r.$$is_boolean||1==r)&&a.length>0&&(n["$<<"](a),a=[]),a.push(t)}:o.$each.$$p=function(){var e=Y.get("Opal").$destructure(arguments),i=s(e,t.$dup());(r=i)!==l&&(!r.$$is_boolean||1==r)&&a.length>0&&(n["$<<"](a),a=[]),a.push(e)}:o.$each.$$p=function(){var e=Y.get("Opal").$destructure(arguments),i=t["$==="](e);(r=i)!==l&&(!r.$$is_boolean||1==r)&&a.length>0&&(n["$<<"](a),a=[]),a.push(e)},o.$each(),a.length>0&&n["$<<"](a)},i.$$s=o,i),n).call(r)}),e.defn(K,"$sort",B=function(){var e,t,n,r=this,i=B.$$p,o=i||l,a=l;return B.$$p=null,a=r.$to_a(),o!==l||(o=(e=(t=r).$lambda,e.$$p=(n=function(e,t){n.$$s||this;return null==e&&(e=l),null==t&&(t=l),e["$<=>"](t)},n.$$s=r,n),e).call(t)),a.sort(o)}),e.defn(K,"$sort_by",V=function(){var e,t,n,r,i,o,a,s,$,u=this,c=V.$$p,f=c||l,d=l;return V.$$p=null,f===l?(e=(t=u).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=u,n),e).call(t,"sort_by"):(d=(e=(r=u).$map,e.$$p=(i=function(){var e=(i.$$s||this,l);return e=Y.get("Opal").$destructure(arguments),[f.$call(e),e]},i.$$s=u,i),e).call(r),(e=(o=d)["$sort!"],e.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=l),null==t&&(t=l),e[0]["$<=>"](t[0])},a.$$s=u,a),e).call(o),(e=(s=d)["$map!"],e.$$p=($=function(e){$.$$s||this;return null==e&&(e=l),e[1]},$.$$s=u,$),e).call(s))}),e.defn(K,"$take",function(e){var t=this;return t.$first(e)}),e.defn(K,"$take_while",U=function(){var t,n=this,r=U.$$p,i=r||l;if(U.$$p=null,i===!1||i===l)return n.$enum_for("take_while");var o=[];return n.$each.$$p=function(){var n=Y.get("Opal").$destructure(arguments),r=e.yield1(i,n);return r===$?(o=$.$v,$):(t=r)===l||t.$$is_boolean&&0==t?$:void o.push(n)},n.$each(),o}),e.alias(K,"to_a","entries"),e.defn(K,"$zip",G=function(){var t,n=this,r=(G.$$p,l),i=arguments.length-0;0>i&&(i=0);var o=new Array(i);for(r=0;i>r;r++)o[r]=arguments[r+0];
return G.$$p=null,(t=n.$to_a()).$zip.apply(t,e.to_a(o))})}(s.base)},Opal.modules["corelib/enumerator"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var r=e.top,i=e,o=e.nil,a=e.breaker,s=e.slice,l=e.klass;return e.add_stubs(["$require","$include","$allocate","$new","$to_proc","$coerce_to","$nil?","$empty?","$+","$class","$__send__","$===","$call","$enum_for","$size","$destructure","$inspect","$[]","$raise","$yield","$each","$enumerator_size","$respond_to?","$try_convert","$<","$for"]),r.$require("corelib/enumerable"),function(r,$super){function i(){}var $,u,c,f,d=i=l(r,$super,"Enumerator",i),p=d.$$proto,h=d.$$scope;return p.size=p.args=p.object=p.method=o,d.$include(h.get("Enumerable")),p.$$is_enumerator=!0,e.defs(d,"$for",$=function(e,t){var n=this,r=$.$$p,i=r||o,a=o,s=arguments.length-2;0>s&&(s=0);var l=new Array(s);for(a=0;s>a;a++)l[a]=arguments[a+2];null==t&&(t="each"),$.$$p=null;var u=n.$allocate();return u.object=e,u.size=i,u.method=t,u.args=l,u}),e.defn(d,"$initialize",u=function(){var e,t,n=this,r=u.$$p,i=r||o;return u.$$p=null,i!==!1&&i!==o?(n.object=(e=(t=h.get("Generator")).$new,e.$$p=i.$to_proc(),e).call(t),n.method="each",n.args=[],n.size=arguments[0]||o,(e=n.size)===o||e.$$is_boolean&&1!=e?o:n.size=h.get("Opal").$coerce_to(n.size,h.get("Integer"),"to_int")):(n.object=arguments[0],n.method=arguments[1]||"each",n.args=s.call(arguments,2),n.size=o)}),e.defn(d,"$each",c=function(){var n,r,i,a=this,s=c.$$p,l=s||o,$=o,u=arguments.length-0;0>u&&(u=0);var f=new Array(u);for($=0;u>$;$++)f[$]=arguments[$+0];return c.$$p=null,r=l["$nil?"](),(n=r!==!1&&r!==o?f["$empty?"]():r)===o||n.$$is_boolean&&1!=n?(f=t(a.args,f),(n=l["$nil?"]())===o||n.$$is_boolean&&1!=n?(r=(i=a.object).$__send__,r.$$p=l.$to_proc(),r).apply(i,[a.method].concat(e.to_a(f))):(n=a.$class()).$new.apply(n,[a.object,a.method].concat(e.to_a(f)))):a}),e.defn(d,"$size",function(){var t,n=this;return(t=h.get("Proc")["$==="](n.size))===o||t.$$is_boolean&&1!=t?n.size:(t=n.size).$call.apply(t,e.to_a(n.args))}),e.defn(d,"$with_index",f=function(e){var t,n,r,i=this,s=f.$$p,l=s||o;if(null==e&&(e=0),f.$$p=null,e=e!==!1&&e!==o?h.get("Opal").$coerce_to(e,h.get("Integer"),"to_int"):0,l===!1||l===o)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=i,r),t).call(n,"with_index",e);var $,u=e;return i.$each.$$p=function(){var e=h.get("Opal").$destructure(arguments),t=l(e,u);return t===a?($=a.$v,a):(u++,t)},i.$each(),void 0!==$?$:i.object}),e.alias(d,"with_object","each_with_object"),e.defn(d,"$inspect",function(){var e,n=this,r=o;return r="#<"+n.$class()+": "+n.object.$inspect()+":"+n.method,((e=n.args["$empty?"]())===o||e.$$is_boolean&&1!=e)&&(r=t(r,"("+n.args.$inspect()["$[]"](h.get("Range").$new(1,-2))+")")),t(r,">")}),function(t,$super){function n(){}var r,i,s=n=l(t,$super,"Generator",n),$=s.$$proto,u=s.$$scope;return $.block=o,s.$include(u.get("Enumerable")),e.defn(s,"$initialize",r=function(){var e=this,t=r.$$p,n=t||o;return r.$$p=null,n!==!1&&n!==o||e.$raise(u.get("LocalJumpError"),"no block given"),e.block=n}),e.defn(s,"$each",i=function(){var t,n,r=this,s=i.$$p,l=s||o,$=o,c=o,f=arguments.length-0;0>f&&(f=0);var d=new Array(f);for(c=0;f>c;c++)d[c]=arguments[c+0];i.$$p=null,$=(t=(n=u.get("Yielder")).$new,t.$$p=l.$to_proc(),t).call(n);try{if(d.unshift($),e.yieldX(r.block,d)===a)return a.$v}catch(p){if(p===a)return a.$v;throw p}return r}),o&&"each"}(h.base,null),function(t,$super){function n(){}var r,i=n=l(t,$super,"Yielder",n),s=i.$$proto;i.$$scope;return s.block=o,e.defn(i,"$initialize",r=function(){var e=this,t=r.$$p,n=t||o;return r.$$p=null,e.block=n}),e.defn(i,"$yield",function(){var t=this,n=o,r=arguments.length-0;0>r&&(r=0);var i=new Array(r);for(n=0;r>n;n++)i[n]=arguments[n+0];var s=e.yieldX(t.block,i);if(s===a)throw a;return s}),e.defn(i,"$<<",function(){var t,n=this,r=o,i=arguments.length-0;0>i&&(i=0);var a=new Array(i);for(r=0;i>r;r++)a[r]=arguments[r+0];return(t=n).$yield.apply(t,e.to_a(a)),n}),o&&"<<"}(h.base,null),function(r,$super){function i(){}var $,u,c,f,d,p,h,g,v,m=i=l(r,$super,"Lazy",i),_=m.$$proto,y=m.$$scope;return _.enumerator=o,function(e,$super){function t(){}var n=t=l(e,$super,"StopLazyError",t);n.$$proto,n.$$scope;return o}(y.base,y.get("Exception")),e.defn(m,"$initialize",$=function(t,n){var r,i=this,l=$.$$p,u=l||o;return null==n&&(n=o),$.$$p=null,u!==o||i.$raise(y.get("ArgumentError"),"tried to call lazy new without a block"),i.enumerator=t,e.find_super_dispatcher(i,"initialize",$,(r=function(n,i){var l,$,c,f=r.$$s||this;null==n&&(n=o),i=s.call(arguments,1);try{return(l=($=t).$each,l.$$p=(c=function(t){c.$$s||this;return t=s.call(arguments,0),t.unshift(n),e.yieldX(u,t)===a?a:void 0},c.$$s=f,c),l).apply($,e.to_a(i))}catch(d){if(!e.rescue(d,[y.get("Exception")]))throw d;try{return o}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}},r.$$s=i,r)).apply(i,[n])}),e.alias(m,"force","to_a"),e.defn(m,"$lazy",function(){var e=this;return e}),e.defn(m,"$collect",u=function(){var t,n,r,i=this,l=u.$$p,$=l||o;return u.$$p=null,$!==!1&&$!==o||i.$raise(y.get("ArgumentError"),"tried to call lazy map without a block"),(t=(n=y.get("Lazy")).$new,t.$$p=(r=function(t,n){r.$$s||this;null==t&&(t=o),n=s.call(arguments,1);var i=e.yieldX($,n);return i===a?a:void t.$yield(i)},r.$$s=i,r),t).call(n,i,i.$enumerator_size())}),e.defn(m,"$collect_concat",c=function(){var t,n,r,i=this,l=c.$$p,$=l||o;return c.$$p=null,$!==!1&&$!==o||i.$raise(y.get("ArgumentError"),"tried to call lazy map without a block"),(t=(n=y.get("Lazy")).$new,t.$$p=(r=function(t,n){var i,l,u,c,f,d=r.$$s||this;null==t&&(t=o),n=s.call(arguments,1);var p=e.yieldX($,n);if(p===a)return a;if(p["$respond_to?"]("force")&&p["$respond_to?"]("each"))(i=(l=p).$each,i.$$p=(u=function(e){u.$$s||this;return null==e&&(e=o),t.$yield(e)},u.$$s=d,u),i).call(l);else{var h=y.get("Opal").$try_convert(p,y.get("Array"),"to_ary");h===o?t.$yield(p):(i=(c=p).$each,i.$$p=(f=function(e){f.$$s||this;return null==e&&(e=o),t.$yield(e)},f.$$s=d,f),i).call(c)}},r.$$s=i,r),t).call(n,i,o)}),e.defn(m,"$drop",function(r){var i,a,l,$=this,u=o,c=o,f=o;return r=y.get("Opal").$coerce_to(r,y.get("Integer"),"to_int"),n(r,0)&&$.$raise(y.get("ArgumentError"),"attempt to drop negative size"),u=$.$enumerator_size(),c=function(){return(i=y.get("Integer")["$==="](u))===o||i.$$is_boolean&&1!=i?u:n(r,u)?r:u}(),f=0,(i=(a=y.get("Lazy")).$new,i.$$p=(l=function(i,a){var $;l.$$s||this;return null==i&&(i=o),a=s.call(arguments,1),n(f,r)?f=t(f,1):($=i).$yield.apply($,e.to_a(a))},l.$$s=$,l),i).call(a,$,c)}),e.defn(m,"$drop_while",f=function(){var t,n,r,i=this,l=f.$$p,$=l||o,u=o;return f.$$p=null,$!==!1&&$!==o||i.$raise(y.get("ArgumentError"),"tried to call lazy drop_while without a block"),u=!0,(t=(n=y.get("Lazy")).$new,t.$$p=(r=function(t,n){var i,l;r.$$s||this;if(null==t&&(t=o),n=s.call(arguments,1),u===!1||u===o)return(l=t).$yield.apply(l,e.to_a(n));var c=e.yieldX($,n);return c===a?a:void(((i=c)===o||i.$$is_boolean&&0==i)&&(u=!1,(i=t).$yield.apply(i,e.to_a(n))))},r.$$s=i,r),t).call(n,i,o)}),e.defn(m,"$enum_for",d=function(t){var n,r,i=this,a=d.$$p,s=a||o,l=o,$=arguments.length-1;0>$&&($=0);var u=new Array($);for(l=0;$>l;l++)u[l]=arguments[l+1];return null==t&&(t="each"),d.$$p=null,(n=(r=i.$class()).$for,n.$$p=s.$to_proc(),n).apply(r,[i,t].concat(e.to_a(u)))}),e.defn(m,"$find_all",p=function(){var t,n,r,i=this,l=p.$$p,$=l||o;return p.$$p=null,$!==!1&&$!==o||i.$raise(y.get("ArgumentError"),"tried to call lazy select without a block"),(t=(n=y.get("Lazy")).$new,t.$$p=(r=function(t,n){var i;r.$$s||this;null==t&&(t=o),n=s.call(arguments,1);var l=e.yieldX($,n);return l===a?a:void((i=l)===o||i.$$is_boolean&&1!=i||(i=t).$yield.apply(i,e.to_a(n)))},r.$$s=i,r),t).call(n,i,o)}),e.alias(m,"flat_map","collect_concat"),e.defn(m,"$grep",h=function(t){var n,r,i,l,$,u=this,c=h.$$p,f=c||o;return h.$$p=null,f!==!1&&f!==o?(n=(r=y.get("Lazy")).$new,n.$$p=(i=function(n,r){var l;i.$$s||this;null==n&&(n=o),r=s.call(arguments,1);var $=y.get("Opal").$destructure(r),u=t["$==="]($);if((l=u)!==o&&(!l.$$is_boolean||1==l)){if(u=e.yield1(f,$),u===a)return a;n.$yield(e.yield1(f,$))}},i.$$s=u,i),n).call(r,u,o):(n=(l=y.get("Lazy")).$new,n.$$p=($=function(e,n){var r;$.$$s||this;null==e&&(e=o),n=s.call(arguments,1);var i=y.get("Opal").$destructure(n),a=t["$==="](i);(r=a)===o||r.$$is_boolean&&1!=r||e.$yield(i)},$.$$s=u,$),n).call(l,u,o)}),e.alias(m,"map","collect"),e.alias(m,"select","find_all"),e.defn(m,"$reject",g=function(){var t,n,r,i=this,l=g.$$p,$=l||o;return g.$$p=null,$!==!1&&$!==o||i.$raise(y.get("ArgumentError"),"tried to call lazy reject without a block"),(t=(n=y.get("Lazy")).$new,t.$$p=(r=function(t,n){var i;r.$$s||this;null==t&&(t=o),n=s.call(arguments,1);var l=e.yieldX($,n);return l===a?a:void(((i=l)===o||i.$$is_boolean&&0==i)&&(i=t).$yield.apply(i,e.to_a(n)))},r.$$s=i,r),t).call(n,i,o)}),e.defn(m,"$take",function(r){var i,a,l,$=this,u=o,c=o,f=o;return r=y.get("Opal").$coerce_to(r,y.get("Integer"),"to_int"),n(r,0)&&$.$raise(y.get("ArgumentError"),"attempt to take negative size"),u=$.$enumerator_size(),c=function(){return(i=y.get("Integer")["$==="](u))===o||i.$$is_boolean&&1!=i?u:n(r,u)?r:u}(),f=0,(i=(a=y.get("Lazy")).$new,i.$$p=(l=function(i,a){var $,u=l.$$s||this;return null==i&&(i=o),a=s.call(arguments,1),n(f,r)?(($=i).$yield.apply($,e.to_a(a)),f=t(f,1)):u.$raise(y.get("StopLazyError"))},l.$$s=$,l),i).call(a,$,c)}),e.defn(m,"$take_while",v=function(){var t,n,r,i=this,l=v.$$p,$=l||o;return v.$$p=null,$!==!1&&$!==o||i.$raise(y.get("ArgumentError"),"tried to call lazy take_while without a block"),(t=(n=y.get("Lazy")).$new,t.$$p=(r=function(t,n){var i,l=r.$$s||this;null==t&&(t=o),n=s.call(arguments,1);var u=e.yieldX($,n);return u===a?a:void((i=u)===o||i.$$is_boolean&&1!=i?l.$raise(y.get("StopLazyError")):(i=t).$yield.apply(i,e.to_a(n)))},r.$$s=i,r),t).call(n,i,o)}),e.alias(m,"to_enum","enum_for"),e.defn(m,"$inspect",function(){var e=this;return"#<"+e.$class()+": "+e.enumerator.$inspect()+">"}),o&&"inspect"}(h.base,d)}(i.base,null)},Opal.modules["corelib/numeric"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var a=e.top,s=e,l=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$include","$instance_of?","$class","$Float","$coerce","$===","$raise","$__send__","$equal?","$coerce_to!","$-@","$**","$-","$*","$div","$<","$ceil","$to_f","$denominator","$to_r","$==","$floor","$/","$%","$Complex","$zero?","$numerator","$abs","$arg","$round","$to_i","$truncate","$>"]),a.$require("corelib/comparable"),function(a,$super){function s(){}var u=s=$(a,$super,"Numeric",s),c=(u.$$proto,u.$$scope);return u.$include(c.get("Comparable")),e.defn(u,"$coerce",function(e){var t,n=this;return(t=e["$instance_of?"](n.$class()))===l||t.$$is_boolean&&1!=t?[n.$Float(e),n.$Float(n)]:[e,n]}),e.defn(u,"$__coerced__",function(t,n){var r,i,o=this,a=l,s=l,$=l;try{i=n.$coerce(o),r=e.to_ary(i),a=null==r[0]?l:r[0],s=null==r[1]?l:r[1],i}catch(u){try{$=t,"+"["$==="]($)||"-"["$==="]($)||"*"["$==="]($)||"/"["$==="]($)||"%"["$==="]($)||"&"["$==="]($)||"|"["$==="]($)||"^"["$==="]($)||"**"["$==="]($)?o.$raise(c.get("TypeError"),""+n.$class()+" can't be coerce into Numeric"):(">"["$==="]($)||">="["$==="]($)||"<"["$==="]($)||"<="["$==="]($)||"<=>"["$==="]($))&&o.$raise(c.get("ArgumentError"),"comparison of "+o.$class()+" with "+n.$class()+" failed")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return a.$__send__(t,s)}),e.defn(u,"$<=>",function(e){var t,n=this;return(t=n["$equal?"](e))===l||t.$$is_boolean&&1!=t?l:0}),e.defn(u,"$[]",function(e){var n=this,r=l,i=l;return e=c.get("Opal")["$coerce_to!"](e,c.get("Integer"),"to_int"),r=2["$**"](30)["$-@"](),i=t(2["$**"](30),1),r>e||e>i?0:(n>>e)%2}),e.defn(u,"$+@",function(){var e=this;return e}),e.defn(u,"$-@",function(){var e=this;return t(0,e)}),e.defn(u,"$%",function(e){var r=this;return t(r,n(e,r.$div(e)))}),e.defn(u,"$abs",function(){var e=this;return r(e,0)?e["$-@"]():e}),e.defn(u,"$abs2",function(){var e=this;return n(e,e)}),e.defn(u,"$angle",function(){var e=this;return r(e,0)?c.get("Math").$$scope.get("PI"):0}),e.alias(u,"arg","angle"),e.defn(u,"$ceil",function(){var e=this;return e.$to_f().$ceil()}),e.defn(u,"$conj",function(){var e=this;return e}),e.alias(u,"conjugate","conj"),e.defn(u,"$denominator",function(){var e=this;return e.$to_r().$denominator()}),e.defn(u,"$div",function(e){var t=this;return e["$=="](0)&&t.$raise(c.get("ZeroDivisionError"),"divided by o"),i(t,e).$floor()}),e.defn(u,"$divmod",function(e){var t=this;return[t.$div(e),t["$%"](e)]}),e.defn(u,"$fdiv",function(e){var t=this;return i(t.$to_f(),e)}),e.defn(u,"$floor",function(){var e=this;return e.$to_f().$floor()}),e.defn(u,"$i",function(){var e=this;return e.$Complex(0,e)}),e.defn(u,"$imag",function(){return 0}),e.alias(u,"imaginary","imag"),e.defn(u,"$integer?",function(){return!1}),e.alias(u,"magnitude","abs"),e.alias(u,"modulo","%"),e.defn(u,"$nonzero?",function(){var e,t=this;return(e=t["$zero?"]())===l||e.$$is_boolean&&1!=e?t:l}),e.defn(u,"$numerator",function(){var e=this;return e.$to_r().$numerator()}),e.alias(u,"phase","arg"),e.defn(u,"$polar",function(){var e=this;return[e.$abs(),e.$arg()]}),e.defn(u,"$quo",function(e){var t=this;return i(c.get("Opal")["$coerce_to!"](t,c.get("Rational"),"to_r"),e)}),e.defn(u,"$real",function(){var e=this;return e}),e.defn(u,"$real?",function(){return!0}),e.defn(u,"$rect",function(){var e=this;return[e,0]}),e.alias(u,"rectangular","rect"),e.defn(u,"$round",function(e){var t=this;return t.$to_f().$round(e)}),e.defn(u,"$to_c",function(){var e=this;return e.$Complex(e,0)}),e.defn(u,"$to_int",function(){var e=this;return e.$to_i()}),e.defn(u,"$truncate",function(){var e=this;return e.$to_f().$truncate()}),e.defn(u,"$zero?",function(){var e=this;return e["$=="](0)}),e.defn(u,"$positive?",function(){var e=this;return o(e,0)}),e.defn(u,"$negative?",function(){var e=this;return r(e,0)}),e.defn(u,"$dup",function(){var e=this;return e.$raise(c.get("TypeError"),"can't dup "+e.$class())}),e.defn(u,"$clone",function(){var e=this;return e.$raise(c.get("TypeError"),"can't clone "+e.$class())}),l&&"clone"}(s.base,null)},Opal.modules["corelib/array"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var i=e.top,o=e,a=e.nil,s=e.breaker,l=(e.slice,e.klass),$=e.hash2,u=e.gvars;return e.add_stubs(["$require","$include","$raise","$===","$to_a","$respond_to?","$to_ary","$coerce_to","$initialize","$to_proc","$coerce_to?","$join","$to_str","$class","$clone","$hash","$<=>","$==","$object_id","$inspect","$enum_for","$coerce_to!","$>","$*","$enumerator_size","$empty?","$copy_singleton_methods","$initialize_clone","$initialize_dup","$replace","$size","$eql?","$length","$begin","$end","$exclude_end?","$flatten","$__id__","$[]","$to_s","$new","$!","$delete_if","$each","$reverse","$rotate","$rand","$at","$keep_if","$shuffle!","$dup","$<","$sort","$!=","$times","$[]=","$<<","$kind_of?","$last","$first","$upto"]),i.$require("corelib/enumerable"),i.$require("corelib/numeric"),function(i,$super){function o(){}function c(e,t){return e===t||0===t?1:t>0&&e>t?c(e-1,t-1)+c(e-1,t):0}var f,d,p,h,g,v,m,_,y,b,w,x,k,E,A,O,C,S,M,N,L,I,T,z,q,j,R,D,P,F=o=l(i,$super,"Array",o),H=F.$$proto,W=F.$$scope;return H.length=a,F.$include(W.get("Enumerable")),H.$$is_array=!0,e.defs(F,"$[]",function(){var e=a,t=arguments.length-0;0>t&&(t=0);var n=new Array(t);for(e=0;t>e;e++)n[e]=arguments[e+0];return n}),e.defn(F,"$initialize",f=function(e,t){var n,r=this,i=f.$$p,o=i||a;if(null==e&&(e=a),null==t&&(t=a),f.$$p=null,(n=arguments.length>2)===a||n.$$is_boolean&&1!=n||r.$raise(W.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),0===arguments.length)return r.splice(0,r.length),r;if((n=1===arguments.length)!==a&&(!n.$$is_boolean||1==n)){if(!((n=W.get("Array")["$==="](e))===a||n.$$is_boolean&&1!=n))return e.$to_a();if((n=e["$respond_to?"]("to_ary"))!==a&&(!n.$$is_boolean||1==n))return e.$to_ary()}e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),(n=0>e)===a||n.$$is_boolean&&1!=n||r.$raise(W.get("ArgumentError"),"negative array size"),r.splice(0,r.length);var l,$;if(o===a)for(l=0;e>l;l++)r.push(t);else for(l=0,$;e>l;l++){if($=o(l),$===s)return s.$v;r[l]=$}return r}),e.defs(F,"$new",d=function(){var t,n,r=d.$$p,i=r||a,o=a,s=arguments.length-0;0>s&&(s=0);var l=new Array(s);for(o=0;s>o;o++)l[o]=arguments[o+0];return d.$$p=null,(t=(n=[]).$initialize,t.$$p=i.$to_proc(),t).apply(n,e.to_a(l))}),e.defs(F,"$try_convert",function(e){return W.get("Opal")["$coerce_to?"](e,W.get("Array"),"to_ary")}),e.defn(F,"$&",function(t){var n,r=this;t=(n=W.get("Array")["$==="](t))===a||n.$$is_boolean&&1!=n?W.get("Opal").$coerce_to(t,W.get("Array"),"to_ary").$to_a():t.$to_a();var i,o,s,l=[],u=$([],{});for(i=0,o=t.length;o>i;i++)e.hash_put(u,t[i],!0);for(i=0,o=r.length;o>i;i++)s=r[i],void 0!==e.hash_delete(u,s)&&l.push(s);return l}),e.defn(F,"$|",function(t){var n,r=this;t=(n=W.get("Array")["$==="](t))===a||n.$$is_boolean&&1!=n?W.get("Opal").$coerce_to(t,W.get("Array"),"to_ary").$to_a():t.$to_a();var i,o,s=$([],{});for(i=0,o=r.length;o>i;i++)e.hash_put(s,r[i],!0);for(i=0,o=t.length;o>i;i++)e.hash_put(s,t[i],!0);return s.$keys()}),e.defn(F,"$*",function(e){var t,n=this;if((t=e["$respond_to?"]("to_str"))!==a&&(!t.$$is_boolean||1==t))return n.$join(e.$to_str());((t=e["$respond_to?"]("to_int"))===a||t.$$is_boolean&&1!=t)&&n.$raise(W.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"),e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),(t=0>e)===a||t.$$is_boolean&&1!=t||n.$raise(W.get("ArgumentError"),"negative argument");for(var r=[],i=0;e>i;i++)r=r.concat(n);return r}),e.defn(F,"$+",function(e){var t,n=this;return e=(t=W.get("Array")["$==="](e))===a||t.$$is_boolean&&1!=t?W.get("Opal").$coerce_to(e,W.get("Array"),"to_ary").$to_a():e.$to_a(),n.concat(e)}),e.defn(F,"$-",function(t){var n,r=this;if(t=(n=W.get("Array")["$==="](t))===a||n.$$is_boolean&&1!=n?W.get("Opal").$coerce_to(t,W.get("Array"),"to_ary").$to_a():t.$to_a(),(n=0===r.length)!==a&&(!n.$$is_boolean||1==n))return[];if((n=0===t.length)!==a&&(!n.$$is_boolean||1==n))return r.$clone();var i,o,s,l=[],u=$([],{});for(i=0,o=t.length;o>i;i++)e.hash_put(u,t[i],!0);for(i=0,o=r.length;o>i;i++)s=r[i],void 0===e.hash_get(u,s)&&l.push(s);return l}),e.defn(F,"$<<",function(e){var t=this;return t.push(e),t}),e.defn(F,"$<=>",function(e){var t,n=this;if((t=W.get("Array")["$==="](e))===a||t.$$is_boolean&&1!=t){if((t=e["$respond_to?"]("to_ary"))===a||t.$$is_boolean&&1!=t)return a;e=e.$to_ary().$to_a()}else e=e.$to_a();if(n.$hash()===e.$hash())return 0;for(var r=Math.min(n.length,e.length),i=0;r>i;i++){var o=n[i]["$<=>"](e[i]);if(0!==o)return o}return n.length["$<=>"](e.length)}),e.defn(F,"$==",function(e){function t(e,n){var i,o,a,s;if(e===n)return!0;if(!n.$$is_array)return W.get("Opal")["$respond_to?"](n,"to_ary")?n["$=="](e):!1;if(e.constructor!==Array&&(e=e.literal),n.constructor!==Array&&(n=n.literal),e.length!==n.length)return!1;for(r[e.$object_id()]=!0,i=0,o=e.length;o>i;i++)if(a=e[i],s=n[i],a.$$is_array){if(s.$$is_array&&s.length!==a.length)return!1;if(!r.hasOwnProperty(a.$object_id())&&!t(a,s))return!1}else if(!a["$=="](s))return!1;return!0}var n=this,r={};return t(n,e)}),e.defn(F,"$[]",function(e,t){var n,r,i,o=this,s=o.length;return e.$$is_range?(n=e.exclude,r=W.get("Opal").$coerce_to(e.begin,W.get("Integer"),"to_int"),i=W.get("Opal").$coerce_to(e.end,W.get("Integer"),"to_int"),0>r&&(r+=s,0>r)?a:r>s?a:0>i&&(i+=s,0>i)?[]:(n||(i+=1),o.slice(r,i))):(e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),0>e&&(e+=s,0>e)?a:void 0===t?e>=s||0>e?a:o[e]:(t=W.get("Opal").$coerce_to(t,W.get("Integer"),"to_int"),0>t||e>s||0>e?a:o.slice(e,e+t)))}),e.defn(F,"$[]=",function(e,t,n){var r,i,o=this,s=a,l=a,$=o.length;if((r=W.get("Range")["$==="](e))===a||r.$$is_boolean&&1!=r){(r=void 0===n)===a||r.$$is_boolean&&1!=r?(l=t,t=n,s=(r=W.get("Array")["$==="](t))===a||r.$$is_boolean&&1!=r?(r=t["$respond_to?"]("to_ary"))===a||r.$$is_boolean&&1!=r?[t]:t.$to_ary().$to_a():t.$to_a()):l=1;var u;if(e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),l=W.get("Opal").$coerce_to(l,W.get("Integer"),"to_int"),0>e&&(u=e,e+=$,0>e&&o.$raise(W.get("IndexError"),"index "+u+" too small for array; minimum "+-o.length)),0>l&&o.$raise(W.get("IndexError"),"negative length ("+l+")"),e>$)for(i=$;e>i;i++)o[i]=a;return void 0===n?o[e]=t:o.splice.apply(o,[e,l].concat(s)),t}s=(r=W.get("Array")["$==="](t))===a||r.$$is_boolean&&1!=r?(r=t["$respond_to?"]("to_ary"))===a||r.$$is_boolean&&1!=r?[t]:t.$to_ary().$to_a():t.$to_a();var c=e.exclude,f=W.get("Opal").$coerce_to(e.begin,W.get("Integer"),"to_int"),d=W.get("Opal").$coerce_to(e.end,W.get("Integer"),"to_int");if(0>f&&(f+=$,0>f&&o.$raise(W.get("RangeError"),""+e.$inspect()+" out of range")),0>d&&(d+=$),c||(d+=1),f>$)for(i=$;f>i;i++)o[i]=a;return 0>d?o.splice.apply(o,[f,0].concat(s)):o.splice.apply(o,[f,d-f].concat(s)),t}),e.defn(F,"$assoc",function(e){for(var t,n=this,r=0,i=n.length;i>r;r++)if(t=n[r],t.length&&t[0]["$=="](e))return t;return a}),e.defn(F,"$at",function(e){var t=this;return e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),0>e&&(e+=t.length),0>e||e>=t.length?a:t[e]}),e.defn(F,"$bsearch",p=function(){var e=this,t=p.$$p,n=t||a;if(p.$$p=null,n===a)return e.$enum_for("bsearch");for(var r,i,o,l=0,$=e.length,u=!1,c=a;$>l;){if(r=l+Math.floor(($-l)/2),i=e[r],o=n(i),o===s)return s.$v;if(o===!0)c=i,u=!0;else if(o===!1||o===a)u=!1;else if(o.$$is_number){if(0===o)return i;u=0>o}else e.$raise(W.get("TypeError"),"wrong argument type "+o.$class()+" (must be numeric, true, false or nil)");u?$=r:l=r+1}return c}),e.defn(F,"$cycle",h=function(r){var i,o,l,$,u=this,c=h.$$p,f=c||a;if(null==r&&(r=a),h.$$p=null,f===a)return(i=(o=u).$enum_for,i.$$p=(l=function(){var e=l.$$s||this;return r["$=="](a)?W.get("Float").$$scope.get("INFINITY"):(r=W.get("Opal")["$coerce_to!"](r,W.get("Integer"),"to_int"),t(r,0)?n(e.$enumerator_size(),r):0)},l.$$s=u,l),i).call(o,"cycle",r);if((i=($=u["$empty?"]())!==!1&&$!==a?$:r["$=="](0))!==a&&(!i.$$is_boolean||1==i))return a;var d,p,g;if(r===a){for(;;)for(d=0,p=u.length;p>d;d++)if(g=e.yield1(f,u[d]),g===s)return s.$v}else{if(r=W.get("Opal")["$coerce_to!"](r,W.get("Integer"),"to_int"),0>=r)return u;for(;r>0;){for(d=0,p=u.length;p>d;d++)if(g=e.yield1(f,u[d]),g===s)return s.$v;r--}}return u}),e.defn(F,"$clear",function(){var e=this;return e.splice(0,e.length),e}),e.defn(F,"$clone",function(){var e=this,t=a;return t=[],t.$copy_singleton_methods(e),t.$initialize_clone(e),t}),e.defn(F,"$dup",function(){var e=this,t=a;return t=[],t.$initialize_dup(e),t}),e.defn(F,"$initialize_copy",function(e){var t=this;return t.$replace(e)}),e.defn(F,"$collect",g=function(){var t,n,r,i=this,o=g.$$p,l=o||a;if(g.$$p=null,l===a)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=i,r),t).call(n,"collect");for(var $=[],u=0,c=i.length;c>u;u++){var f=e.yield1(l,i[u]);if(f===s)return s.$v;$.push(f)}return $}),e.defn(F,"$collect!",v=function(){var t,n,r,i=this,o=v.$$p,l=o||a;if(v.$$p=null,l===a)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=i,r),t).call(n,"collect!");for(var $=0,u=i.length;u>$;$++){var c=e.yield1(l,i[$]);if(c===s)return s.$v;i[$]=c}return i}),e.defn(F,"$combination",m=function(t){var n,r,i,o=this,l=m.$$p,$=l||a,u=a;if(m.$$p=null,u=W.get("Opal")["$coerce_to!"](t,W.get("Integer"),"to_int"),$===a)return(n=(r=o).$enum_for,n.$$p=(i=function(){var e=i.$$s||this;return c(e.length,u)},i.$$s=o,i),n).call(r,"combination",u);var f,d,p,h,g,v,_;if(0===u)(n=e.yield1($,[]))===s?s.$v:n;else if(1===u)for(f=0,d=o.length;d>f;f++)(n=e.yield1($,[o[f]]))===s?s.$v:n;else if(u===o.length)(n=e.yield1($,o.slice()))===s?s.$v:n;else if(u>=0&&u<o.length){for(p=[],f=0;u+1>=f;f++)p.push(0);for(h=[],g=0,v=!1,p[0]=-1;!v;){for(h[g]=o[p[g+1]];u-1>g;)g++,_=p[g+1]=p[g]+1,h[g]=o[_];(n=e.yield1($,h.slice()))===s?s.$v:n,g++;do v=0===g,p[g]++,g--;while(p[g+1]+u===o.length+g+1)}}return o}),e.defn(F,"$compact",function(){for(var e,t=this,n=[],r=0,i=t.length;i>r;r++)(e=t[r])!==a&&n.push(e);return n}),e.defn(F,"$compact!",function(){for(var e=this,t=e.length,n=0,r=e.length;r>n;n++)e[n]===a&&(e.splice(n,1),r--,n--);return e.length===t?a:e}),e.defn(F,"$concat",function(e){var t,n=this;e=(t=W.get("Array")["$==="](e))===a||t.$$is_boolean&&1!=t?W.get("Opal").$coerce_to(e,W.get("Array"),"to_ary").$to_a():e.$to_a();for(var r=0,i=e.length;i>r;r++)n.push(e[r]);return n}),e.defn(F,"$delete",_=function(t){var n,r=this,i=_.$$p,o=i||a;_.$$p=null;for(var l=r.length,$=0,u=l;u>$;$++)r[$]["$=="](t)&&(r.splice($,1),u--,$--);return r.length===l?o!==a?(n=e.yieldX(o,[]))===s?s.$v:n:a:t}),e.defn(F,"$delete_at",function(e){var t=this;if(e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),0>e&&(e+=t.length),0>e||e>=t.length)return a;var n=t[e];return t.splice(e,1),n}),e.defn(F,"$delete_if",y=function(){var e,t,n,r=this,i=y.$$p,o=i||a;if(y.$$p=null,o===a)return(e=(t=r).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=r,n),e).call(t,"delete_if");for(var l,$=0,u=r.length;u>$;$++){if((l=o(r[$]))===s)return s.$v;l!==!1&&l!==a&&(r.splice($,1),u--,$--)}return r}),e.defn(F,"$drop",function(e){var t=this;return 0>e&&t.$raise(W.get("ArgumentError")),t.slice(e)}),e.defn(F,"$each",b=function(){var t,n,r,i=this,o=b.$$p,l=o||a;if(b.$$p=null,l===a)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=i,r),t).call(n,"each");for(var $=0,u=i.length;u>$;$++){var c=e.yield1(l,i[$]);if(c==s)return s.$v}return i}),e.defn(F,"$each_index",w=function(){var t,n,r,i=this,o=w.$$p,l=o||a;if(w.$$p=null,l===a)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=i,r),t).call(n,"each_index");for(var $=0,u=i.length;u>$;$++){var c=e.yield1(l,$);if(c===s)return s.$v}return i}),e.defn(F,"$empty?",function(){var e=this;return 0===e.length}),e.defn(F,"$eql?",function(e){function t(e,n){var i,o,a,s;if(!n.$$is_array)return!1;if(n=n.$to_a(),e.length!==n.length)return!1;for(r[e.$object_id()]=!0,i=0,o=e.length;o>i;i++)if(a=e[i],s=n[i],a.$$is_array){if(s.$$is_array&&s.length!==a.length)return!1;if(!r.hasOwnProperty(a.$object_id())&&!t(a,s))return!1}else if(!a["$eql?"](s))return!1;return!0}var n=this,r={};return t(n,e)}),e.defn(F,"$fetch",x=function(e,t){var n=this,r=x.$$p,i=r||a;x.$$p=null;var o=e;return e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),0>e&&(e+=n.length),e>=0&&e<n.length?n[e]:i!==a?i(o):null!=t?t:void(0===n.length?n.$raise(W.get("IndexError"),"index "+o+" outside of array bounds: 0...0"):n.$raise(W.get("IndexError"),"index "+o+" outside of array bounds: -"+n.length+"..."+n.length))}),e.defn(F,"$fill",k=function(){var t,n,r=this,i=k.$$p,o=i||a,l=a,$=a,u=a,c=a,f=a,d=a,p=arguments.length-0;0>p&&(p=0);var h=new Array(p);for(d=0;p>d;d++)h[d]=arguments[d+0];k.$$p=null;var g,v,m;if(o!==!1&&o!==a?((t=h.length>2)===a||t.$$is_boolean&&1!=t||r.$raise(W.get("ArgumentError"),"wrong number of arguments ("+h.$length()+" for 0..2)"),n=h,t=e.to_ary(n),l=null==t[0]?a:t[0],$=null==t[1]?a:t[1],n):((t=0==h.length)===a||t.$$is_boolean&&1!=t?(t=h.length>3)===a||t.$$is_boolean&&1!=t||r.$raise(W.get("ArgumentError"),"wrong number of arguments ("+h.$length()+" for 1..3)"):r.$raise(W.get("ArgumentError"),"wrong number of arguments (0 for 1..3)"),n=h,t=e.to_ary(n),u=null==t[0]?a:t[0],l=null==t[1]?a:t[1],$=null==t[2]?a:t[2],n),(t=W.get("Range")["$==="](l))===a||t.$$is_boolean&&1!=t)if(l!==!1&&l!==a)if(c=W.get("Opal").$coerce_to(l,W.get("Integer"),"to_int"),(t=0>c)===a||t.$$is_boolean&&1!=t||(c+=r.length),(t=0>c)===a||t.$$is_boolean&&1!=t||(c=0),$!==!1&&$!==a){if(f=W.get("Opal").$coerce_to($,W.get("Integer"),"to_int"),(t=0==f)!==a&&(!t.$$is_boolean||1==t))return r;f+=c}else f=r.length;else c=0,f=r.length;else if($!==!1&&$!==a&&r.$raise(W.get("TypeError"),"length invalid with range"),c=W.get("Opal").$coerce_to(l.$begin(),W.get("Integer"),"to_int"),(t=0>c)===a||t.$$is_boolean&&1!=t||(c+=r.length),(t=0>c)===a||t.$$is_boolean&&1!=t||r.$raise(W.get("RangeError"),""+l.$inspect()+" out of range"),f=W.get("Opal").$coerce_to(l.$end(),W.get("Integer"),"to_int"),(t=0>f)===a||t.$$is_boolean&&1!=t||(f+=r.length),((t=l["$exclude_end?"]())===a||t.$$is_boolean&&1!=t)&&(f+=1),(t=c>=f)!==a&&(!t.$$is_boolean||1==t))return r;if((t=c>r.length)!==a&&(!t.$$is_boolean||1==t))for(g=r.length;f>g;g++)r[g]=a;if((t=f>r.length)===a||t.$$is_boolean&&1!=t||(r.length=f),o!==!1&&o!==a)for(v=r.length;f>c;c++){if(m=o(c),m===s)return s.$v;r[c]=m}else for(v=r.length;f>c;c++)r[c]=u;return r}),e.defn(F,"$first",function(e){var t=this;return null==e?0===t.length?a:t[0]:(e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),0>e&&t.$raise(W.get("ArgumentError"),"negative array size"),t.slice(0,e))}),e.defn(F,"$flatten",function(e){function t(e,r){var i,o,s,l,$=[];for(e=e.$to_a(),i=0,o=e.length;o>i;i++)if(s=e[i],W.get("Opal")["$respond_to?"](s,"to_ary"))if(l=s.$to_ary(),l!==a)switch(l.$$is_array||n.$raise(W.get("TypeError")),l===n&&n.$raise(W.get("ArgumentError")),r){case void 0:$.push.apply($,t(l));break;case 0:$.push(l);break;default:$.push.apply($,t(l,r-1))}else $.push(s);else $.push(s);return $}var n=this;return void 0!==e&&(e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int")),t(n,e)}),e.defn(F,"$flatten!",function(e){var t=this,n=t.$flatten(e);if(t.length==n.length){for(var r=0,i=t.length;i>r&&t[r]===n[r];r++);if(r==i)return a}return t.$replace(n),t}),e.defn(F,"$hash",function(){var t,n,r,i=this,o=void 0==e.hash_ids,a=["A"],s=i.$object_id();try{if(o&&(e.hash_ids={}),e.hash_ids.hasOwnProperty(s))return"self";for(r in e.hash_ids)if(e.hash_ids.hasOwnProperty(r)&&(t=e.hash_ids[r],i["$eql?"](t)))return"self";for(e.hash_ids[s]=i,n=0;n<i.length;n++)t=i[n],a.push(t.$hash());return a.join(",")}finally{o&&delete e.hash_ids}}),e.defn(F,"$include?",function(e){for(var t=this,n=0,r=t.length;r>n;n++)if(t[n]["$=="](e))return!0;return!1}),e.defn(F,"$index",E=function(e){var t=this,n=E.$$p,r=n||a;E.$$p=null;var i,o,l;if(null!=e){for(i=0,o=t.length;o>i;i++)if(t[i]["$=="](e))return i}else{if(r===a)return t.$enum_for("index");for(i=0,o=t.length;o>i;i++){if((l=r(t[i]))===s)return s.$v;if(l!==!1&&l!==a)return i}}return a}),e.defn(F,"$insert",function(e){var t=this,n=a,r=arguments.length-1;0>r&&(r=0);var i=new Array(r);for(n=0;r>n;n++)i[n]=arguments[n+1];if(e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),i.length>0){if(0>e&&(e+=t.length+1,0>e&&t.$raise(W.get("IndexError"),""+e+" is out of bounds")),e>t.length)for(var o=t.length;e>o;o++)t.push(a);t.splice.apply(t,[e,0].concat(i))}return t}),e.defn(F,"$inspect",function(){for(var e=this,t=[],n=e.$__id__(),r=0,i=e.length;i>r;r++){var o=e["$[]"](r);o.$__id__()===n?t.push("[...]"):t.push(o.$inspect())}return"["+t.join(", ")+"]"}),e.defn(F,"$join",function(e){var t,n=this;if(null==u[","]&&(u[","]=a),null==e&&(e=a),(t=0===n.length)!==a&&(!t.$$is_boolean||1==t))return"";(t=e===a)===a||t.$$is_boolean&&1!=t||(e=u[","]);var r,i,o,s,l=[];for(r=0,i=n.length;i>r;r++)o=n[r],W.get("Opal")["$respond_to?"](o,"to_str")&&(s=o.$to_str(),s!==a)?l.push(s.$to_s()):W.get("Opal")["$respond_to?"](o,"to_ary")&&(s=o.$to_ary(),s===n&&n.$raise(W.get("ArgumentError")),s!==a)?l.push(s.$join(e)):W.get("Opal")["$respond_to?"](o,"to_s")&&(s=o.$to_s(),s!==a)?l.push(s):n.$raise(W.get("NoMethodError").$new(""+W.get("Opal").$inspect(o)+" doesn't respond to #to_str, #to_ary or #to_s","to_str"));return e===a?l.join(""):l.join(W.get("Opal")["$coerce_to!"](e,W.get("String"),"to_str").$to_s())}),e.defn(F,"$keep_if",A=function(){var e,t,n,r=this,i=A.$$p,o=i||a;if(A.$$p=null,o===a)return(e=(t=r).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=r,n),e).call(t,"keep_if");for(var l,$=0,u=r.length;u>$;$++){if((l=o(r[$]))===s)return s.$v;(l===!1||l===a)&&(r.splice($,1),u--,$--)}return r}),e.defn(F,"$last",function(e){var t=this;return null==e?0===t.length?a:t[t.length-1]:(e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),0>e&&t.$raise(W.get("ArgumentError"),"negative array size"),e>t.length&&(e=t.length),t.slice(t.length-e,t.length));
}),e.defn(F,"$length",function(){var e=this;return e.length}),e.alias(F,"map","collect"),e.alias(F,"map!","collect!"),e.defn(F,"$permutation",O=function(t){var n,r,i,o=this,l=O.$$p,$=l||a,u=a,c=a;if(O.$$p=null,$===a)return(n=(r=o).$enum_for,n.$$p=(i=function(){var e=i.$$s||this;return e.$size()},i.$$s=o,i),n).call(r,"permutation",t);var f,d,p;if(t=void 0===t?o.length:W.get("Opal").$coerce_to(t,W.get("Integer"),"to_int"),0>t||o.length<t);else if(0===t)(n=e.yield1($,[]))===s?s.$v:n;else if(1===t)for(var h=0;h<o.length;h++)(n=e.yield1($,[o[h]]))===s?s.$v:n;else u=W.get("Array").$new(t),c=W.get("Array").$new(o.length,!1),f=function(t,n,r,i,a){o=this;for(var s=0;s<o.length;s++)if(i["$[]"](s)["$!"]())if(n[r]=s,t-1>r)i[s]=!0,f.call(o,t,n,r+1,i,a),i[s]=!1;else{p=[];for(var l=0;l<n.length;l++)p.push(o[n[l]]);e.yield1(a,p)}},$!==a?(d=o.slice(),f.call(d,t,u,0,c,$)):f.call(o,t,u,0,c,$);return o}),e.defn(F,"$pop",function(e){var t,n=this;return(t=void 0===e)===a||t.$$is_boolean&&1!=t?(e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),(t=0>e)===a||t.$$is_boolean&&1!=t||n.$raise(W.get("ArgumentError"),"negative array size"),(t=0===n.length)===a||t.$$is_boolean&&1!=t?(t=e>n.length)===a||t.$$is_boolean&&1!=t?n.splice(n.length-e,n.length):n.splice(0,n.length):[]):(t=0===n.length)===a||t.$$is_boolean&&1!=t?n.pop():a}),e.defn(F,"$product",C=function(){var t,n=this,r=C.$$p,i=r||a,o=a,l=arguments.length-0;0>l&&(l=0);var $=new Array(l);for(o=0;l>o;o++)$[o]=arguments[o+0];C.$$p=null;var u,c,f,d,p=i!==a?null:[],h=$.length+1,g=new Array(h),v=new Array(h),m=new Array(h),_=1;for(m[0]=n,u=1;h>u;u++)m[u]=W.get("Opal").$coerce_to($[u-1],W.get("Array"),"to_ary");for(u=0;h>u;u++){if(d=m[u].length,0===d)return p||n;_*=d,_>2147483647&&n.$raise(W.get("RangeError"),"too big to product"),v[u]=d,g[u]=0}e:for(;;){for(f=[],u=0;h>u;u++)f.push(m[u][g[u]]);for(p?p.push(f):(t=e.yield1(i,f))===s?s.$v:t,c=h-1,g[c]++;g[c]===v[c];){if(g[c]=0,--c<0)break e;g[c]++}}return p||n}),e.defn(F,"$push",function(){var e=this,t=a,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var i=0,o=r.length;o>i;i++)e.push(r[i]);return e}),e.defn(F,"$rassoc",function(e){for(var t,n=this,r=0,i=n.length;i>r;r++)if(t=n[r],t.length&&void 0!==t[1]&&t[1]["$=="](e))return t;return a}),e.defn(F,"$reject",S=function(){var e,t,n,r=this,i=S.$$p,o=i||a;if(S.$$p=null,o===a)return(e=(t=r).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=r,n),e).call(t,"reject");for(var l,$=[],u=0,c=r.length;c>u;u++){if((l=o(r[u]))===s)return s.$v;(l===!1||l===a)&&$.push(r[u])}return $}),e.defn(F,"$reject!",M=function(){var e,t,n,r,i=this,o=M.$$p,s=o||a,l=a;return M.$$p=null,s===a?(e=(t=i).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=i,n),e).call(t,"reject!"):(l=i.$length(),(e=(r=i).$delete_if,e.$$p=s.$to_proc(),e).call(r),i.$length()["$=="](l)?a:i)}),e.defn(F,"$replace",function(e){var t,n=this;return e=(t=W.get("Array")["$==="](e))===a||t.$$is_boolean&&1!=t?W.get("Opal").$coerce_to(e,W.get("Array"),"to_ary").$to_a():e.$to_a(),n.splice(0,n.length),n.push.apply(n,e),n}),e.defn(F,"$reverse",function(){var e=this;return e.slice(0).reverse()}),e.defn(F,"$reverse!",function(){var e=this;return e.reverse()}),e.defn(F,"$reverse_each",N=function(){var e,t,n,r,i=this,o=N.$$p,s=o||a;return N.$$p=null,s===a?(e=(t=i).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=i,n),e).call(t,"reverse_each"):((e=(r=i.$reverse()).$each,e.$$p=s.$to_proc(),e).call(r),i)}),e.defn(F,"$rindex",L=function(e){var t=this,n=L.$$p,r=n||a;L.$$p=null;var i,o;if(null!=e){for(i=t.length-1;i>=0&&!(i>=t.length);i--)if(t[i]["$=="](e))return i}else if(r!==a)for(i=t.length-1;i>=0&&!(i>=t.length);i--){if((o=r(t[i]))===s)return s.$v;if(o!==!1&&o!==a)return i}else if(null==e)return t.$enum_for("rindex");return a}),e.defn(F,"$rotate",function(e){var t=this;null==e&&(e=1),e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int");var n,r,i,o;return 1===t.length?t.slice():0===t.length?[]:(n=t.slice(),r=e%n.length,i=n.slice(r),o=n.slice(0,r),i.concat(o))}),e.defn(F,"$rotate!",function(e){var t=this,n=a;return null==e&&(e=1),0===t.length||1===t.length?t:(e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),n=t.$rotate(e),t.$replace(n))}),function(t,$super){function n(){}var r=n=l(t,$super,"SampleRandom",n),i=r.$$proto,o=r.$$scope;return i.rng=a,e.defn(r,"$initialize",function(e){var t=this;return t.rng=e}),e.defn(r,"$rand",function(e){var t,n=this,r=a;return r=o.get("Opal").$coerce_to(n.rng.$rand(e),o.get("Integer"),"to_int"),(t=0>r)===a||t.$$is_boolean&&1!=t||n.$raise(o.get("RangeError"),"random value must be >= 0"),((t=e>r)===a||t.$$is_boolean&&1!=t)&&n.$raise(o.get("RangeError"),"random value must be less than Array size"),r}),a&&"rand"}(W.base,null),e.defn(F,"$sample",function(e,t){var n,r,i=this,o=a,s=a;if((n=void 0===e)!==a&&(!n.$$is_boolean||1==n))return i.$at(W.get("Kernel").$rand(i.length));if((n=void 0===t)===a||n.$$is_boolean&&1!=n?(e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),t=W.get("Opal").$coerce_to(t,W.get("Hash"),"to_hash")):(n=o=W.get("Opal")["$coerce_to?"](e,W.get("Hash"),"to_hash"))===a||n.$$is_boolean&&1!=n?(t=a,e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int")):(t=o,e=a),(n=(r=e!==!1&&e!==a)?0>e:e)===a||n.$$is_boolean&&1!=n||i.$raise(W.get("ArgumentError"),"count must be greater than 0"),t!==!1&&t!==a&&(s=t["$[]"]("random")),s=(n=(r=s!==!1&&s!==a)?s["$respond_to?"]("rand"):s)===a||n.$$is_boolean&&1!=n?W.get("Kernel"):W.get("SampleRandom").$new(s),e===!1||e===a)return i[s.$rand(i.length)];var l,$,u,c,f,d,p,h;switch(e>i.length&&(e=i.length),e){case 0:return[];case 1:return[i[s.$rand(i.length)]];case 2:return c=s.$rand(i.length),f=s.$rand(i.length),c===f&&(f=0===c?c+1:c-1),[i[c],i[f]];default:if(i.length/e>3){for(l=!1,$=0,u=W.get("Array").$new(e),c=1,u[0]=s.$rand(i.length);e>c;){for(d=s.$rand(i.length),f=0;c>f;){for(;d===u[f];){if($++,$>100){l=!0;break}d=s.$rand(i.length)}if(l)break;f++}if(l)break;u[c]=d,c++}if(!l){for(c=0;e>c;)u[c]=i[u[c]],c++;return u}}u=i.slice();for(var g=0;e>g;g++)p=s.$rand(i.length),h=u[g],u[g]=u[p],u[p]=h;return e===i.length?u:u["$[]"](0,e)}}),e.defn(F,"$select",I=function(){var t,n,r,i=this,o=I.$$p,l=o||a;if(I.$$p=null,l===a)return(t=(n=i).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=i,r),t).call(n,"select");for(var $,u,c=[],f=0,d=i.length;d>f;f++){if($=i[f],(u=e.yield1(l,$))===s)return s.$v;u!==!1&&u!==a&&c.push($)}return c}),e.defn(F,"$select!",T=function(){var e,t,n,r,i=this,o=T.$$p,s=o||a;if(T.$$p=null,s===a)return(e=(t=i).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=i,n),e).call(t,"select!");var l=i.length;return(e=(r=i).$keep_if,e.$$p=s.$to_proc(),e).call(r),i.length===l?a:i}),e.defn(F,"$shift",function(e){var t,n=this;return(t=void 0===e)===a||t.$$is_boolean&&1!=t?(e=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),(t=0>e)===a||t.$$is_boolean&&1!=t||n.$raise(W.get("ArgumentError"),"negative array size"),(t=0===n.length)===a||t.$$is_boolean&&1!=t?n.splice(0,e):[]):(t=0===n.length)===a||t.$$is_boolean&&1!=t?n.shift():a}),e.alias(F,"size","length"),e.defn(F,"$shuffle",function(e){var t=this;return t.$dup()["$shuffle!"](e)}),e.defn(F,"$shuffle!",function(e){var t,n,r,i=this,o=i.length;for(void 0!==e&&(e=W.get("Opal")["$coerce_to?"](e,W.get("Hash"),"to_hash"),e!==a&&(e=e["$[]"]("random"),e!==a&&e["$respond_to?"]("rand")&&(t=e)));o;)t?(n=t.$rand(o).$to_int(),0>n&&i.$raise(W.get("RangeError"),"random number too small "+n),n>=o&&i.$raise(W.get("RangeError"),"random number too big "+n)):n=Math.floor(Math.random()*o),r=i[--o],i[o]=i[n],i[n]=r;return i}),e.alias(F,"slice","[]"),e.defn(F,"$slice!",function(e,t){var n=this;return 0>e&&(e+=n.length),null!=t?n.splice(e,t):0>e||e>=n.length?a:n.splice(e,1)[0]}),e.defn(F,"$sort",z=function(){var e,n=this,i=z.$$p,o=i||a;if(z.$$p=null,(e=n.length>1)===a||e.$$is_boolean&&1!=e)return n;o===a&&(o=function(e,t){return e["$<=>"](t)});try{return n.slice().sort(function(e,i){var l=o(e,i);if(l===s)throw s;return l===a&&n.$raise(W.get("ArgumentError"),"comparison of "+e.$inspect()+" with "+i.$inspect()+" failed"),t(l,0)?1:r(l,0)?-1:0})}catch(l){if(l===s)return s.$v;throw l}}),e.defn(F,"$sort!",q=function(){var e,t,n=this,r=q.$$p,i=r||a;q.$$p=null;var o;o=i!==a?(e=(t=n.slice()).$sort,e.$$p=i.$to_proc(),e).call(t):n.slice().$sort(),n.length=0;for(var s=0,l=o.length;l>s;s++)n.push(o[s]);return n}),e.defn(F,"$take",function(e){var t=this;return 0>e&&t.$raise(W.get("ArgumentError")),t.slice(0,e)}),e.defn(F,"$take_while",j=function(){var e=this,t=j.$$p,n=t||a;j.$$p=null;for(var r,i,o=[],l=0,$=e.length;$>l;l++){if(r=e[l],(i=n(r))===s)return s.$v;if(i===!1||i===a)return o;o.push(r)}return o}),e.defn(F,"$to_a",function(){var e=this;return e}),e.alias(F,"to_ary","to_a"),e.defn(F,"$to_h",function(){var t,n,r,i,o=this,a=o.length,s=$([],{});for(t=0;a>t;t++)n=W.get("Opal")["$coerce_to?"](o[t],W.get("Array"),"to_ary"),n.$$is_array||o.$raise(W.get("TypeError"),"wrong element type "+n.$class()+" at "+t+" (expected array)"),2!==n.length&&o.$raise(W.get("ArgumentError"),"wrong array length at "+t+" (expected 2, was "+n.$length()+")"),r=n[0],i=n[1],e.hash_put(s,r,i);return s}),e.alias(F,"to_s","inspect"),e.defn(F,"$transpose",function(){var e,t,n,r=this,i=a,o=a;return(e=r["$empty?"]())===a||e.$$is_boolean&&1!=e?(i=[],o=a,(e=(t=r).$each,e.$$p=(n=function(e){var t,r,s,l=n.$$s||this;return null==e&&(e=a),e=(t=W.get("Array")["$==="](e))===a||t.$$is_boolean&&1!=t?W.get("Opal").$coerce_to(e,W.get("Array"),"to_ary").$to_a():e.$to_a(),(t=o)!==!1&&t!==a?t:o=e.length,(t=e.length["$!="](o))===a||t.$$is_boolean&&1!=t||l.$raise(W.get("IndexError"),"element size differs ("+e.length+" should be "+o),(t=(r=e.length).$times,t.$$p=(s=function(t){var n,r,o,l=(s.$$s||this,a);return null==t&&(t=a),n=t,r=i,l=(o=r["$[]"](n))!==!1&&o!==a?o:r["$[]="](n,[]),l["$<<"](e.$at(t))},s.$$s=l,s),t).call(r)},n.$$s=r,n),e).call(t),i):[]}),e.defn(F,"$uniq",R=function(){var t=this,n=R.$$p,r=n||a;R.$$p=null;var i,o,s,l,u=$([],{});if(r===a)for(i=0,o=t.length;o>i;i++)s=t[i],void 0===e.hash_get(u,s)&&e.hash_put(u,s,s);else for(i=0,o=t.length;o>i;i++)s=t[i],l=e.yield1(r,s),void 0===e.hash_get(u,l)&&e.hash_put(u,l,s);return u.$values()}),e.defn(F,"$uniq!",D=function(){var t=this,n=D.$$p,r=n||a;D.$$p=null;var i,o,s,l,u=t.length,c=$([],{});for(i=0,o=u;o>i;i++)s=t[i],l=r===a?s:e.yield1(r,s),void 0!==e.hash_get(c,l)?(t.splice(i,1),o--,i--):e.hash_put(c,l,s);return t.length===u?a:t}),e.defn(F,"$unshift",function(){var e=this,t=a,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var i=r.length-1;i>=0;i--)e.unshift(r[i]);return e}),e.defn(F,"$values_at",function(){var e,t,n,r=this,i=a,o=a,s=arguments.length-0;0>s&&(s=0);var l=new Array(s);for(o=0;s>o;o++)l[o]=arguments[o+0];return i=[],(e=(t=l).$each,e.$$p=(n=function(e){var t,r,o,s=n.$$s||this,l=a,$=a,u=a;return null==e&&(e=a),(t=e["$kind_of?"](W.get("Range")))===a||t.$$is_boolean&&1!=t?(u=W.get("Opal").$coerce_to(e,W.get("Integer"),"to_int"),i["$<<"](s.$at(u))):(l=W.get("Opal").$coerce_to(e.$last(),W.get("Integer"),"to_int"),$=W.get("Opal").$coerce_to(e.$first(),W.get("Integer"),"to_int"),0>$?($+=s.length,a):(0>l&&(l+=s.length),e["$exclude_end?"]()&&l--,$>l?a:(t=(r=$).$upto,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=a),i["$<<"](t.$at(e))},o.$$s=s,o),t).call(r,l)))},n.$$s=r,n),e).call(t),i}),e.defn(F,"$zip",P=function(){var e,t=this,n=P.$$p,r=n||a,i=a,o=arguments.length-0;0>o&&(o=0);var s=new Array(o);for(i=0;o>i;i++)s[i]=arguments[i+0];P.$$p=null;var l,$,u,c,f,d=[],p=t.length;for(c=0,f=s.length;f>c;c++)$=s[c],$.$$is_array||($.$$is_enumerator?$.$size()===1/0?s[c]=$.$take(p):s[c]=$.$to_a():s[c]=((e=W.get("Opal")["$coerce_to?"]($,W.get("Array"),"to_ary"))!==!1&&e!==a?e:W.get("Opal")["$coerce_to!"]($,W.get("Enumerator"),"each")).$to_a());for(u=0;p>u;u++){for(l=[t[u]],c=0,f=s.length;f>c;c++)$=s[c][u],null==$&&($=a),l[c+1]=$;d[u]=l}if(r!==a){for(u=0;p>u;u++)r(d[u]);return a}return d}),a&&"zip"}(o.base,Array)},Opal.modules["corelib/hash"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,i=e.breaker,o=(e.slice,e.klass);return e.add_stubs(["$require","$include","$coerce_to?","$[]","$merge!","$allocate","$raise","$==","$coerce_to!","$lambda?","$abs","$arity","$call","$enum_for","$size","$inspect","$flatten","$eql?","$default","$to_proc","$dup","$===","$default_proc","$default_proc=","$default=","$alias_method"]),t.$require("corelib/enumerable"),function(t,$super){function n(){}var a,s,l,$,u,c,f,d,p,h,g,v,m,_,y=n=o(t,$super,"Hash",n),b=y.$$proto,w=y.$$scope;b.proc=b.none=r,y.$include(w.get("Enumerable")),b.$$is_hash=!0,e.defs(y,"$[]",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var i=new Array(n);for(t=0;n>t;t++)i[t]=arguments[t+0];var o,a,s=i.length;if(1===s){if(o=w.get("Opal")["$coerce_to?"](i["$[]"](0),w.get("Hash"),"to_hash"),o!==r)return e.$allocate()["$merge!"](o);for(i=w.get("Opal")["$coerce_to?"](i["$[]"](0),w.get("Array"),"to_ary"),i===r&&e.$raise(w.get("ArgumentError"),"odd number of arguments for Hash"),s=i.length,o=e.$allocate(),a=0;s>a;a++)if(i[a].$$is_array)switch(i[a].length){case 1:o.$store(i[a][0],r);break;case 2:o.$store(i[a][0],i[a][1]);break;default:e.$raise(w.get("ArgumentError"),"invalid number of elements ("+i[a].length+" for 1..2)")}return o}for(s%2!==0&&e.$raise(w.get("ArgumentError"),"odd number of arguments for Hash"),o=e.$allocate(),a=0;s>a;a+=2)o.$store(i[a],i[a+1]);return o}),e.defs(y,"$allocate",function(){var t=this,n=new t.$$alloc;return e.hash_init(n),n.none=r,n.proc=r,n}),e.defs(y,"$try_convert",function(e){return w.get("Opal")["$coerce_to?"](e,w.get("Hash"),"to_hash")}),e.defn(y,"$initialize",a=function(e){var t=this,n=a.$$p,i=n||r;return a.$$p=null,void 0!==e&&i!==r&&t.$raise(w.get("ArgumentError"),"wrong number of arguments (1 for 0)"),t.none=void 0===e?r:e,t.proc=i,t}),e.defn(y,"$==",function(t){var n=this;if(n===t)return!0;if(!t.$$is_hash)return!1;if(n.$$keys.length!==t.$$keys.length)return!1;for(var r,i,o,a=0,s=n.$$keys,l=s.length;l>a;a++)if(r=s[a],r.$$is_string?(i=n.$$smap[r],o=t.$$smap[r]):(i=r.value,o=e.hash_get(t,r.key)),void 0===o||!i["$eql?"](o))return!1;return!0}),e.defn(y,"$[]",function(t){var n=this,r=e.hash_get(n,t);return void 0!==r?r:n.$default(t)}),e.defn(y,"$[]=",function(t,n){var r=this;return e.hash_put(r,t,n),n}),e.defn(y,"$assoc",function(e){for(var t,n=this,i=0,o=n.$$keys,a=o.length;a>i;i++)if(t=o[i],t.$$is_string){if(t["$=="](e))return[t,n.$$smap[t]]}else if(t.key["$=="](e))return[t.key,t.value];return r}),e.defn(y,"$clear",function(){var t=this;return e.hash_init(t),t}),e.defn(y,"$clone",function(){var t=this,n=new t.$$class.$$alloc;return e.hash_init(n),e.hash_clone(t,n),n}),e.defn(y,"$default",function(e){var t=this;return void 0!==e&&t.proc!==r?t.proc.$call(t,e):t.none}),e.defn(y,"$default=",function(e){var t=this;return t.proc=r,t.none=e,e}),e.defn(y,"$default_proc",function(){var e=this;return e.proc}),e.defn(y,"$default_proc=",function(e){var t=this;return e!==r&&(e=w.get("Opal")["$coerce_to!"](e,w.get("Proc"),"to_proc"),e["$lambda?"]()&&2!==e.$arity().$abs()&&t.$raise(w.get("TypeError"),"default_proc takes two arguments")),t.none=r,t.proc=e,e}),e.defn(y,"$delete",s=function(t){var n=this,i=s.$$p,o=i||r;s.$$p=null;var a=e.hash_delete(n,t);return void 0!==a?a:o!==r?o.$call(t):r}),e.defn(y,"$delete_if",l=function(){var t,n,o,a=this,s=l.$$p,$=s||r;if(l.$$p=null,$===!1||$===r)return(t=(n=a).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=a,o),t).call(n,"delete_if");for(var u,c,f,d=0,p=a.$$keys,h=p.length;h>d;d++){if(u=p[d],u.$$is_string?c=a.$$smap[u]:(c=u.value,u=u.key),f=$(u,c),f===i)return i.$v;f!==!1&&f!==r&&void 0!==e.hash_delete(a,u)&&(h--,d--)}return a}),e.alias(y,"dup","clone"),e.defn(y,"$each",$=function(){var t,n,o,a=this,s=$.$$p,l=s||r;if($.$$p=null,l===!1||l===r)return(t=(n=a).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=a,o),t).call(n,"each");for(var u,c,f,d=0,p=a.$$keys,h=p.length;h>d;d++)if(u=p[d],u.$$is_string?c=a.$$smap[u]:(c=u.value,u=u.key),f=e.yield1(l,[u,c]),f===i)return i.$v;return a}),e.defn(y,"$each_key",u=function(){var e,t,n,o=this,a=u.$$p,s=a||r;if(u.$$p=null,s===!1||s===r)return(e=(t=o).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=o,n),e).call(t,"each_key");for(var l,$=0,c=o.$$keys,f=c.length;f>$;$++)if(l=c[$],s(l.$$is_string?l:l.key)===i)return i.$v;return o}),e.alias(y,"each_pair","each"),e.defn(y,"$each_value",c=function(){var e,t,n,o=this,a=c.$$p,s=a||r;if(c.$$p=null,s===!1||s===r)return(e=(t=o).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=o,n),e).call(t,"each_value");for(var l,$=0,u=o.$$keys,f=u.length;f>$;$++)if(l=u[$],s(l.$$is_string?o.$$smap[l]:l.value)===i)return i.$v;return o}),e.defn(y,"$empty?",function(){var e=this;return 0===e.$$keys.length}),e.alias(y,"eql?","=="),e.defn(y,"$fetch",f=function(t,n){var o=this,a=f.$$p,s=a||r;f.$$p=null;var l=e.hash_get(o,t);return void 0!==l?l:s!==r?(l=s(t),l===i?i.$v:l):void 0!==n?n:o.$raise(w.get("KeyError"),"key not found: "+t.$inspect())}),e.defn(y,"$flatten",function(e){var t=this;null==e&&(e=1),e=w.get("Opal")["$coerce_to!"](e,w.get("Integer"),"to_int");for(var n,r,i=[],o=0,a=t.$$keys,s=a.length;s>o;o++)if(n=a[o],n.$$is_string?r=t.$$smap[n]:(r=n.value,n=n.key),i.push(n),r.$$is_array){if(1===e){i.push(r);continue}i=i.concat(r.$flatten(e-2))}else i.push(r);return i}),e.defn(y,"$has_key?",function(t){var n=this;return void 0!==e.hash_get(n,t)}),e.defn(y,"$has_value?",function(e){for(var t,n=this,r=0,i=n.$$keys,o=i.length;o>r;r++)if(t=i[r],(t.$$is_string?n.$$smap[t]:t.value)["$=="](e))return!0;return!1}),e.defn(y,"$hash",function(){var t,n,r=this,i=void 0===e.hash_ids,o=r.$object_id(),a=["Hash"];try{if(i&&(e.hash_ids={}),e.hash_ids.hasOwnProperty(o))return"self";for(t in e.hash_ids)if(e.hash_ids.hasOwnProperty(t)&&(n=e.hash_ids[t],r["$eql?"](n)))return"self";e.hash_ids[o]=r;for(var s=0,l=r.$$keys,$=l.length;$>s;s++)t=l[s],t.$$is_string?a.push([t,r.$$smap[t].$hash()]):a.push([t.key_hash,t.value.$hash()]);return a.sort().join()}finally{i&&delete e.hash_ids}}),e.alias(y,"include?","has_key?"),e.defn(y,"$index",function(e){for(var t,n,i=this,o=0,a=i.$$keys,s=a.length;s>o;o++)if(t=a[o],t.$$is_string?n=i.$$smap[t]:(n=t.value,t=t.key),n["$=="](e))return t;return r}),e.defn(y,"$indexes",function(){var t=this,n=r,i=arguments.length-0;0>i&&(i=0);var o=new Array(i);for(n=0;i>n;n++)o[n]=arguments[n+0];for(var a,s,l=[],$=0,u=o.length;u>$;$++)a=o[$],s=e.hash_get(t,a),void 0!==s?l.push(s):l.push(t.$default());return l}),e.alias(y,"indices","indexes");var x;return e.defn(y,"$inspect",function(){var e=this,t=void 0===x,n=e.$object_id(),r=[];try{if(t&&(x={}),x.hasOwnProperty(n))return"{...}";x[n]=!0;for(var i,o,a=0,s=e.$$keys,l=s.length;l>a;a++)i=s[a],i.$$is_string?o=e.$$smap[i]:(o=i.value,i=i.key),r.push(i.$inspect()+"=>"+o.$inspect());return"{"+r.join(", ")+"}"}finally{t&&(x=void 0)}}),e.defn(y,"$invert",function(){for(var t,n,r=this,i=e.hash(),o=0,a=r.$$keys,s=a.length;s>o;o++)t=a[o],t.$$is_string?n=r.$$smap[t]:(n=t.value,t=t.key),e.hash_put(i,n,t);return i}),e.defn(y,"$keep_if",d=function(){var t,n,o,a=this,s=d.$$p,l=s||r;if(d.$$p=null,l===!1||l===r)return(t=(n=a).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=a,o),t).call(n,"keep_if");for(var $,u,c,f=0,p=a.$$keys,h=p.length;h>f;f++){if($=p[f],$.$$is_string?u=a.$$smap[$]:(u=$.value,$=$.key),c=l($,u),c===i)return i.$v;(c===!1||c===r)&&void 0!==e.hash_delete(a,$)&&(h--,f--)}return a}),e.alias(y,"key","index"),e.alias(y,"key?","has_key?"),e.defn(y,"$keys",function(){for(var e,t=this,n=[],r=0,i=t.$$keys,o=i.length;o>r;r++)e=i[r],e.$$is_string?n.push(e):n.push(e.key);return n}),e.defn(y,"$length",function(){var e=this;return e.$$keys.length}),e.alias(y,"member?","has_key?"),e.defn(y,"$merge",p=function(e){var t,n,i=this,o=p.$$p,a=o||r;return p.$$p=null,(t=(n=i.$dup())["$merge!"],t.$$p=a.$to_proc(),t).call(n,e)}),e.defn(y,"$merge!",h=function(t){var n=this,i=h.$$p,o=i||r;h.$$p=null,w.get("Hash")["$==="](t)||(t=w.get("Opal")["$coerce_to!"](t,w.get("Hash"),"to_hash"));var a,s,l,$,u=t.$$keys,c=u.length;if(o===r){for(a=0;c>a;a++)s=u[a],s.$$is_string?$=t.$$smap[s]:($=s.value,s=s.key),e.hash_put(n,s,$);return n}for(a=0;c>a;a++)s=u[a],s.$$is_string?$=t.$$smap[s]:($=s.value,s=s.key),l=e.hash_get(n,s),void 0!==l?e.hash_put(n,s,o(s,l,$)):e.hash_put(n,s,$);return n}),e.defn(y,"$rassoc",function(e){for(var t,n,i=this,o=0,a=i.$$keys,s=a.length;s>o;o++)if(t=a[o],t.$$is_string?n=i.$$smap[t]:(n=t.value,t=t.key),n["$=="](e))return[t,n];return r}),e.defn(y,"$rehash",function(){var t=this;return e.hash_rehash(t),t}),e.defn(y,"$reject",g=function(){var t,n,o,a=this,s=g.$$p,l=s||r;if(g.$$p=null,l===!1||l===r)return(t=(n=a).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=a,o),t).call(n,"reject");for(var $,u,c,f=e.hash(),d=0,p=a.$$keys,h=p.length;h>d;d++){if($=p[d],$.$$is_string?u=a.$$smap[$]:(u=$.value,$=$.key),c=l($,u),c===i)return i.$v;(c===!1||c===r)&&e.hash_put(f,$,u)}return f}),e.defn(y,"$reject!",v=function(){var t,n,o,a=this,s=v.$$p,l=s||r;if(v.$$p=null,l===!1||l===r)return(t=(n=a).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=a,o),t).call(n,"reject!");for(var $,u,c,f=!1,d=0,p=a.$$keys,h=p.length;h>d;d++){if($=p[d],$.$$is_string?u=a.$$smap[$]:(u=$.value,$=$.key),c=l($,u),c===i)return i.$v;c!==!1&&c!==r&&void 0!==e.hash_delete(a,$)&&(f=!0,h--,d--)}return f?a:r}),e.defn(y,"$replace",function(t){var n,i,o=this;t=w.get("Opal")["$coerce_to!"](t,w.get("Hash"),"to_hash"),e.hash_init(o);for(var a,s,l=0,$=t.$$keys,u=$.length;u>l;l++)a=$[l],a.$$is_string?s=t.$$smap[a]:(s=a.value,a=a.key),e.hash_put(o,a,s);return(n=t.$default_proc())===r||n.$$is_boolean&&1!=n?(n=[t.$default()],i=o,i["$default="].apply(i,n),n[n.length-1]):(n=[t.$default_proc()],i=o,i["$default_proc="].apply(i,n),n[n.length-1]),o}),e.defn(y,"$select",m=function(){var t,n,o,a=this,s=m.$$p,l=s||r;if(m.$$p=null,l===!1||l===r)return(t=(n=a).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=a,o),t).call(n,"select");for(var $,u,c,f=e.hash(),d=0,p=a.$$keys,h=p.length;h>d;d++){if($=p[d],$.$$is_string?u=a.$$smap[$]:(u=$.value,$=$.key),c=l($,u),c===i)return i.$v;c!==!1&&c!==r&&e.hash_put(f,$,u)}return f}),e.defn(y,"$select!",_=function(){var t,n,o,a=this,s=_.$$p,l=s||r;if(_.$$p=null,l===!1||l===r)return(t=(n=a).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=a,o),t).call(n,"select!");for(var $,u,c,f=r,d=0,p=a.$$keys,h=p.length;h>d;d++){if($=p[d],$.$$is_string?u=a.$$smap[$]:(u=$.value,$=$.key),c=l($,u),c===i)return i.$v;(c===!1||c===r)&&(void 0!==e.hash_delete(a,$)&&(h--,d--),f=a)}return f}),e.defn(y,"$shift",function(){var t,n=this,i=n.$$keys;return i.length>0?(t=i[0],t=t.$$is_string?t:t.key,[t,e.hash_delete(n,t)]):n.$default(r)}),e.alias(y,"size","length"),y.$alias_method("store","[]="),e.defn(y,"$to_a",function(){for(var e,t,n=this,r=[],i=0,o=n.$$keys,a=o.length;a>i;i++)e=o[i],e.$$is_string?t=n.$$smap[e]:(t=e.value,e=e.key),r.push([e,t]);return r}),e.defn(y,"$to_h",function(){var t=this;if(t.$$class===e.Hash)return t;var n=new e.Hash.$$alloc;return e.hash_init(n),e.hash_clone(t,n),n}),e.defn(y,"$to_hash",function(){var e=this;return e}),e.alias(y,"to_s","inspect"),e.alias(y,"update","merge!"),e.alias(y,"value?","has_value?"),e.alias(y,"values_at","indexes"),e.defn(y,"$values",function(){for(var e,t=this,n=[],r=0,i=t.$$keys,o=i.length;o>r;r++)e=i[r],e.$$is_string?n.push(t.$$smap[e]):n.push(e.value);return n}),r&&"values"}(n.base,null)},Opal.modules["corelib/number"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function s(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function l(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.dynamic_require_severity="ignore";var $=e.top,u=e,c=e.nil,f=e.breaker,d=(e.slice,e.klass);return e.add_stubs(["$require","$bridge","$raise","$class","$Float","$respond_to?","$coerce_to!","$__coerced__","$===","$!","$>","$**","$new","$<","$to_f","$==","$nan?","$infinite?","$enum_for","$+","$-","$gcd","$lcm","$/","$frexp","$to_i","$ldexp","$rationalize","$*","$<<","$to_r","$-@","$size","$<=","$>="]),$.$require("corelib/numeric"),function($,$super){function u(){}var p,h,g,v,m,_,y,b,w,x,k=u=d($,$super,"Number",u),E=(k.$$proto,k.$$scope);return E.get("Opal").$bridge(k,Number),Number.prototype.$$is_number=!0,e.defn(k,"$coerce",function(e){var t=this;if(e===c)t.$raise(E.get("TypeError"),"can't convert "+e.$class()+" into Float");else{if(e.$$is_string)return[t.$Float(e),t];if(e["$respond_to?"]("to_f"))return[E.get("Opal")["$coerce_to!"](e,E.get("Float"),"to_f"),t];if(e.$$is_number)return[e,t];t.$raise(E.get("TypeError"),"can't convert "+e.$class()+" into Float")}}),e.defn(k,"$__id__",function(){var e=this;return 2*e+1}),e.alias(k,"object_id","__id__"),e.defn(k,"$+",function(e){var t=this;return e.$$is_number?t+e:t.$__coerced__("+",e)}),e.defn(k,"$-",function(e){var t=this;return e.$$is_number?t-e:t.$__coerced__("-",e)}),e.defn(k,"$*",function(e){var t=this;return e.$$is_number?t*e:t.$__coerced__("*",e)}),e.defn(k,"$/",function(e){var t=this;return e.$$is_number?t/e:t.$__coerced__("/",e)}),e.alias(k,"fdiv","/"),e.defn(k,"$%",function(e){var t=this;return e.$$is_number?e==-(1/0)?e:0!=e?0>e||0>t?(t%e+e)%e:t%e:void t.$raise(E.get("ZeroDivisionError"),"divided by 0"):t.$__coerced__("%",e)}),e.defn(k,"$&",function(e){var t=this;return e.$$is_number?t&e:t.$__coerced__("&",e)}),e.defn(k,"$|",function(e){var t=this;return e.$$is_number?t|e:t.$__coerced__("|",e)}),e.defn(k,"$^",function(e){var t=this;return e.$$is_number?t^e:t.$__coerced__("^",e)}),e.defn(k,"$<",function(e){var t=this;return e.$$is_number?e>t:t.$__coerced__("<",e)}),e.defn(k,"$<=",function(e){var t=this;return e.$$is_number?e>=t:t.$__coerced__("<=",e)}),e.defn(k,"$>",function(e){var t=this;return e.$$is_number?t>e:t.$__coerced__(">",e)}),e.defn(k,"$>=",function(e){var t=this;return e.$$is_number?t>=e:t.$__coerced__(">=",e)}),e.defn(k,"$<=>",function(t){var n=this;try{return t.$$is_number?isNaN(n)||isNaN(t)?c:n>t?1:t>n?-1:0:n.$__coerced__("<=>",t)}catch(r){if(!e.rescue(r,[E.get("ArgumentError")]))throw r;try{return c}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(k,"$<<",function(e){var t=this;return e=E.get("Opal")["$coerce_to!"](e,E.get("Integer"),"to_int"),e>0?t<<e:t>>-e}),e.defn(k,"$>>",function(e){var t=this;return e=E.get("Opal")["$coerce_to!"](e,E.get("Integer"),"to_int"),e>0?t>>e:t<<-e}),e.defn(k,"$[]",function(e){var t=this;return e=E.get("Opal")["$coerce_to!"](e,E.get("Integer"),"to_int"),e<E.get("Integer").$$scope.get("MIN")||e>E.get("Integer").$$scope.get("MAX")?0:0>t?(~t+1>>e)%2:(t>>e)%2}),e.defn(k,"$+@",function(){var e=this;return+e}),e.defn(k,"$-@",function(){var e=this;return-e}),e.defn(k,"$~",function(){var e=this;return~e}),e.defn(k,"$**",function(e){var r,i,o,a=this;return(r=E.get("Integer")["$==="](e))===c||r.$$is_boolean&&1!=r?(r=(i=n(a,0))?(o=E.get("Float")["$==="](e))!==!1&&o!==c?o:E.get("Rational")["$==="](e):n(a,0))===c||r.$$is_boolean&&1!=r?(r=null!=e.$$is_number)===c||r.$$is_boolean&&1!=r?a.$__coerced__("**",e):Math.pow(a,e):E.get("Complex").$new(a,0)["$**"](e.$to_f()):(r=(i=E.get("Integer")["$==="](a)["$!"]())!==!1&&i!==c?i:t(e,0))===c||r.$$is_boolean&&1!=r?E.get("Rational").$new(a,1)["$**"](e):Math.pow(a,e)}),e.defn(k,"$==",function(e){var t=this;return e.$$is_number?t==Number(e):e["$respond_to?"]("==")?e["$=="](t):!1}),e.defn(k,"$abs",function(){var e=this;return Math.abs(e)}),e.defn(k,"$abs2",function(){var e=this;return Math.abs(e*e)}),e.defn(k,"$angle",function(){var e,t=this;return(e=t["$nan?"]())===c||e.$$is_boolean&&1!=e?0==t?1/t>0?0:Math.PI:0>t?Math.PI:0:t}),e.alias(k,"arg","angle"),e.alias(k,"phase","angle"),e.defn(k,"$bit_length",function(){var e,t=this;if(((e=E.get("Integer")["$==="](t))===c||e.$$is_boolean&&1!=e)&&t.$raise(E.get("NoMethodError").$new("undefined method `bit_length` for "+t+":Float","bit_length")),0===t||-1===t)return 0;for(var n=0,r=0>t?~t:t;0!=r;)n+=1,r>>>=1;return n}),e.defn(k,"$ceil",function(){var e=this;return Math.ceil(e)}),e.defn(k,"$chr",function(e){var t=this;return String.fromCharCode(t)}),e.defn(k,"$denominator",p=function(){var t,n,r=this,i=p.$$p,o=c,a=c;for(p.$$p=null,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return(t=(n=r["$nan?"]())!==!1&&n!==c?n:r["$infinite?"]())===c||t.$$is_boolean&&1!=t?e.find_super_dispatcher(r,"denominator",p,i).apply(r,o):1}),e.defn(k,"$downto",h=function(e){var n,o,a,s=this,l=h.$$p,$=l||c;if(h.$$p=null,$===c)return(n=(o=s).$enum_for,n.$$p=(a=function(){var n,o=a.$$s||this;return((n=E.get("Numeric")["$==="](e))===c||n.$$is_boolean&&1!=n)&&o.$raise(E.get("ArgumentError"),"comparison of "+o.$class()+" with "+e.$class()+" failed"),t(e,o)?0:r(i(o,e),1)},a.$$s=s,a),n).call(o,"downto",e);e.$$is_number||s.$raise(E.get("ArgumentError"),"comparison of "+s.$class()+" with "+e.$class()+" failed");for(var u=s;u>=e;u--)if($(u)===f)return f.$v;return s}),e.alias(k,"eql?","=="),e.defn(k,"$equal?",function(e){var t,n=this;return(t=n["$=="](e))!==!1&&t!==c?t:isNaN(n)&&isNaN(e)}),e.defn(k,"$even?",function(){var e=this;return e%2===0}),e.defn(k,"$floor",function(){var e=this;return Math.floor(e)}),e.defn(k,"$gcd",function(e){var t,n=this;((t=E.get("Integer")["$==="](e))===c||t.$$is_boolean&&1!=t)&&n.$raise(E.get("TypeError"),"not an integer");for(var r=Math.abs(n),i=Math.abs(e);r>0;){var o=r;r=i%r,i=o}return i}),e.defn(k,"$gcdlcm",function(e){var t=this;return[t.$gcd(),t.$lcm()]}),e.defn(k,"$integer?",function(){var e=this;return e%1===0}),e.defn(k,"$is_a?",g=function(t){var n,r,i=this,o=g.$$p,a=c,s=c;for(g.$$p=null,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return((n=(r=t["$=="](E.get("Fixnum")))?E.get("Integer")["$==="](i):t["$=="](E.get("Fixnum")))===c||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](E.get("Integer")))?E.get("Integer")["$==="](i):t["$=="](E.get("Integer")))===c||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](E.get("Float")))?E.get("Float")["$==="](i):t["$=="](E.get("Float")))===c||n.$$is_boolean&&1!=n)?e.find_super_dispatcher(i,"is_a?",g,o).apply(i,a):!0}),e.alias(k,"kind_of?","is_a?"),e.defn(k,"$instance_of?",v=function(t){var n,r,i=this,o=v.$$p,a=c,s=c;for(v.$$p=null,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return((n=(r=t["$=="](E.get("Fixnum")))?E.get("Integer")["$==="](i):t["$=="](E.get("Fixnum")))===c||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](E.get("Integer")))?E.get("Integer")["$==="](i):t["$=="](E.get("Integer")))===c||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](E.get("Float")))?E.get("Float")["$==="](i):t["$=="](E.get("Float")))===c||n.$$is_boolean&&1!=n)?e.find_super_dispatcher(i,"instance_of?",v,o).apply(i,a):!0}),e.defn(k,"$lcm",function(e){var t,n=this;return((t=E.get("Integer")["$==="](e))===c||t.$$is_boolean&&1!=t)&&n.$raise(E.get("TypeError"),"not an integer"),0==n||0==e?0:Math.abs(n*e/n.$gcd(e))}),e.alias(k,"magnitude","abs"),e.alias(k,"modulo","%"),e.defn(k,"$next",function(){var e=this;return e+1}),e.defn(k,"$nonzero?",function(){var e=this;return 0==e?c:e}),e.defn(k,"$numerator",m=function(){var t,n,r=this,i=m.$$p,o=c,a=c;for(m.$$p=null,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return(t=(n=r["$nan?"]())!==!1&&n!==c?n:r["$infinite?"]())===c||t.$$is_boolean&&1!=t?e.find_super_dispatcher(r,"numerator",m,i).apply(r,o):r}),e.defn(k,"$odd?",function(){var e=this;return e%2!==0}),e.defn(k,"$ord",function(){var e=this;return e}),e.defn(k,"$pred",function(){var e=this;return e-1}),e.defn(k,"$quo",_=function(t){var n,r=this,i=_.$$p,a=c,s=c;for(_.$$p=null,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return(n=E.get("Integer")["$==="](r))===c||n.$$is_boolean&&1!=n?o(r,t):e.find_super_dispatcher(r,"quo",_,i).apply(r,a)}),e.defn(k,"$rationalize",function(t){var n,r,o=this,s=c,l=c;return arguments.length>1&&o.$raise(E.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),(n=E.get("Integer")["$==="](o))===c||n.$$is_boolean&&1!=n?(n=o["$infinite?"]())===c||n.$$is_boolean&&1!=n?(n=o["$nan?"]())===c||n.$$is_boolean&&1!=n?(n=null==t)===c||n.$$is_boolean&&1!=n?o.$to_r().$rationalize(t):(r=E.get("Math").$frexp(o),n=e.to_ary(r),s=null==n[0]?c:n[0],l=null==n[1]?c:n[1],r,s=E.get("Math").$ldexp(s,E.get("Float").$$scope.get("MANT_DIG")).$to_i(),
l=i(l,E.get("Float").$$scope.get("MANT_DIG")),E.get("Rational").$new(a(2,s),1["$<<"](i(1,l))).$rationalize(E.get("Rational").$new(1,1["$<<"](i(1,l))))):o.$raise(E.get("FloatDomainError"),"NaN"):o.$raise(E.get("FloatDomainError"),"Infinity"):E.get("Rational").$new(o,1)}),e.defn(k,"$round",function(a){var $,u,f=this,d=c,p=c;if(($=E.get("Integer")["$==="](f))===c||$.$$is_boolean&&1!=$){if(u=f["$nan?"](),($=u!==!1&&u!==c?null==a:u)===c||$.$$is_boolean&&1!=$||f.$raise(E.get("FloatDomainError"),"NaN"),a=E.get("Opal")["$coerce_to!"](a||0,E.get("Integer"),"to_int"),s(a,0))($=f["$nan?"]())===c||$.$$is_boolean&&1!=$?($=f["$infinite?"]())===c||$.$$is_boolean&&1!=$||f.$raise(E.get("FloatDomainError"),"Infinity"):f.$raise(E.get("RangeError"),"NaN");else{if(a["$=="](0))return Math.round(f);if(($=(u=f["$nan?"]())!==!1&&u!==c?u:f["$infinite?"]())!==c&&(!$.$$is_boolean||1==$))return f}return u=E.get("Math").$frexp(f),$=e.to_ary(u),d=null==$[0]?c:$[0],p=null==$[1]?c:$[1],u,l(a,i(r(E.get("Float").$$scope.get("DIG"),2),function(){return t(p,0)?o(p,4):i(o(p,3),1)}()))?f:n(a,function(){return t(p,0)?r(o(p,3),1):o(p,4)}()["$-@"]())?0:Math.round(f*Math.pow(10,a))/Math.pow(10,a)}if(($=null==a)!==c&&(!$.$$is_boolean||1==$))return f;if(u=E.get("Float")["$==="](a),($=u!==!1&&u!==c?a["$infinite?"]():u)===c||$.$$is_boolean&&1!=$||f.$raise(E.get("RangeError"),"Infinity"),a=E.get("Opal")["$coerce_to!"](a,E.get("Integer"),"to_int"),n(a,E.get("Integer").$$scope.get("MIN"))&&f.$raise(E.get("RangeError"),"out of bounds"),($=a>=0)!==c&&(!$.$$is_boolean||1==$))return f;if(a=a["$-@"](),.415241*a-.125>f.$size())return 0;var h=Math.pow(10,a),g=Math.floor((Math.abs(g)+h/2)/h)*h;return 0>f?-g:g}),e.defn(k,"$step",y=function(e,t){var n,r=this,i=y.$$p,o=i||c;if(null==t&&(t=1),y.$$p=null,o===!1||o===c)return r.$enum_for("step",e,t);(n=0==t)===c||n.$$is_boolean&&1!=n||r.$raise(E.get("ArgumentError"),"step cannot be 0");var a=r;if(e===1/0||e===-(1/0))return o(a),r;if(t>0)for(;e>=a;)o(a),a+=t;else for(;a>=e;)o(a),a+=t;return r}),e.alias(k,"succ","next"),e.defn(k,"$times",b=function(){var e=this,t=b.$$p,n=t||c;if(b.$$p=null,n===!1||n===c)return e.$enum_for("times");for(var r=0;e>r;r++)if(n(r)===f)return f.$v;return e}),e.defn(k,"$to_f",function(){var e=this;return e}),e.defn(k,"$to_i",function(){var e=this;return parseInt(e,10)}),e.alias(k,"to_int","to_i"),e.defn(k,"$to_r",function(){var t,n,r=this,o=c,s=c;return(t=E.get("Integer")["$==="](r))===c||t.$$is_boolean&&1!=t?(n=E.get("Math").$frexp(r),t=e.to_ary(n),o=null==t[0]?c:t[0],s=null==t[1]?c:t[1],n,o=E.get("Math").$ldexp(o,E.get("Float").$$scope.get("MANT_DIG")).$to_i(),s=i(s,E.get("Float").$$scope.get("MANT_DIG")),a(o,E.get("Float").$$scope.get("RADIX")["$**"](s)).$to_r()):E.get("Rational").$new(r,1)}),e.defn(k,"$to_s",function(e){var r,i,o=this;return null==e&&(e=10),(r=(i=n(e,2))!==!1&&i!==c?i:t(e,36))===c||r.$$is_boolean&&1!=r||o.$raise(E.get("ArgumentError"),"base must be between 2 and 36"),o.toString(e)}),e.alias(k,"truncate","to_i"),e.alias(k,"inspect","to_s"),e.defn(k,"$divmod",w=function(t){var n,r,i=this,o=w.$$p,a=c,s=c;for(w.$$p=null,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return(n=(r=i["$nan?"]())!==!1&&r!==c?r:t["$nan?"]())===c||n.$$is_boolean&&1!=n?(n=i["$infinite?"]())===c||n.$$is_boolean&&1!=n?e.find_super_dispatcher(i,"divmod",w,o).apply(i,a):i.$raise(E.get("FloatDomainError"),"Infinity"):i.$raise(E.get("FloatDomainError"),"NaN")}),e.defn(k,"$upto",x=function(e){var t,o,a,s=this,l=x.$$p,$=l||c;if(x.$$p=null,$===c)return(t=(o=s).$enum_for,t.$$p=(a=function(){var t,o=a.$$s||this;return((t=E.get("Numeric")["$==="](e))===c||t.$$is_boolean&&1!=t)&&o.$raise(E.get("ArgumentError"),"comparison of "+o.$class()+" with "+e.$class()+" failed"),n(e,o)?0:r(i(e,o),1)},a.$$s=s,a),t).call(o,"upto",e);e.$$is_number||s.$raise(E.get("ArgumentError"),"comparison of "+s.$class()+" with "+e.$class()+" failed");for(var u=s;e>=u;u++)if($(u)===f)return f.$v;return s}),e.defn(k,"$zero?",function(){var e=this;return 0==e}),e.defn(k,"$size",function(){return 4}),e.defn(k,"$nan?",function(){var e=this;return isNaN(e)}),e.defn(k,"$finite?",function(){var e=this;return e!=1/0&&e!=-(1/0)&&!isNaN(e)}),e.defn(k,"$infinite?",function(){var e=this;return e==1/0?1:e==-(1/0)?-1:c}),e.defn(k,"$positive?",function(){var e=this;return e==1/0||1/e>0}),e.defn(k,"$negative?",function(){var e=this;return e==-(1/0)||0>1/e}),c&&"negative?"}(u.base,u.get("Numeric")),e.cdecl(u,"Fixnum",u.get("Number")),function(t,$super){function n(){}var r=n=d(t,$super,"Integer",n),i=(r.$$proto,r.$$scope);return e.defs(r,"$===",function(e){return e.$$is_number?e%1===0:!1}),e.cdecl(i,"MAX",Math.pow(2,30)-1),e.cdecl(i,"MIN",-Math.pow(2,30))}(u.base,u.get("Numeric")),function(t,$super){function n(){}var r,i=n=d(t,$super,"Float",n),o=(i.$$proto,i.$$scope);return e.defs(i,"$===",function(e){return!!e.$$is_number}),e.cdecl(o,"INFINITY",1/0),e.cdecl(o,"MAX",Number.MAX_VALUE),e.cdecl(o,"MIN",Number.MIN_VALUE),e.cdecl(o,"NAN",NaN),e.cdecl(o,"DIG",15),e.cdecl(o,"MANT_DIG",53),e.cdecl(o,"RADIX",2),(r="undefined"!=typeof Number.EPSILON)===c||r.$$is_boolean&&1!=r?e.cdecl(o,"EPSILON",2.220446049250313e-16):e.cdecl(o,"EPSILON",Number.EPSILON)}(u.base,u.get("Numeric"))},Opal.modules["corelib/range"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var i=e.top,o=e,a=e.nil,s=e.breaker,l=(e.slice,e.klass);return e.add_stubs(["$require","$include","$attr_reader","$<=>","$raise","$include?","$<=","$<","$enum_for","$upto","$to_proc","$succ","$!","$==","$===","$exclude_end?","$eql?","$begin","$end","$-","$abs","$to_i","$inspect"]),i.$require("corelib/enumerable"),function(i,$super){function o(){}var $,u,c,f=o=l(i,$super,"Range",o),d=f.$$proto,p=f.$$scope;return d.begin=d.exclude=d.end=a,f.$include(p.get("Enumerable")),d.$$is_range=!0,f.$attr_reader("begin","end"),e.defn(f,"$initialize",function(e,t,n){var r,i=this;return null==n&&(n=!1),((r=e["$<=>"](t))===a||r.$$is_boolean&&1!=r)&&i.$raise(p.get("ArgumentError")),i.begin=e,i.end=t,i.exclude=n}),e.defn(f,"$==",function(e){var t=this;return e.$$is_range?t.exclude===e.exclude&&t.begin==e.begin&&t.end==e.end:!1}),e.defn(f,"$===",function(e){var t=this;return t["$include?"](e)}),e.defn(f,"$cover?",function(e){var r,i,o=this;return(r=t(o.begin,e))?function(){return(i=o.exclude)===a||i.$$is_boolean&&1!=i?t(e,o.end):n(e,o.end)}():t(o.begin,e)}),e.defn(f,"$each",$=function(){var t,r,i,o=this,l=$.$$p,u=l||a,c=a,f=a;if($.$$p=null,u===a)return o.$enum_for("each");var d,h,g;if(o.begin.$$is_number&&o.end.$$is_number){for((o.begin%1!==0||o.end%1!==0)&&o.$raise(p.get("TypeError"),"can't iterate from Float"),d=o.begin,h=o.end+function(){return(t=o.exclude)===a||t.$$is_boolean&&1!=t?1:0}();h>d;d++)if(g=u(d),g===s)return s.$v;return o}if(o.begin.$$is_string&&o.end.$$is_string)return g=(t=(r=o.begin).$upto,t.$$p=u.$to_proc(),t).call(r,o.end,o.exclude),g===o.begin?o:g;for(c=o.begin,f=o.end;n(c,f);){if(e.yield1(u,c)===s)return s.$v;c=c.$succ()}return i=o.exclude["$!"](),(t=i!==!1&&i!==a?c["$=="](f):i)===a||t.$$is_boolean&&1!=t||e.yield1(u,c)!==s?o:s.$v}),e.defn(f,"$eql?",function(e){var t,n,r=this;return(t=p.get("Range")["$==="](e))===a||t.$$is_boolean&&1!=t?!1:(n=r.exclude["$==="](e["$exclude_end?"]()),t=n!==!1&&n!==a?r.begin["$eql?"](e.$begin()):n,t!==!1&&t!==a?r.end["$eql?"](e.$end()):t)}),e.defn(f,"$exclude_end?",function(){var e=this;return e.exclude}),e.alias(f,"first","begin"),e.alias(f,"include?","cover?"),e.alias(f,"last","end"),e.defn(f,"$max",u=function(){var t=this,n=u.$$p,r=n||a,i=a,o=a;for(u.$$p=null,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r!==a?e.find_super_dispatcher(t,"max",u,n).apply(t,i):t.exclude?t.end-1:t.end}),e.alias(f,"member?","cover?"),e.defn(f,"$min",c=function(){var t=this,n=c.$$p,r=n||a,i=a,o=a;for(c.$$p=null,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r!==a?e.find_super_dispatcher(t,"min",c,n).apply(t,i):t.begin}),e.alias(f,"member?","include?"),e.defn(f,"$size",function(){var e,t,i=this,o=a,s=a,l=a;return o=i.begin,s=i.end,(e=i.exclude)===a||e.$$is_boolean&&1!=e||(s=r(s,1)),t=p.get("Numeric")["$==="](o),(e=t!==!1&&t!==a?p.get("Numeric")["$==="](s):t)===a||e.$$is_boolean&&1!=e?a:n(s,o)?0:(l=p.get("Float").$$scope.get("INFINITY"),(e=(t=l["$=="](o.$abs()))!==!1&&t!==a?t:s.$abs()["$=="](l))===a||e.$$is_boolean&&1!=e?(Math.abs(s-o)+1).$to_i():l)}),e.defn(f,"$step",function(e){var t=this;return null==e&&(e=1),t.$raise(p.get("NotImplementedError"))}),e.defn(f,"$to_s",function(){var e=this;return e.begin.$inspect()+(e.exclude?"...":"..")+e.end.$inspect()}),e.alias(f,"inspect","to_s")}(o.base,null)},Opal.modules["corelib/proc"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,i=e.slice,o=e.klass;return e.add_stubs(["$raise","$coerce_to!"]),function(t,$super){function a(){}var s,l,$=a=o(t,$super,"Proc",a),u=$.$$proto,c=$.$$scope;return u.$$is_proc=!0,u.$$is_lambda=!1,e.defs($,"$new",s=function(){var e=this,t=s.$$p,r=t||n;return s.$$p=null,r!==!1&&r!==n||e.$raise(c.get("ArgumentError"),"tried to create a Proc object without a block"),r}),e.defn($,"$call",l=function(){var t=this,i=l.$$p,o=i||n,a=n,s=arguments.length-0;0>s&&(s=0);var $=new Array(s);for(a=0;s>a;a++)$[a]=arguments[a+0];l.$$p=null,o!==n&&(t.$$p=o);var u;return u=t.$$is_lambda?t.apply(null,$):e.yieldX(t,$),u===r?r.$v:u}),e.alias($,"[]","call"),e.alias($,"===","call"),e.alias($,"yield","call"),e.defn($,"$to_proc",function(){var e=this;return e}),e.defn($,"$lambda?",function(){var e=this;return!!e.$$is_lambda}),e.defn($,"$arity",function(){var e=this;return e.$$is_curried?-1:e.$$arity?e.$$arity:e.length}),e.defn($,"$source_location",function(){var e=this;return e.$$is_curried?n:n}),e.defn($,"$binding",function(){var e=this;return e.$$is_curried&&e.$raise(c.get("ArgumentError"),"Can't create Binding"),n}),e.defn($,"$parameters",function(){var e=this;return e.$$is_curried?[["rest"]]:n}),e.defn($,"$curry",function(e){function t(){var r,o=i.call(arguments),a=o.length;return a>e&&n.$$is_lambda&&!n.$$is_curried&&n.$raise(c.get("ArgumentError"),"wrong number of arguments ("+a+" for "+e+")"),a>=e?n.$call.apply(n,o):(r=function(){return t.apply(null,o.concat(i.call(arguments)))},r.$$is_lambda=n.$$is_lambda,r.$$is_curried=!0,r)}var n=this;return void 0===e?e=n.length:(e=c.get("Opal")["$coerce_to!"](e,c.get("Integer"),"to_int"),n.$$is_lambda&&e!==n.length&&n.$raise(c.get("ArgumentError"),"wrong number of arguments ("+e+" for "+n.length+")")),t.$$is_lambda=n.$$is_lambda,t.$$is_curried=!0,t}),e.defn($,"$dup",function(){var e=this,t=e.$$original_proc||e,n=function(){return t.apply(this,arguments)};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}),e.alias($,"clone","dup")}(t.base,Function)},Opal.modules["corelib/method"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice),i=e.klass;return e.add_stubs(["$attr_reader","$class","$arity","$new","$name"]),function(t,$super){function o(){}var a,s=o=i(t,$super,"Method",o),l=s.$$proto,$=s.$$scope;return l.method=l.receiver=l.owner=l.name=n,s.$attr_reader("owner","receiver","name"),e.defn(s,"$initialize",function(e,t,n){var r=this;return r.receiver=e,r.owner=e.$class(),r.name=n,r.method=t}),e.defn(s,"$arity",function(){var e=this;return e.method.$arity()}),e.defn(s,"$call",a=function(){var e=this,t=a.$$p,r=t||n,i=n,o=arguments.length-0;0>o&&(o=0);var s=new Array(o);for(i=0;o>i;i++)s[i]=arguments[i+0];return a.$$p=null,e.method.$$p=r,e.method.apply(e.receiver,s)}),e.alias(s,"[]","call"),e.defn(s,"$unbind",function(){var e=this;return $.get("UnboundMethod").$new(e.owner,e.method,e.name)}),e.defn(s,"$to_proc",function(){var e=this,t=function(){return e.$call.apply(e,r.call(arguments))};return t.$$unbound=e.method,t.$$is_lambda=!0,t}),e.defn(s,"$inspect",function(){var e=this;return"#<Method: "+e.receiver.$class()+"#"+e.name+">"}),n&&"inspect"}(t.base,null),function(t,$super){function r(){}var o=r=i(t,$super,"UnboundMethod",r),a=o.$$proto,s=o.$$scope;return a.method=a.name=a.owner=n,o.$attr_reader("owner","name"),e.defn(o,"$initialize",function(e,t,n){var r=this;return r.owner=e,r.method=t,r.name=n}),e.defn(o,"$arity",function(){var e=this;return e.method.$arity()}),e.defn(o,"$bind",function(e){var t=this;return s.get("Method").$new(e,t.method,t.name)}),e.defn(o,"$inspect",function(){var e=this;return"#<UnboundMethod: "+e.owner.$name()+"#"+e.name+">"}),n&&"inspect"}(t.base,null)},Opal.modules["corelib/variables"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.gvars),i=e.hash2;return e.add_stubs(["$new"]),r["&"]=r["~"]=r["`"]=r["'"]=n,r.LOADED_FEATURES=r['"']=e.loaded_features,r.LOAD_PATH=r[":"]=[],r["/"]="\n",r[","]=n,e.cdecl(t,"ARGV",[]),e.cdecl(t,"ARGF",t.get("Object").$new()),e.cdecl(t,"ENV",i([],{})),r.VERBOSE=!1,r.DEBUG=!1,r.SAFE=0},Opal.modules["opal/mini"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("opal/base"),t.$require("corelib/nil"),t.$require("corelib/boolean"),t.$require("corelib/string"),t.$require("corelib/comparable"),t.$require("corelib/enumerable"),t.$require("corelib/enumerator"),t.$require("corelib/array"),t.$require("corelib/hash"),t.$require("corelib/number"),t.$require("corelib/range"),t.$require("corelib/proc"),t.$require("corelib/method"),t.$require("corelib/regexp"),t.$require("corelib/variables")},Opal.modules["corelib/array/inheritance"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var i=(e.top,e),o=e.nil,a=(e.breaker,e.slice,e.klass);return e.add_stubs(["$new","$allocate","$initialize","$to_proc","$__send__","$clone","$respond_to?","$==","$eql?","$inspect","$hash","$*","$class","$slice","$uniq","$flatten","$-","$+"]),function(t,$super){function n(){}var r=n=a(t,$super,"Array",n),i=(r.$$proto,r.$$scope);return e.defs(r,"$inherited",function(e){var t=o;t=i.get("Class").$new(i.get("Array").$$scope.get("Wrapper")),e.$$proto=t.$$proto,e.$$proto.$$class=e,e.$$alloc=t.$$alloc,e.$$parent=i.get("Array").$$scope.get("Wrapper"),e.$allocate=t.$allocate,e.$new=t.$new,e["$[]"]=t["$[]"]}),o&&"inherited"}(i.base,null),function(i,$super){function s(){}var l,$,u,c,f,d=s=a(i,$super,"Wrapper",s),p=d.$$proto,h=d.$$scope;return p.literal=o,p.$$is_array=!0,e.defs(d,"$allocate",l=function(t){var n=this,r=(l.$$p,o);return null==t&&(t=[]),l.$$p=null,r=e.find_super_dispatcher(n,"allocate",l,null,s).apply(n,[]),r.literal=t,r}),e.defs(d,"$new",$=function(){var t,n,r=this,i=$.$$p,a=i||o,s=o,l=o,u=arguments.length-0;0>u&&(u=0);var c=new Array(u);for(l=0;u>l;l++)c[l]=arguments[l+0];return $.$$p=null,s=r.$allocate(),(t=(n=s).$initialize,t.$$p=a.$to_proc(),t).apply(n,e.to_a(c)),s}),e.defs(d,"$[]",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.$allocate(r)}),e.defn(d,"$initialize",u=function(){var t,n,r=this,i=u.$$p,a=i||o,s=o,l=arguments.length-0;0>l&&(l=0);var $=new Array(l);for(s=0;l>s;s++)$[s]=arguments[s+0];return u.$$p=null,r.literal=(t=(n=h.get("Array")).$new,t.$$p=a.$to_proc(),t).apply(n,e.to_a($))}),e.defn(d,"$method_missing",c=function(){var t,n,r=this,i=c.$$p,a=i||o,s=o,l=o,$=arguments.length-0;0>$&&($=0);var u=new Array($);for(l=0;$>l;l++)u[l]=arguments[l+0];return c.$$p=null,s=(t=(n=r.literal).$__send__,t.$$p=a.$to_proc(),t).apply(n,e.to_a(u)),(t=s===r.literal)===o||t.$$is_boolean&&1!=t?s:r}),e.defn(d,"$initialize_copy",function(e){var t=this;return t.literal=e.literal.$clone()}),e.defn(d,"$respond_to?",f=function(t){var n,r=this,i=f.$$p,a=o,s=o;for(f.$$p=null,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return(n=e.find_super_dispatcher(r,"respond_to?",f,i).apply(r,a))!==!1&&n!==o?n:r.literal["$respond_to?"](t)}),e.defn(d,"$==",function(e){var t=this;return t.literal["$=="](e)}),e.defn(d,"$eql?",function(e){var t=this;return t.literal["$eql?"](e)}),e.defn(d,"$to_a",function(){var e=this;return e.literal}),e.defn(d,"$to_ary",function(){var e=this;return e}),e.defn(d,"$inspect",function(){var e=this;return e.literal.$inspect()}),e.defn(d,"$hash",function(){var e=this;return e.literal.$hash()}),e.defn(d,"$*",function(e){var n=this,r=t(n.literal,e);return r.$$is_array?n.$class().$allocate(r):r}),e.defn(d,"$[]",function(e,t){var n=this,r=n.literal.$slice(e,t);return r.$$is_array&&(e.$$is_range||void 0!==t)?n.$class().$allocate(r):r}),e.alias(d,"slice","[]"),e.defn(d,"$uniq",function(){var e=this;return e.$class().$allocate(e.literal.$uniq())}),e.defn(d,"$flatten",function(e){var t=this;return t.$class().$allocate(t.literal.$flatten(e))}),e.defn(d,"$-",function(e){var t=this;return n(t.literal,e)}),e.defn(d,"$+",function(e){var t=this;return r(t.literal,e)}),o&&"+"}(i.get("Array"),null)},Opal.modules["corelib/string/inheritance"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="ignore";var r=e.top,i=e,o=e.nil,a=e.breaker,s=(e.slice,e.klass),l=e.gvars;return e.add_stubs(["$require","$new","$allocate","$initialize","$to_proc","$__send__","$class","$clone","$respond_to?","$==","$inspect","$+","$*","$map","$split","$enum_for","$each_line","$to_a","$%"]),r.$require("corelib/string"),function(t,$super){function n(){}var r=n=s(t,$super,"String",n),i=(r.$$proto,r.$$scope);return e.defs(r,"$inherited",function(e){var t=o;t=i.get("Class").$new(i.get("String").$$scope.get("Wrapper")),e.$$proto=t.$$proto,e.$$proto.$$class=e,e.$$alloc=t.$$alloc,e.$$parent=i.get("String").$$scope.get("Wrapper"),e.$allocate=t.$allocate,e.$new=t.$new}),o&&"inherited"}(i.base,null),function(r,$super){function i(){}var $,u,c,f,d,p,h=i=s(r,$super,"Wrapper",i),g=h.$$proto;h.$$scope;return g.literal=o,g.$$is_string=!0,e.defs(h,"$allocate",$=function(t){var n=this,r=($.$$p,o);return null==t&&(t=""),$.$$p=null,r=e.find_super_dispatcher(n,"allocate",$,null,i).apply(n,[]),r.literal=t,r}),e.defs(h,"$new",u=function(){var t,n,r=this,i=u.$$p,a=i||o,s=o,l=o,$=arguments.length-0;0>$&&($=0);var c=new Array($);for(l=0;$>l;l++)c[l]=arguments[l+0];return u.$$p=null,s=r.$allocate(),(t=(n=s).$initialize,t.$$p=a.$to_proc(),t).apply(n,e.to_a(c)),s}),e.defs(h,"$[]",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.$allocate(r)}),e.defn(h,"$initialize",function(e){var t=this;return null==e&&(e=""),t.literal=e}),e.defn(h,"$method_missing",c=function(){var t,n,r=this,i=c.$$p,a=i||o,s=o,l=o,$=arguments.length-0;0>$&&($=0);var u=new Array($);for(l=0;$>l;l++)u[l]=arguments[l+0];return c.$$p=null,s=(t=(n=r.literal).$__send__,t.$$p=a.$to_proc(),t).apply(n,e.to_a(u)),(t=null!=s.$$is_string)===o||t.$$is_boolean&&1!=t?s:(t=s==r.literal)===o||t.$$is_boolean&&1!=t?r.$class().$allocate(s):r}),e.defn(h,"$initialize_copy",function(e){var t=this;return t.literal=e.literal.$clone()}),e.defn(h,"$respond_to?",f=function(t){var n,r=this,i=f.$$p,a=o,s=o;for(f.$$p=null,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return(n=e.find_super_dispatcher(r,"respond_to?",f,i).apply(r,a))!==!1&&n!==o?n:r.literal["$respond_to?"](t)}),e.defn(h,"$==",function(e){var t=this;return t.literal["$=="](e)}),e.alias(h,"eql?","=="),e.alias(h,"===","=="),e.defn(h,"$to_s",function(){var e=this;return e.literal}),e.alias(h,"to_str","to_s"),e.defn(h,"$inspect",function(){var e=this;return e.literal.$inspect()}),e.defn(h,"$+",function(e){var n=this;return t(n.literal,e)}),e.defn(h,"$*",function(e){var t=this,r=n(t.literal,e);return r.$$is_string?t.$class().$allocate(r):r}),e.defn(h,"$split",function(e,t){var n,r,i,a=this;return(n=(r=a.literal.$split(e,t)).$map,n.$$p=(i=function(e){var t=i.$$s||this;return null==e&&(e=o),t.$class().$allocate(e)},i.$$s=a,i),n).call(r)}),e.defn(h,"$replace",function(e){var t=this;return t.literal=e}),e.defn(h,"$each_line",d=function(t){var n,r,i,s=this,$=d.$$p,u=$||o;return null==l["/"]&&(l["/"]=o),null==t&&(t=l["/"]),d.$$p=null,u===o?s.$enum_for("each_line",t):(n=(r=s.literal).$each_line,n.$$p=(i=function(t){var n,r=i.$$s||this;return null==t&&(t=o),n=e.yield1(u,r.$class().$allocate(t)),n===a?n:n},i.$$s=s,i),n).call(r,t)}),e.defn(h,"$lines",p=function(e){var t,n,r=this,i=p.$$p,a=i||o,s=o;return null==l["/"]&&(l["/"]=o),null==e&&(e=l["/"]),p.$$p=null,s=(t=(n=r).$each_line,t.$$p=a.$to_proc(),t).call(n,e),a!==!1&&a!==o?r:s.$to_a()}),e.defn(h,"$%",function(e){var t=this;return t.literal["$%"](e)}),o&&"%"}(i.get("String"),null)},Opal.modules["corelib/string/encoding"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n,r,i,o,a,s,l,$=e.top,u=e,c=e.nil,f=e.breaker,d=(e.slice,e.klass),p=e.hash2;return e.add_stubs(["$require","$+","$[]","$new","$to_proc","$each","$const_set","$sub","$upcase","$const_get","$===","$==","$name","$include?","$names","$constants","$raise","$attr_accessor","$attr_reader","$register","$length","$bytes","$to_a","$each_byte","$bytesize","$enum_for","$force_encoding","$dup","$coerce_to!","$find","$nil?","$getbyte"]),$.$require("corelib/string"),function(n,$super){function r(){}var i,o=r=d(n,$super,"Encoding",r),a=o.$$proto,s=o.$$scope;return a.ascii=a.dummy=a.name=c,e.defs(o,"$register",i=function(e,n){var r,o,a,l,$=this,u=i.$$p,f=u||c,d=c,h=c;return null==n&&(n=p([],{})),i.$$p=null,d=t([e],(r=n["$[]"]("aliases"))!==!1&&r!==c?r:[]),h=(r=(o=s.get("Class")).$new,r.$$p=f.$to_proc(),r).call(o,$).$new(e,d,(r=n["$[]"]("ascii"))!==!1&&r!==c?r:!1,(r=n["$[]"]("dummy"))!==!1&&r!==c?r:!1),(r=(a=d).$each,r.$$p=(l=function(e){var t=l.$$s||this;return null==e&&(e=c),t.$const_set(e.$sub("-","_"),h)},l.$$s=$,l),r).call(a)}),e.defs(o,"$find",function(t){try{var n,r,i,o=this,a=c;return a=t.$upcase(),(n=(r=o.$constants()).$each,n.$$p=(i=function(t){var n,r,o=i.$$s||this,l=c;return null==t&&(t=c),l=o.$const_get(t),(n=s.get("Encoding")["$==="](l))===c||n.$$is_boolean&&1!=n?c:(n=(r=l.$name()["$=="](a))!==!1&&r!==c?r:l.$names()["$include?"](a))===c||n.$$is_boolean&&1!=n?c:void e.ret(l)},i.$$s=o,i),n).call(r),o.$raise(s.get("ArgumentError"),"unknown encoding name - "+t)}catch(l){if(l===e.returner)return l.$v;throw l}}),function(e){e.$$scope,e.$$proto;return e.$attr_accessor("default_external")}(e.get_singleton_class(o)),o.$attr_reader("name","names"),e.defn(o,"$initialize",function(e,t,n,r){var i=this;return i.name=e,i.names=t,i.ascii=n,i.dummy=r}),e.defn(o,"$ascii_compatible?",function(){var e=this;return e.ascii}),e.defn(o,"$dummy?",function(){var e=this;return e.dummy}),e.defn(o,"$to_s",function(){var e=this;return e.name}),e.defn(o,"$inspect",function(){var e,t=this;return"#<Encoding:"+t.name+function(){return(e=t.dummy)===c||e.$$is_boolean&&1!=e?c:" (dummy)"}()+">"}),e.defn(o,"$each_byte",function(){var e=this;return e.$raise(s.get("NotImplementedError"))}),e.defn(o,"$getbyte",function(){var e=this;return e.$raise(s.get("NotImplementedError"))}),e.defn(o,"$bytesize",function(){var e=this;return e.$raise(s.get("NotImplementedError"))}),function(e,$super){function t(){}var n=t=d(e,$super,"EncodingError",t);n.$$proto,n.$$scope;return c}(s.base,s.get("StandardError")),function(e,$super){function t(){}var n=t=d(e,$super,"CompatibilityError",t);n.$$proto,n.$$scope;return c}(s.base,s.get("EncodingError"))}(u.base,null),(n=(r=u.get("Encoding")).$register,n.$$p=(i=function(){var t,n=i.$$s||this;return e.def(n,"$each_byte",t=function(n){var r,i=t.$$p,o=i||c;t.$$p=null;for(var a=0,s=n.length;s>a;a++){var l=n.charCodeAt(a);if(127>=l)(r=e.yield1(o,l))===f?f.$v:r;else for(var $=encodeURIComponent(n.charAt(a)).substr(1).split("%"),u=0,d=$.length;d>u;u++)(r=e.yield1(o,parseInt($[u],16)))===f?f.$v:r}}),e.def(n,"$bytesize",function(){var e=this;return e.$bytes().$length()}),c&&"bytesize"},i.$$s=$,i),n).call(r,"UTF-8",p(["aliases","ascii"],{aliases:["CP65001"],ascii:!0})),(n=(o=u.get("Encoding")).$register,n.$$p=(a=function(){var t,n=a.$$s||this;return e.def(n,"$each_byte",t=function(n){var r,i=t.$$p,o=i||c;t.$$p=null;for(var a=0,s=n.length;s>a;a++){var l=n.charCodeAt(a);(r=e.yield1(o,255&l))===f?f.$v:r,(r=e.yield1(o,l>>8))===f?f.$v:r}}),e.def(n,"$bytesize",function(){var e=this;return e.$bytes().$length()}),c&&"bytesize"},a.$$s=$,a),n).call(o,"UTF-16LE"),(n=(s=u.get("Encoding")).$register,n.$$p=(l=function(){var t,n=l.$$s||this;return e.def(n,"$each_byte",t=function(n){var r,i=t.$$p,o=i||c;t.$$p=null;for(var a=0,s=n.length;s>a;a++)(r=e.yield1(o,255&n.charCodeAt(a)))===f?f.$v:r}),e.def(n,"$bytesize",function(){var e=this;return e.$bytes().$length()}),c&&"bytesize"},l.$$s=$,l),n).call(s,"ASCII-8BIT",p(["aliases","ascii"],{aliases:["BINARY"],ascii:!0})),function(t,$super){function n(){}var r,i=n=d(t,$super,"String",n),o=i.$$proto,a=i.$$scope;return o.encoding=c,String.prototype.encoding=a.get("Encoding").$$scope.get("UTF_16LE"),e.defn(i,"$bytes",function(){var e=this;return e.$each_byte().$to_a()}),e.defn(i,"$bytesize",function(){var e=this;return e.encoding.$bytesize(e)}),e.defn(i,"$each_byte",r=function(){var e,t,n=this,i=r.$$p,o=i||c;return r.$$p=null,o===c?n.$enum_for("each_byte"):((e=(t=n.encoding).$each_byte,e.$$p=o.$to_proc(),e).call(t,n),n)}),e.defn(i,"$encode",function(e){var t=this;return t.$dup().$force_encoding(e)}),e.defn(i,"$encoding",function(){var e=this;return e.encoding}),e.defn(i,"$force_encoding",function(e){var t,n=this;if(e=a.get("Opal")["$coerce_to!"](e,a.get("String"),"to_str"),e=a.get("Encoding").$find(e),e["$=="](n.encoding))return n;(t=e["$nil?"]())===c||t.$$is_boolean&&1!=t||n.$raise(a.get("ArgumentError"),"unknown encoding name - "+e);var r=new String(n);return r.encoding=e,r}),e.defn(i,"$getbyte",function(e){var t=this;return t.encoding.$getbyte(t,e)}),c&&"getbyte"}(u.base,null)},Opal.modules["corelib/math"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),i=e.nil,o=(e.breaker,e.slice,e.module);return e.add_stubs(["$new","$raise","$Float","$type_error","$Integer","$module_function","$checked","$float!","$===","$gamma","$-","$integer!","$/","$infinite?"]),function(r){var a,s,l=a=o(r,"Math"),$=(l.$$proto,l.$$scope);e.cdecl($,"E",Math.E),e.cdecl($,"PI",Math.PI),e.cdecl($,"DomainError",$.get("Class").$new($.get("StandardError"))),e.defs(l,"$checked",function(e){var t=this,n=i,r=arguments.length-1;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+1];if(isNaN(o[0])||2==o.length&&isNaN(o[1]))return NaN;var a=Math[e].apply(null,o);return isNaN(a)&&t.$raise($.get("DomainError"),'Numerical argument is out of domain - "'+e+'"'),a}),e.defs(l,"$float!",function(t){var n=this;try{return n.$Float(t)}catch(r){if(!e.rescue(r,[$.get("ArgumentError")]))throw r;try{return n.$raise($.get("Opal").$type_error(t,$.get("Float")))}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defs(l,"$integer!",function(t){var n=this;try{return n.$Integer(t)}catch(r){if(!e.rescue(r,[$.get("ArgumentError")]))throw r;try{return n.$raise($.get("Opal").$type_error(t,$.get("Integer")))}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),l.$module_function(),e.defn(l,"$acos",function(e){return $.get("Math").$checked("acos",$.get("Math")["$float!"](e))}),((s="undefined"!=typeof Math.acosh)===i||s.$$is_boolean&&1!=s)&&(Math.acosh=function(e){return Math.log(e+Math.sqrt(e*e-1))}),e.defn(l,"$acosh",function(e){return $.get("Math").$checked("acosh",$.get("Math")["$float!"](e))}),e.defn(l,"$asin",function(e){return $.get("Math").$checked("asin",$.get("Math")["$float!"](e))}),((s="undefined"!=typeof Math.asinh)===i||s.$$is_boolean&&1!=s)&&(Math.asinh=function(e){return Math.log(e+Math.sqrt(e*e+1))}),e.defn(l,"$asinh",function(e){return $.get("Math").$checked("asinh",$.get("Math")["$float!"](e))}),e.defn(l,"$atan",function(e){return $.get("Math").$checked("atan",$.get("Math")["$float!"](e))}),e.defn(l,"$atan2",function(e,t){return $.get("Math").$checked("atan2",$.get("Math")["$float!"](e),$.get("Math")["$float!"](t))}),((s="undefined"!=typeof Math.atanh)===i||s.$$is_boolean&&1!=s)&&(Math.atanh=function(e){return.5*Math.log((1+e)/(1-e))}),e.defn(l,"$atanh",function(e){return $.get("Math").$checked("atanh",$.get("Math")["$float!"](e))}),((s="undefined"!=typeof Math.cbrt)===i||s.$$is_boolean&&1!=s)&&(Math.cbrt=function(e){if(0==e)return 0;if(0>e)return-Math.cbrt(-e);for(var t=e,n=0;.125>t;)t*=8,n--;for(;t>1;)t*=.125,n++;for(t=(-.46946116*t+1.072302)*t+.3812513;0>n;)t*=.5,n++;for(;n>0;)t*=2,n--;return t=2/3*t+1/3*e/(t*t),t=2/3*t+1/3*e/(t*t),t=2/3*t+1/3*e/(t*t),t=2/3*t+1/3*e/(t*t)}),e.defn(l,"$cbrt",function(e){return $.get("Math").$checked("cbrt",$.get("Math")["$float!"](e))}),e.defn(l,"$cos",function(e){return $.get("Math").$checked("cos",$.get("Math")["$float!"](e))}),((s="undefined"!=typeof Math.cosh)===i||s.$$is_boolean&&1!=s)&&(Math.cosh=function(e){return(Math.exp(e)+Math.exp(-e))/2}),e.defn(l,"$cosh",function(e){return $.get("Math").$checked("cosh",$.get("Math")["$float!"](e))}),((s="undefined"!=typeof Math.erf)===i||s.$$is_boolean&&1!=s)&&(Math.erf=function(e){var t=.254829592,n=-.284496736,r=1.421413741,i=-1.453152027,o=1.061405429,a=.3275911,s=1;0>e&&(s=-1),e=Math.abs(e);var l=1/(1+a*e),$=1-((((o*l+i)*l+r)*l+n)*l+t)*l*Math.exp(-e*e);return s*$}),e.defn(l,"$erf",function(e){return $.get("Math").$checked("erf",$.get("Math")["$float!"](e))}),((s="undefined"!=typeof Math.erfc)===i||s.$$is_boolean&&1!=s)&&(Math.erfc=function(e){var t=Math.abs(e),n=1/(.5*t+1),r=.17087277*n+-.82215223,i=n*r+1.48851587,o=n*i+-1.13520398,a=n*o+.27886807,s=n*a+-.18628806,l=n*s+.09678418,$=n*l+.37409196,u=n*$+1.00002368,c=n*u,f=-t*t-1.26551223+c,d=n*Math.exp(f);return 0>e?2-d:d}),e.defn(l,"$erfc",function(e){return $.get("Math").$checked("erfc",$.get("Math")["$float!"](e))}),e.defn(l,"$exp",function(e){return $.get("Math").$checked("exp",$.get("Math")["$float!"](e))}),e.defn(l,"$frexp",function(e){if(e=$.get("Math")["$float!"](e),isNaN(e))return[NaN,0];var t=Math.floor(Math.log(Math.abs(e))/Math.log(2))+1,n=e/Math.pow(2,t);return[n,t]}),e.defn(l,"$gamma",function(e){var n=this;e=$.get("Math")["$float!"](e);var r,i,o,a,s,l,u,c,f,d=4.7421875,p=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(e))return NaN;if(0===e&&0>1/e)return-(1/0);if((-1===e||e===-(1/0))&&n.$raise($.get("DomainError"),'Numerical argument is out of domain - "gamma"'),$.get("Integer")["$==="](e)){if(0>=e)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(a=e-2,s=e-1;a>1;)s*=a,a--;return 0==s&&(s=1),s}if(.5>e)return Math.PI/(Math.sin(Math.PI*e)*$.get("Math").$gamma(t(1,e)));if(e>=171.35)return 1/0;if(e>85)return l=e*e,u=l*e,c=u*e,f=c*e,Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*l)-139/(51840*u)-571/(2488320*c)+163879/(209018880*f)+5246819/(75246796800*f*e));for(e-=1,o=p[0],r=1;r<p.length;++r)o+=p[r]/(e+r);return i=e+d+.5,Math.sqrt(2*Math.PI)*Math.pow(i,e+.5)*Math.exp(-i)*o}),((s="undefined"!=typeof Math.hypot)===i||s.$$is_boolean&&1!=s)&&(Math.hypot=function(e,t){return Math.sqrt(e*e+t*t)}),e.defn(l,"$hypot",function(e,t){return $.get("Math").$checked("hypot",$.get("Math")["$float!"](e),$.get("Math")["$float!"](t))}),e.defn(l,"$ldexp",function(e,t){var n=this;return e=$.get("Math")["$float!"](e),t=$.get("Math")["$integer!"](t),isNaN(t)&&n.$raise($.get("RangeError"),"float NaN out of range of integer"),e*Math.pow(2,t)}),e.defn(l,"$lgamma",function(e){return-1==e?[1/0,1]:[Math.log(Math.abs($.get("Math").$gamma(e))),$.get("Math").$gamma(e)<0?-1:1]}),e.defn(l,"$log",function(e,t){var r,o=this;return(r=$.get("String")["$==="](e))===i||r.$$is_boolean&&1!=r||o.$raise($.get("Opal").$type_error(e,$.get("Float"))),(r=null==t)===i||r.$$is_boolean&&1!=r?((r=$.get("String")["$==="](t))===i||r.$$is_boolean&&1!=r||o.$raise($.get("Opal").$type_error(t,$.get("Float"))),n($.get("Math").$checked("log",$.get("Math")["$float!"](e)),$.get("Math").$checked("log",$.get("Math")["$float!"](t)))):$.get("Math").$checked("log",$.get("Math")["$float!"](e))}),((s="undefined"!=typeof Math.log10)===i||s.$$is_boolean&&1!=s)&&(Math.log10=function(e){
return Math.log(e)/Math.LN10}),e.defn(l,"$log10",function(e){var t,n=this;return(t=$.get("String")["$==="](e))===i||t.$$is_boolean&&1!=t||n.$raise($.get("Opal").$type_error(e,$.get("Float"))),$.get("Math").$checked("log10",$.get("Math")["$float!"](e))}),((s="undefined"!=typeof Math.log2)===i||s.$$is_boolean&&1!=s)&&(Math.log2=function(e){return Math.log(e)/Math.LN2}),e.defn(l,"$log2",function(e){var t,n=this;return(t=$.get("String")["$==="](e))===i||t.$$is_boolean&&1!=t||n.$raise($.get("Opal").$type_error(e,$.get("Float"))),$.get("Math").$checked("log2",$.get("Math")["$float!"](e))}),e.defn(l,"$sin",function(e){return $.get("Math").$checked("sin",$.get("Math")["$float!"](e))}),((s="undefined"!=typeof Math.sinh)===i||s.$$is_boolean&&1!=s)&&(Math.sinh=function(e){return(Math.exp(e)-Math.exp(-e))/2}),e.defn(l,"$sinh",function(e){return $.get("Math").$checked("sinh",$.get("Math")["$float!"](e))}),e.defn(l,"$sqrt",function(e){return $.get("Math").$checked("sqrt",$.get("Math")["$float!"](e))}),e.defn(l,"$tan",function(e){var t;return e=$.get("Math")["$float!"](e),(t=e["$infinite?"]())===i||t.$$is_boolean&&1!=t?$.get("Math").$checked("tan",$.get("Math")["$float!"](e)):$.get("Float").$$scope.get("NAN")}),((s="undefined"!=typeof Math.tanh)===i||s.$$is_boolean&&1!=s)&&(Math.tanh=function(e){return e==1/0?1:e==-(1/0)?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}),e.defn(l,"$tanh",function(e){return $.get("Math").$checked("tanh",$.get("Math")["$float!"](e))})}(r.base)},Opal.modules["corelib/complex"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var a=e.top,s=e,l=e.nil,$=(e.breaker,e.slice,e.klass),u=e.module;return e.add_stubs(["$require","$===","$real?","$raise","$new","$*","$cos","$sin","$attr_reader","$class","$==","$real","$imag","$Complex","$-@","$+","$__coerced__","$-","$nan?","$/","$conj","$abs2","$quo","$polar","$exp","$log","$>","$!=","$divmod","$**","$hypot","$atan2","$lcm","$denominator","$to_s","$numerator","$abs","$arg","$rationalize","$to_f","$to_i","$to_r","$inspect","$positive?","$infinite?"]),a.$require("corelib/numeric"),function(a,$super){function s(){}var u=s=$(a,$super,"Complex",s),c=u.$$proto,f=u.$$scope;return c.real=c.imag=l,e.defs(u,"$rect",function(e,t){var n,r,i,o,a=this;return null==t&&(t=0),o=f.get("Numeric")["$==="](e),i=o!==!1&&o!==l?e["$real?"]():o,r=i!==!1&&i!==l?f.get("Numeric")["$==="](t):i,((n=r!==!1&&r!==l?t["$real?"]():r)===l||n.$$is_boolean&&1!=n)&&a.$raise(f.get("TypeError"),"not a real"),a.$new(e,t)}),function(t){t.$$scope,t.$$proto;return e.alias(t,"rectangular","rect")}(e.get_singleton_class(u)),e.defs(u,"$polar",function(e,n){var r,i,o,a,s=this;return null==n&&(n=0),a=f.get("Numeric")["$==="](e),o=a!==!1&&a!==l?e["$real?"]():a,i=o!==!1&&o!==l?f.get("Numeric")["$==="](n):o,((r=i!==!1&&i!==l?n["$real?"]():i)===l||r.$$is_boolean&&1!=r)&&s.$raise(f.get("TypeError"),"not a real"),s.$new(t(e,f.get("Math").$cos(n)),t(e,f.get("Math").$sin(n)))}),u.$attr_reader("real","imag"),e.defn(u,"$initialize",function(e,t){var n=this;return null==t&&(t=0),n.real=e,n.imag=t}),e.defn(u,"$coerce",function(e){var t,n,r=this;return(t=f.get("Complex")["$==="](e))===l||t.$$is_boolean&&1!=t?(n=f.get("Numeric")["$==="](e),(t=n!==!1&&n!==l?e["$real?"]():n)===l||t.$$is_boolean&&1!=t?r.$raise(f.get("TypeError"),""+e.$class()+" can't be coerced into Complex"):[f.get("Complex").$new(e,0),r]):[e,r]}),e.defn(u,"$==",function(e){var t,n,r=this;return(t=f.get("Complex")["$==="](e))===l||t.$$is_boolean&&1!=t?(n=f.get("Numeric")["$==="](e),(t=n!==!1&&n!==l?e["$real?"]():n)===l||t.$$is_boolean&&1!=t?e["$=="](r):(t=r.real["$=="](e))?r.imag["$=="](0):r.real["$=="](e)):(t=r.real["$=="](e.$real()))?r.imag["$=="](e.$imag()):r.real["$=="](e.$real())}),e.defn(u,"$-@",function(){var e=this;return e.$Complex(e.real["$-@"](),e.imag["$-@"]())}),e.defn(u,"$+",function(e){var t,r,i=this;return(t=f.get("Complex")["$==="](e))===l||t.$$is_boolean&&1!=t?(r=f.get("Numeric")["$==="](e),(t=r!==!1&&r!==l?e["$real?"]():r)===l||t.$$is_boolean&&1!=t?i.$__coerced__("+",e):i.$Complex(n(i.real,e),i.imag)):i.$Complex(n(i.real,e.$real()),n(i.imag,e.$imag()))}),e.defn(u,"$-",function(e){var t,n,i=this;return(t=f.get("Complex")["$==="](e))===l||t.$$is_boolean&&1!=t?(n=f.get("Numeric")["$==="](e),(t=n!==!1&&n!==l?e["$real?"]():n)===l||t.$$is_boolean&&1!=t?i.$__coerced__("-",e):i.$Complex(r(i.real,e),i.imag)):i.$Complex(r(i.real,e.$real()),r(i.imag,e.$imag()))}),e.defn(u,"$*",function(e){var i,o,a=this;return(i=f.get("Complex")["$==="](e))===l||i.$$is_boolean&&1!=i?(o=f.get("Numeric")["$==="](e),(i=o!==!1&&o!==l?e["$real?"]():o)===l||i.$$is_boolean&&1!=i?a.$__coerced__("*",e):a.$Complex(t(a.real,e),t(a.imag,e))):a.$Complex(r(t(a.real,e.$real()),t(a.imag,e.$imag())),n(t(a.real,e.$imag()),t(a.imag,e.$real())))}),e.defn(u,"$/",function(e){var n,r,o,a,s,$=this;return(n=f.get("Complex")["$==="](e))===l||n.$$is_boolean&&1!=n?(r=f.get("Numeric")["$==="](e),(n=r!==!1&&r!==l?e["$real?"]():r)===l||n.$$is_boolean&&1!=n?$.$__coerced__("/",e):$.$Complex($.real.$quo(e),$.imag.$quo(e))):(s=f.get("Number")["$==="]($.real),(n=(r=(o=(a=s!==!1&&s!==l?$.real["$nan?"]():s)!==!1&&a!==l?a:(s=f.get("Number")["$==="]($.imag),s!==!1&&s!==l?$.imag["$nan?"]():s))!==!1&&o!==l?o:(a=f.get("Number")["$==="](e.$real()),a!==!1&&a!==l?e.$real()["$nan?"]():a))!==!1&&r!==l?r:(o=f.get("Number")["$==="](e.$imag()),o!==!1&&o!==l?e.$imag()["$nan?"]():o))===l||n.$$is_boolean&&1!=n?i(t($,e.$conj()),e.$abs2()):f.get("Complex").$new(f.get("Float").$$scope.get("NAN"),f.get("Float").$$scope.get("NAN")))}),e.defn(u,"$**",function(a){var s,$,u,c,d,p=this,h=l,g=l,v=l,m=l,_=l,y=l,b=l,w=l,x=l,k=l,E=l;if(a["$=="](0))return f.get("Complex").$new(1,0);if((s=f.get("Complex")["$==="](a))===l||s.$$is_boolean&&1!=s){if((s=f.get("Integer")["$==="](a))===l||s.$$is_boolean&&1!=s)return(s=($=f.get("Float")["$==="](a))!==!1&&$!==l?$:f.get("Rational")["$==="](a))===l||s.$$is_boolean&&1!=s?p.$__coerced__("**",a):($=p.$polar(),s=e.to_ary($),h=null==s[0]?l:s[0],g=null==s[1]?l:s[1],$,f.get("Complex").$polar(h["$**"](a),t(g,a)));if(o(a,0)){for(b=p,w=b,x=r(a,1);($=x["$!="](0))!==l&&(!$.$$is_boolean||1==$);){for(;d=x.$divmod(2),c=e.to_ary(d),k=null==c[0]?l:c[0],E=null==c[1]?l:c[1],(u=E["$=="](0))!==l&&(!u.$$is_boolean||1==u);)b=p.$Complex(r(t(b.$real(),b.$real()),t(b.$imag(),b.$imag())),t(t(2,b.$real()),b.$imag())),x=k;w=t(w,b),x=r(x,1)}return w}return i(f.get("Rational").$new(1,1),p)["$**"](a["$-@"]())}return $=p.$polar(),s=e.to_ary($),h=null==s[0]?l:s[0],g=null==s[1]?l:s[1],$,v=a.$real(),m=a.$imag(),_=f.get("Math").$exp(r(t(v,f.get("Math").$log(h)),t(m,g))),y=n(t(g,v),t(m,f.get("Math").$log(h))),f.get("Complex").$polar(_,y)}),e.defn(u,"$abs",function(){var e=this;return f.get("Math").$hypot(e.real,e.imag)}),e.defn(u,"$abs2",function(){var e=this;return n(t(e.real,e.real),t(e.imag,e.imag))}),e.defn(u,"$angle",function(){var e=this;return f.get("Math").$atan2(e.imag,e.real)}),e.alias(u,"arg","angle"),e.defn(u,"$conj",function(){var e=this;return e.$Complex(e.real,e.imag["$-@"]())}),e.alias(u,"conjugate","conj"),e.defn(u,"$denominator",function(){var e=this;return e.real.$denominator().$lcm(e.imag.$denominator())}),e.alias(u,"divide","/"),e.defn(u,"$eql?",function(e){var t,n,r=this;return n=f.get("Complex")["$==="](e),t=n!==!1&&n!==l?r.real.$class()["$=="](r.imag.$class()):n,t!==!1&&t!==l?r["$=="](e):t}),e.defn(u,"$fdiv",function(e){var t,n=this;return((t=f.get("Numeric")["$==="](e))===l||t.$$is_boolean&&1!=t)&&n.$raise(f.get("TypeError"),""+e.$class()+" can't be coerced into Complex"),i(n,e)}),e.defn(u,"$hash",function(){var e=this;return"Complex:"+e.real+":"+e.imag}),e.alias(u,"imaginary","imag"),e.defn(u,"$inspect",function(){var e=this;return"("+e.$to_s()+")"}),e.alias(u,"magnitude","abs"),e.defn(u,"$numerator",function(){var e=this,n=l;return n=e.$denominator(),e.$Complex(t(e.real.$numerator(),i(n,e.real.$denominator())),t(e.imag.$numerator(),i(n,e.imag.$denominator())))}),e.alias(u,"phase","arg"),e.defn(u,"$polar",function(){var e=this;return[e.$abs(),e.$arg()]}),e.alias(u,"quo","/"),e.defn(u,"$rationalize",function(e){var t,n=this;return arguments.length>1&&n.$raise(f.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),(t=n.imag["$!="](0))===l||t.$$is_boolean&&1!=t||n.$raise(f.get("RangeError"),"can't' convert "+n+" into Rational"),n.$real().$rationalize(e)}),e.defn(u,"$real?",function(){return!1}),e.defn(u,"$rect",function(){var e=this;return[e.real,e.imag]}),e.alias(u,"rectangular","rect"),e.defn(u,"$to_f",function(){var e=this;return e.imag["$=="](0)||e.$raise(f.get("RangeError"),"can't convert "+e+" into Float"),e.real.$to_f()}),e.defn(u,"$to_i",function(){var e=this;return e.imag["$=="](0)||e.$raise(f.get("RangeError"),"can't convert "+e+" into Integer"),e.real.$to_i()}),e.defn(u,"$to_r",function(){var e=this;return e.imag["$=="](0)||e.$raise(f.get("RangeError"),"can't convert "+e+" into Rational"),e.real.$to_r()}),e.defn(u,"$to_s",function(){var e,t,r,i=this,o=l;return o=i.real.$inspect(),r=f.get("Number")["$==="](i.imag),o=(e=(t=r!==!1&&r!==l?i.imag["$nan?"]():r)!==!1&&t!==l?t:i.imag["$positive?"]())===l||e.$$is_boolean&&1!=e?n(o,"-"):n(o,"+"),o=n(o,i.imag.$abs().$inspect()),t=f.get("Number")["$==="](i.imag),(e=t!==!1&&t!==l?(r=i.imag["$nan?"]())!==!1&&r!==l?r:i.imag["$infinite?"]():t)===l||e.$$is_boolean&&1!=e||(o=n(o,"*")),n(o,"i")}),e.cdecl(f,"I",u.$new(0,1))}(s.base,s.get("Numeric")),function(t){var n,r=n=u(t,"Kernel"),i=(r.$$proto,r.$$scope);e.defn(r,"$Complex",function(e,t){return null==t&&(t=l),t!==!1&&t!==l?i.get("Complex").$new(e,t):i.get("Complex").$new(e,0)})}(s.base)},Opal.modules["corelib/rational"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function s(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="ignore";var l=e.top,$=e,u=e.nil,c=(e.breaker,e.slice,e.klass),f=e.module;return e.add_stubs(["$require","$to_i","$==","$raise","$<","$-@","$new","$gcd","$/","$nil?","$===","$reduce","$to_r","$equal?","$!","$coerce_to!","$attr_reader","$to_f","$numerator","$denominator","$<=>","$-","$*","$__coerced__","$+","$Rational","$>","$**","$abs","$ceil","$with_precision","$floor","$to_s","$<=","$truncate","$send","$convert"]),l.$require("corelib/numeric"),function(l,$super){function $(){}var f=$=c(l,$super,"Rational",$),d=f.$$proto,p=f.$$scope;return d.num=d.den=u,e.defs(f,"$reduce",function(e,r){var i=this,o=u;if(e=e.$to_i(),r=r.$to_i(),r["$=="](0))i.$raise(p.get("ZeroDivisionError"),"divided by 0");else if(t(r,0))e=e["$-@"](),r=r["$-@"]();else if(r["$=="](1))return i.$new(e,r);return o=e.$gcd(r),i.$new(n(e,o),n(r,o))}),e.defs(f,"$convert",function(e,t){var r,i,o,a=this;return(r=(i=e["$nil?"]())!==!1&&i!==u?i:t["$nil?"]())===u||r.$$is_boolean&&1!=r||a.$raise(p.get("TypeError"),"cannot convert nil into Rational"),i=p.get("Integer")["$==="](e),(r=i!==!1&&i!==u?p.get("Integer")["$==="](t):i)===u||r.$$is_boolean&&1!=r?((r=(i=(o=p.get("Float")["$==="](e))!==!1&&o!==u?o:p.get("String")["$==="](e))!==!1&&i!==u?i:p.get("Complex")["$==="](e))===u||r.$$is_boolean&&1!=r||(e=e.$to_r()),(r=(i=(o=p.get("Float")["$==="](t))!==!1&&o!==u?o:p.get("String")["$==="](t))!==!1&&i!==u?i:p.get("Complex")["$==="](t))===u||r.$$is_boolean&&1!=r||(t=t.$to_r()),i=t["$equal?"](1),(r=i!==!1&&i!==u?p.get("Integer")["$==="](e)["$!"]():i)===u||r.$$is_boolean&&1!=r?(i=p.get("Numeric")["$==="](e),(r=i!==!1&&i!==u?p.get("Numeric")["$==="](t):i)===u||r.$$is_boolean&&1!=r?a.$reduce(e,t):n(e,t)):p.get("Opal")["$coerce_to!"](e,p.get("Rational"),"to_r")):a.$reduce(e,t)}),f.$attr_reader("numerator","denominator"),e.defn(f,"$initialize",function(e,t){var n=this;return n.num=e,n.den=t}),e.defn(f,"$numerator",function(){var e=this;return e.num}),e.defn(f,"$denominator",function(){var e=this;return e.den}),e.defn(f,"$coerce",function(e){var t=this,n=u;return function(){return n=e,p.get("Rational")["$==="](n)?[e,t]:p.get("Integer")["$==="](n)?[e.$to_r(),t]:p.get("Float")["$==="](n)?[e,t.$to_f()]:u}()}),e.defn(f,"$==",function(e){var t,n=this,r=u;return function(){return r=e,p.get("Rational")["$==="](r)?(t=n.num["$=="](e.$numerator()))?n.den["$=="](e.$denominator()):n.num["$=="](e.$numerator()):p.get("Integer")["$==="](r)?(t=n.num["$=="](e))?n.den["$=="](1):n.num["$=="](e):p.get("Float")["$==="](r)?n.$to_f()["$=="](e):e["$=="](n)}()}),e.defn(f,"$<=>",function(e){var t=this,n=u;return function(){return n=e,p.get("Rational")["$==="](n)?r(i(t.num,e.$denominator()),i(t.den,e.$numerator()))["$<=>"](0):p.get("Integer")["$==="](n)?r(t.num,i(t.den,e))["$<=>"](0):p.get("Float")["$==="](n)?t.$to_f()["$<=>"](e):t.$__coerced__("<=>",e)}()}),e.defn(f,"$+",function(e){var t=this,n=u,r=u,a=u;return function(){return n=e,p.get("Rational")["$==="](n)?(r=o(i(t.num,e.$denominator()),i(t.den,e.$numerator())),a=i(t.den,e.$denominator()),t.$Rational(r,a)):p.get("Integer")["$==="](n)?t.$Rational(o(t.num,i(e,t.den)),t.den):p.get("Float")["$==="](n)?o(t.$to_f(),e):t.$__coerced__("+",e)}()}),e.defn(f,"$-",function(e){var t=this,n=u,o=u,a=u;return function(){return n=e,p.get("Rational")["$==="](n)?(o=r(i(t.num,e.$denominator()),i(t.den,e.$numerator())),a=i(t.den,e.$denominator()),t.$Rational(o,a)):p.get("Integer")["$==="](n)?t.$Rational(r(t.num,i(e,t.den)),t.den):p.get("Float")["$==="](n)?r(t.$to_f(),e):t.$__coerced__("-",e)}()}),e.defn(f,"$*",function(e){var t=this,n=u,r=u,o=u;return function(){return n=e,p.get("Rational")["$==="](n)?(r=i(t.num,e.$numerator()),o=i(t.den,e.$denominator()),t.$Rational(r,o)):p.get("Integer")["$==="](n)?t.$Rational(i(t.num,e),t.den):p.get("Float")["$==="](n)?i(t.$to_f(),e):t.$__coerced__("*",e)}()}),e.defn(f,"$/",function(e){var t=this,r=u,o=u,a=u;return function(){return r=e,p.get("Rational")["$==="](r)?(o=i(t.num,e.$denominator()),a=i(t.den,e.$numerator()),t.$Rational(o,a)):p.get("Integer")["$==="](r)?e["$=="](0)?n(t.$to_f(),0):t.$Rational(t.num,i(t.den,e)):p.get("Float")["$==="](r)?n(t.$to_f(),e):t.$__coerced__("/",e)}()}),e.defn(f,"$**",function(e){var n,r,i=this,o=u;return function(){return o=e,p.get("Integer")["$==="](o)?(n=(r=i["$=="](0))?t(e,0):i["$=="](0))===u||n.$$is_boolean&&1!=n?a(e,0)?i.$Rational(i.num["$**"](e),i.den["$**"](e)):t(e,0)?i.$Rational(i.den["$**"](e["$-@"]()),i.num["$**"](e["$-@"]())):i.$Rational(1,1):p.get("Float").$$scope.get("INFINITY"):p.get("Float")["$==="](o)?i.$to_f()["$**"](e):p.get("Rational")["$==="](o)?e["$=="](0)?i.$Rational(1,1):e.$denominator()["$=="](1)?t(e,0)?i.$Rational(i.den["$**"](e.$numerator().$abs()),i.num["$**"](e.$numerator().$abs())):i.$Rational(i.num["$**"](e.$numerator()),i.den["$**"](e.$numerator())):(n=(r=i["$=="](0))?t(e,0):i["$=="](0))===u||n.$$is_boolean&&1!=n?i.$to_f()["$**"](e):i.$raise(p.get("ZeroDivisionError"),"divided by 0"):i.$__coerced__("**",e)}()}),e.defn(f,"$abs",function(){var e=this;return e.$Rational(e.num.$abs(),e.den.$abs())}),e.defn(f,"$ceil",function(e){var t=this;return null==e&&(e=0),e["$=="](0)?n(t.num["$-@"](),t.den)["$-@"]().$ceil():t.$with_precision("ceil",e)}),e.alias(f,"divide","/"),e.defn(f,"$floor",function(e){var t=this;return null==e&&(e=0),e["$=="](0)?n(t.num["$-@"](),t.den)["$-@"]().$floor():t.$with_precision("floor",e)}),e.defn(f,"$hash",function(){var e=this;return"Rational:"+e.num+":"+e.den}),e.defn(f,"$inspect",function(){var e=this;return"("+e.$to_s()+")"}),e.alias(f,"quo","/"),e.defn(f,"$rationalize",function(e){var t=this;if(arguments.length>1&&t.$raise(p.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),null==e)return t;for(var i,a,l,$,u,c=e.$abs(),f=r(t,c),d=o(t,c),h=0,g=1,v=1,m=0;;){if(l=f.$ceil(),s(l,d))break;$=l-1,i=$*g+h,a=$*m+v,u=n(1,r(d,$)),d=n(1,r(f,$)),f=u,h=g,v=m,g=i,m=a}return t.$Rational(l*g+h,l*m+v)}),e.defn(f,"$round",function(e){var r=this,a=u,s=u,l=u;return null==e&&(e=0),e["$=="](0)?r.num["$=="](0)?0:r.den["$=="](1)?r.num:(a=o(i(r.num.$abs(),2),r.den),s=i(r.den,2),l=n(a,s).$truncate(),t(r.num,0)?l["$-@"]():l):r.$with_precision("round",e)}),e.defn(f,"$to_f",function(){var e=this;return n(e.num,e.den)}),e.defn(f,"$to_i",function(){var e=this;return e.$truncate()}),e.defn(f,"$to_r",function(){var e=this;return e}),e.defn(f,"$to_s",function(){var e=this;return""+e.num+"/"+e.den}),e.defn(f,"$truncate",function(e){var n=this;return null==e&&(e=0),e["$=="](0)?t(n.num,0)?n.$ceil():n.$floor():n.$with_precision("truncate",e)}),e.defn(f,"$with_precision",function(e,r){var o,a=this,s=u,l=u;return((o=p.get("Integer")["$==="](r))===u||o.$$is_boolean&&1!=o)&&a.$raise(p.get("TypeError"),"not an Integer"),s=10["$**"](r),l=i(a,s),t(r,1)?n(l.$send(e),s).$to_i():a.$Rational(l.$send(e),s)}),u&&"with_precision"}($.base,$.get("Numeric")),function(t){var n,r=n=f(t,"Kernel"),i=(r.$$proto,r.$$scope);e.defn(r,"$Rational",function(e,t){return null==t&&(t=1),i.get("Rational").$convert(e,t)})}($.base)},Opal.modules["corelib/time"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="ignore";var s=e.top,l=e,$=e.nil,u=(e.breaker,e.slice),c=e.klass,f=e.range;return e.add_stubs(["$require","$include","$===","$raise","$coerce_to!","$respond_to?","$to_str","$to_i","$new","$<=>","$to_f","$nil?","$>","$<","$strftime","$year","$month","$day","$+","$round","$/","$-","$copy_instance_variables","$initialize_dup","$is_a?","$zero?","$wday","$utc?","$mon","$yday","$hour","$min","$sec","$rjust","$ljust","$zone","$to_s","$[]","$cweek_cyear","$isdst","$<=","$!=","$==","$ceil"]),s.$require("corelib/comparable"),function(s,$super){function l(){}function d(e,t,n,r,i,o){if(e=e.$$is_string?parseInt(e,10):h.get("Opal")["$coerce_to!"](e,h.get("Integer"),"to_int"),t===$)t=1;else if(!t.$$is_number)if(t["$respond_to?"]("to_str"))switch(t=t.$to_str(),t.toLowerCase()){case"jan":t=1;break;case"feb":t=2;break;case"mar":t=3;break;case"apr":t=4;break;case"may":t=5;break;case"jun":t=6;break;case"jul":t=7;break;case"aug":t=8;break;case"sep":t=9;break;case"oct":t=10;break;case"nov":t=11;break;case"dec":t=12;break;default:t=t.$to_i()}else t=h.get("Opal")["$coerce_to!"](t,h.get("Integer"),"to_int");return(1>t||t>12)&&p.$raise(h.get("ArgumentError"),"month out of range: "+t),t-=1,n=n===$?1:n.$$is_string?parseInt(n,10):h.get("Opal")["$coerce_to!"](n,h.get("Integer"),"to_int"),(1>n||n>31)&&p.$raise(h.get("ArgumentError"),"day out of range: "+n),r=r===$?0:r.$$is_string?parseInt(r,10):h.get("Opal")["$coerce_to!"](r,h.get("Integer"),"to_int"),(0>r||r>24)&&p.$raise(h.get("ArgumentError"),"hour out of range: "+r),i=i===$?0:i.$$is_string?parseInt(i,10):h.get("Opal")["$coerce_to!"](i,h.get("Integer"),"to_int"),(0>i||i>59)&&p.$raise(h.get("ArgumentError"),"min out of range: "+i),o===$?o=0:o.$$is_number||(o=o.$$is_string?parseInt(o,10):h.get("Opal")["$coerce_to!"](o,h.get("Integer"),"to_int")),(0>o||o>60)&&p.$raise(h.get("ArgumentError"),"sec out of range: "+o),[e,t,n,r,i,o]}var p=l=c(s,$super,"Time",l),h=(p.$$proto,p.$$scope);p.$include(h.get("Comparable"));var g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],v=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.defs(p,"$at",function(e,t){var n,r=this;return h.get("Time")["$==="](e)?(void 0!==t&&r.$raise(h.get("TypeError"),"can't convert Time into an exact number"),n=new Date(e.getTime()),n.is_utc=e.is_utc,n):(e.$$is_number||(e=h.get("Opal")["$coerce_to!"](e,h.get("Integer"),"to_int")),void 0===t?new Date(1e3*e):(t.$$is_number||(t=h.get("Opal")["$coerce_to!"](t,h.get("Integer"),"to_int")),new Date(1e3*e+t/1e3)))}),e.defs(p,"$new",function(e,t,n,r,i,o,a){var s=this;null==t&&(t=$),null==n&&(n=$),null==r&&(r=$),null==i&&(i=$),null==o&&(o=$),null==a&&(a=$);var l,u;return void 0===e?new Date:(a!==$&&s.$raise(h.get("ArgumentError"),"Opal does not support explicitly specifying UTC offset for Time"),l=d(e,t,n,r,i,o),e=l[0],t=l[1],n=l[2],r=l[3],i=l[4],o=l[5],u=new Date(e,t,n,r,i,0,1e3*o),100>e&&u.setFullYear(e),u)}),e.defs(p,"$local",function(e,t,n,r,i,o,a,s,l,c){null==t&&(t=$),null==n&&(n=$),null==r&&(r=$),null==i&&(i=$),null==o&&(o=$),null==a&&(a=$),null==s&&(s=$),null==l&&(l=$),null==c&&(c=$);var f,p;return 10===arguments.length&&(f=u.call(arguments),e=f[5],t=f[4],n=f[3],r=f[2],i=f[1],o=f[0]),f=d(e,t,n,r,i,o),e=f[0],t=f[1],n=f[2],r=f[3],i=f[4],o=f[5],p=new Date(e,t,n,r,i,0,1e3*o),100>e&&p.setFullYear(e),p}),e.defs(p,"$gm",function(e,t,n,r,i,o,a,s,l,c){null==t&&(t=$),null==n&&(n=$),null==r&&(r=$),null==i&&(i=$),null==o&&(o=$),null==a&&(a=$),null==s&&(s=$),null==l&&(l=$),null==c&&(c=$);var f,p;return 10===arguments.length&&(f=u.call(arguments),e=f[5],t=f[4],n=f[3],r=f[2],i=f[1],o=f[0]),f=d(e,t,n,r,i,o),e=f[0],t=f[1],n=f[2],r=f[3],i=f[4],o=f[5],p=new Date(Date.UTC(e,t,n,r,i,0,1e3*o)),100>e&&p.setUTCFullYear(e),p.is_utc=!0,p}),function(t){t.$$scope,t.$$proto;return e.alias(t,"mktime","local"),e.alias(t,"utc","gm")}(e.get_singleton_class(p)),e.defs(p,"$now",function(){var e=this;return e.$new()}),e.defn(p,"$+",function(e){var t,n=this;(t=h.get("Time")["$==="](e))===$||t.$$is_boolean&&1!=t||n.$raise(h.get("TypeError"),"time + time?"),e.$$is_number||(e=h.get("Opal")["$coerce_to!"](e,h.get("Integer"),"to_int"));var r=new Date(n.getTime()+1e3*e);return r.is_utc=n.is_utc,r}),e.defn(p,"$-",function(e){var t,n=this;if((t=h.get("Time")["$==="](e))!==$&&(!t.$$is_boolean||1==t))return(n.getTime()-e.getTime())/1e3;e.$$is_number||(e=h.get("Opal")["$coerce_to!"](e,h.get("Integer"),"to_int"));var r=new Date(n.getTime()-1e3*e);return r.is_utc=n.is_utc,r}),e.defn(p,"$<=>",function(e){var r,i=this,o=$;return(r=h.get("Time")["$==="](e))===$||r.$$is_boolean&&1!=r?(o=e["$<=>"](i),(r=o["$nil?"]())===$||r.$$is_boolean&&1!=r?t(o,0)?-1:n(o,0)?1:0:$):i.$to_f()["$<=>"](e.$to_f())}),e.defn(p,"$==",function(e){var t=this;return t.$to_f()===e.$to_f()}),e.defn(p,"$asctime",function(){var e=this;return e.$strftime("%a %b %e %H:%M:%S %Y")}),e.alias(p,"ctime","asctime"),e.defn(p,"$day",function(){var e=this;return e.is_utc?e.getUTCDate():e.getDate()}),e.defn(p,"$yday",function(){var e=this,t=$,n=$,a=$;return t=h.get("Time").$new(e.$year()).$to_i(),n=h.get("Time").$new(e.$year(),e.$month(),e.$day()).$to_i(),a=86400,r(i(o(n,t),a).$round(),1)}),e.defn(p,"$isdst",function(){var e=this,t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1);return e.getTimezoneOffset()<Math.max(t.getTimezoneOffset(),n.getTimezoneOffset())}),e.alias(p,"dst?","isdst"),e.defn(p,"$dup",function(){var e=this,t=$;return t=new Date(e.getTime()),t.$copy_instance_variables(e),t.$initialize_dup(e),t}),e.defn(p,"$eql?",function(e){var t,n=this;return t=e["$is_a?"](h.get("Time")),t!==!1&&t!==$?n["$<=>"](e)["$zero?"]():t}),e.defn(p,"$friday?",function(){var e=this;return 5==e.$wday()}),e.defn(p,"$hash",function(){var e=this;return"Time:"+e.getTime()}),e.defn(p,"$hour",function(){var e=this;return e.is_utc?e.getUTCHours():e.getHours()}),e.defn(p,"$inspect",function(){var e,t=this;return(e=t["$utc?"]())===$||e.$$is_boolean&&1!=e?t.$strftime("%Y-%m-%d %H:%M:%S %z"):t.$strftime("%Y-%m-%d %H:%M:%S UTC")}),e.alias(p,"mday","day"),e.defn(p,"$min",function(){var e=this;return e.is_utc?e.getUTCMinutes():e.getMinutes()}),e.defn(p,"$mon",function(){var e=this;return(e.is_utc?e.getUTCMonth():e.getMonth())+1}),e.defn(p,"$monday?",function(){var e=this;return 1==e.$wday()}),e.alias(p,"month","mon"),e.defn(p,"$saturday?",function(){var e=this;return 6==e.$wday()}),e.defn(p,"$sec",function(){var e=this;return e.is_utc?e.getUTCSeconds():e.getSeconds()}),e.defn(p,"$succ",function(){var e=this,t=new Date(e.getTime()+1e3);return t.is_utc=e.is_utc,t}),e.defn(p,"$usec",function(){var e=this;return 1e3*e.getMilliseconds()}),e.defn(p,"$zone",function(){var e,t=this,n=t.toString();return e=-1==n.indexOf("(")?n.match(/[A-Z]{3,4}/)[0]:n.match(/\([^)]+\)/)[0].match(/[A-Z]/g).join(""),"GMT"==e&&/(GMT\W*\d{4})/.test(n)?RegExp.$1:e}),e.defn(p,"$getgm",function(){var e=this,t=new Date(e.getTime());return t.is_utc=!0,t}),e.alias(p,"getutc","getgm"),e.defn(p,"$gmtime",function(){var e=this;return e.is_utc=!0,e}),e.alias(p,"utc","gmtime"),e.defn(p,"$gmt?",function(){var e=this;return e.is_utc===!0}),e.defn(p,"$gmt_offset",function(){var e=this;return 60*-e.getTimezoneOffset()}),e.defn(p,"$strftime",function(e){var t=this;return e.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,n,r,i,o){var a="",s=-1!==n.indexOf("0"),l=-1===n.indexOf("-"),$=-1!==n.indexOf("_"),u=-1!==n.indexOf("^"),c=-1!==n.indexOf("#"),d=(n.match(":")||[]).length;switch(r=parseInt(r,10),s&&$&&(n.indexOf("0")<n.indexOf("_")?s=!1:$=!1),o){case"Y":a+=t.$year();break;case"C":s=!$,a+=Math.round(t.$year()/100);break;case"y":s=!$,a+=t.$year()%100;break;case"m":s=!$,a+=t.$mon();break;case"B":a+=_[t.$mon()-1];break;case"b":case"h":$=!s,a+=m[t.$mon()-1];break;case"d":s=!$,a+=t.$day();break;case"e":$=!s,a+=t.$day();break;case"j":a+=t.$yday();break;case"H":s=!$,a+=t.$hour();break;case"k":$=!s,a+=t.$hour();break;case"I":s=!$,a+=t.$hour()%12||12;break;case"l":$=!s,a+=t.$hour()%12||12;break;case"P":a+=t.$hour()>=12?"pm":"am";break;case"p":a+=t.$hour()>=12?"PM":"AM";break;case"M":s=!$,a+=t.$min();break;case"S":s=!$,a+=t.$sec();break;case"L":s=!$,r=isNaN(r)?3:r,a+=t.getMilliseconds();break;case"N":r=isNaN(r)?9:r,a+=t.getMilliseconds().toString().$rjust(3,"0"),a=a.$ljust(r,"0");break;case"z":var p=t.getTimezoneOffset(),h=Math.floor(Math.abs(p)/60),y=Math.abs(p)%60;a+=0>p?"+":"-",a+=10>h?"0":"",a+=h,d>0&&(a+=":"),a+=10>y?"0":"",a+=y,d>1&&(a+=":00");break;case"Z":a+=t.$zone();break;case"A":a+=g[t.$wday()];break;case"a":a+=v[t.$wday()];break;case"u":a+=t.$wday()+1;break;case"w":a+=t.$wday();break;case"V":a+=t.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":a+=t.$cweek_cyear()["$[]"](1);break;case"g":a+=t.$cweek_cyear()["$[]"](1)["$[]"](f(-2,-1,!1));break;case"s":a+=t.$to_i();break;case"n":a+="\n";break;case"t":a+="	";break;case"%":a+="%";break;case"c":a+=t.$strftime("%a %b %e %T %Y");break;case"D":case"x":a+=t.$strftime("%m/%d/%y");break;case"F":a+=t.$strftime("%Y-%m-%d");break;case"v":a+=t.$strftime("%e-%^b-%4Y");break;case"r":a+=t.$strftime("%I:%M:%S %p");break;case"R":a+=t.$strftime("%H:%M");break;case"T":case"X":a+=t.$strftime("%H:%M:%S");break;default:return e}return u&&(a=a.toUpperCase()),c&&(a=a.replace(/[A-Z]/,function(e){e.toLowerCase()}).replace(/[a-z]/,function(e){e.toUpperCase()})),l&&(s||$)&&(a=a.$rjust(isNaN(r)?2:r,$?" ":"0")),a})}),e.defn(p,"$sunday?",function(){var e=this;return 0==e.$wday()}),e.defn(p,"$thursday?",function(){var e=this;return 4==e.$wday()}),e.defn(p,"$to_a",function(){var e=this;return[e.$sec(),e.$min(),e.$hour(),e.$day(),e.$month(),e.$year(),e.$wday(),e.$yday(),e.$isdst(),e.$zone()]}),e.defn(p,"$to_f",function(){var e=this;return e.getTime()/1e3}),e.defn(p,"$to_i",function(){var e=this;return parseInt(e.getTime()/1e3,10)}),e.alias(p,"to_s","inspect"),e.defn(p,"$tuesday?",function(){var e=this;return 2==e.$wday()}),e.alias(p,"tv_sec","sec"),e.alias(p,"tv_usec","usec"),e.alias(p,"utc?","gmt?"),e.alias(p,"gmtoff","gmt_offset"),e.alias(p,"utc_offset","gmt_offset"),e.defn(p,"$wday",function(){var e=this;return e.is_utc?e.getUTCDay():e.getDay()}),e.defn(p,"$wednesday?",function(){var e=this;return 3==e.$wday()}),e.defn(p,"$year",function(){var e=this;return e.is_utc?e.getUTCFullYear():e.getFullYear()}),e.defn(p,"$cweek_cyear",function(){var e,t,n=this,s=$,l=$,u=$,c=$,f=$,d=$,p=$,g=$;return s=h.get("Time").$new(n.$year(),1,1),l=s.$wday(),u=0,c=n.$year(),(e=(t=a(l,4))?l["$!="](0):a(l,4))===$||e.$$is_boolean&&1!=e?(f=o(o(l,7),1),f["$=="](-8)&&(f=-1)):f=o(l,1),d=i(r(n.$yday(),f),7).$ceil(),a(d,0)?h.get("Time").$new(o(n.$year(),1),12,31).$cweek_cyear():(d["$=="](53)&&(p=h.get("Time").$new(n.$year(),12,31),g=p.$wday(),(e=(t=a(g,3))?g["$!="](0):a(g,3))===$||e.$$is_boolean&&1!=e||(d=1,c=r(c,1))),[d,c])}),$&&"cweek_cyear"}(l.base,Date)},Opal.modules["corelib/struct"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var i=e.top,o=e,a=e.nil,s=e.breaker,l=(e.slice,e.klass),$=e.hash2;return e.add_stubs(["$require","$include","$==","$[]","$upcase","$const_set","$new","$unshift","$each","$define_struct_attribute","$class_eval","$to_proc","$allocate","$initialize","$raise","$<<","$members","$define_method","$instance_eval","$each_with_index","$[]=","$class","$hash","$===","$<","$-@","$size","$>=","$coerce_to!","$include?","$to_sym","$instance_of?","$__id__","$eql?","$enum_for","$length","$map","$+","$join","$inspect","$each_pair","$inject","$flatten","$to_a"]),i.$require("corelib/enumerable"),function(i,$super){function o(){}var u,c,f,d=o=l(i,$super,"Struct",o),p=(d.$$proto,d.$$scope);return d.$include(p.get("Enumerable")),e.defs(d,"$new",u=function(t){var n,r,i,s,l=this,$=u.$$p,c=$||a,f=a,d=a,h=a,g=arguments.length-1;0>g&&(g=0);var v=new Array(g);for(f=0;g>f;f++)v[f]=arguments[f+1];for(u.$$p=null,d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return l["$=="](p.get("Struct"))?t["$[]"](0)["$=="](t["$[]"](0).$upcase())?p.get("Struct").$const_set(t,(n=l).$new.apply(n,e.to_a(v))):(v.$unshift(t),(r=(i=p.get("Class")).$new,r.$$p=(s=function(){var t,n,r,i,o=s.$$s||this;return(t=(n=v).$each,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=a),t.$define_struct_attribute(e)},r.$$s=o,r),t).call(n),c!==!1&&c!==a&&(t=(i=o).$class_eval,t.$$p=c.$to_proc(),t).call(i),function(t){t.$$scope,t.$$proto;return e.defn(t,"$new",function(){var t,n=this,r=a,i=a,o=arguments.length-0;0>o&&(o=0);var s=new Array(o);for(i=0;o>i;i++)s[i]=arguments[i+0];return r=n.$allocate(),r.$$data={},(t=r).$initialize.apply(t,e.to_a(s)),r}),e.alias(t,"[]","new")}(e.get_singleton_class(o))},s.$$s=l,s),r).call(i,l)):e.find_super_dispatcher(l,"new",u,$,o).apply(l,d)}),e.defs(d,"$define_struct_attribute",function(e){var t,n,r,i,o,s=this;return s["$=="](p.get("Struct"))&&s.$raise(p.get("ArgumentError"),"you cannot define attributes to the Struct class"),s.$members()["$<<"](e),(t=(n=s).$define_method,t.$$p=(r=function(){var t=r.$$s||this;return t.$$data[e]},r.$$s=s,r),t).call(n,e),(t=(i=s).$define_method,t.$$p=(o=function(t){var n=o.$$s||this;return null==t&&(t=a),n.$$data[e]=t},o.$$s=s,o),t).call(i,""+e+"=")}),e.defs(d,"$members",function(){var e,t=this;return null==t.members&&(t.members=a),t["$=="](p.get("Struct"))&&t.$raise(p.get("ArgumentError"),"the Struct class has no members"),(e=t.members)!==!1&&e!==a?e:t.members=[]}),e.defs(d,"$inherited",function(e){var t,n,r,i=this,o=a;return null==i.members&&(i.members=a),o=i.members,(t=(n=e).$instance_eval,t.$$p=(r=function(){var e=r.$$s||this;return e.members=o},r.$$s=i,r),t).call(n)}),e.defn(d,"$initialize",function(){var e,t,n,r=this,i=a,o=arguments.length-0;0>o&&(o=0);var s=new Array(o);for(i=0;o>i;i++)s[i]=arguments[i+0];return(e=(t=r.$members()).$each_with_index,e.$$p=(n=function(e,t){var r=n.$$s||this;return null==e&&(e=a),null==t&&(t=a),r["$[]="](e,s["$[]"](t))},n.$$s=r,n),e).call(t)}),e.defn(d,"$members",function(){var e=this;return e.$class().$members()}),e.defn(d,"$hash",function(){var e=this;return p.get("Hash").$new(e.$$data).$hash()}),e.defn(d,"$[]",function(e){var r,i=this;return(r=p.get("Integer")["$==="](e))===a||r.$$is_boolean&&1!=r?(r=p.get("String")["$==="](e))===a||r.$$is_boolean&&1!=r?i.$raise(p.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"):i.$$data.hasOwnProperty(e)||i.$raise(p.get("NameError").$new("no member '"+e+"' in struct",e)):(t(e,i.$members().$size()["$-@"]())&&i.$raise(p.get("IndexError"),"offset "+e+" too small for struct(size:"+i.$members().$size()+")"),
n(e,i.$members().$size())&&i.$raise(p.get("IndexError"),"offset "+e+" too large for struct(size:"+i.$members().$size()+")"),e=i.$members()["$[]"](e)),e=p.get("Opal")["$coerce_to!"](e,p.get("String"),"to_str"),i.$$data[e]}),e.defn(d,"$[]=",function(e,r){var i,o=this;return(i=p.get("Integer")["$==="](e))===a||i.$$is_boolean&&1!=i?(i=p.get("String")["$==="](e))===a||i.$$is_boolean&&1!=i?o.$raise(p.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"):((i=o.$members()["$include?"](e.$to_sym()))===a||i.$$is_boolean&&1!=i)&&o.$raise(p.get("NameError").$new("no member '"+e+"' in struct",e)):(t(e,o.$members().$size()["$-@"]())&&o.$raise(p.get("IndexError"),"offset "+e+" too small for struct(size:"+o.$members().$size()+")"),n(e,o.$members().$size())&&o.$raise(p.get("IndexError"),"offset "+e+" too large for struct(size:"+o.$members().$size()+")"),e=o.$members()["$[]"](e)),e=p.get("Opal")["$coerce_to!"](e,p.get("String"),"to_str"),o.$$data[e]=r}),e.defn(d,"$==",function(e){function t(e,n){var r,a,s;i[e.$__id__()]=!0,o[n.$__id__()]=!0;for(r in e.$$data)if(a=e.$$data[r],s=n.$$data[r],p.get("Struct")["$==="](a)){if(!(i.hasOwnProperty(a.$__id__())&&o.hasOwnProperty(s.$__id__())||t(a,s)))return!1}else if(!a["$=="](s))return!1;return!0}var n,r=this;if((n=e["$instance_of?"](r.$class()))===a||n.$$is_boolean&&1!=n)return!1;var i={},o={};return t(r,e)}),e.defn(d,"$eql?",function(e){function t(e,n){var r,a,s;i[e.$__id__()]=!0,o[n.$__id__()]=!0;for(r in e.$$data)if(a=e.$$data[r],s=n.$$data[r],p.get("Struct")["$==="](a)){if(!(i.hasOwnProperty(a.$__id__())&&o.hasOwnProperty(s.$__id__())||t(a,s)))return!1}else if(!a["$eql?"](s))return!1;return!0}var n,r=this;if((n=e["$instance_of?"](r.$class()))===a||n.$$is_boolean&&1!=n)return!1;var i={},o={};return t(r,e)}),e.defn(d,"$each",c=function(){var t,n,r,i,o,l=this,$=c.$$p,u=$||a;return c.$$p=null,u===a?(t=(n=l).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=l,r),t).call(n,"each"):((t=(i=l.$members()).$each,t.$$p=(o=function(t){var n,r=o.$$s||this;return null==t&&(t=a),n=e.yield1(u,r["$[]"](t)),n===s?n:n},o.$$s=l,o),t).call(i),l)}),e.defn(d,"$each_pair",f=function(){var t,n,r,i,o,l=this,$=f.$$p,u=$||a;return f.$$p=null,u===a?(t=(n=l).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=l,r),t).call(n,"each_pair"):((t=(i=l.$members()).$each,t.$$p=(o=function(t){var n,r=o.$$s||this;return null==t&&(t=a),n=e.yield1(u,[t,r["$[]"](t)]),n===s?n:n},o.$$s=l,o),t).call(i),l)}),e.defn(d,"$length",function(){var e=this;return e.$members().$length()}),e.alias(d,"size","length"),e.defn(d,"$to_a",function(){var e,t,n,r=this;return(e=(t=r.$members()).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=a),t["$[]"](e)},n.$$s=r,n),e).call(t)}),e.alias(d,"values","to_a"),e.defn(d,"$inspect",function(){var e,t,n,i=this,o=a;return o="#<struct ",i.$class()["$=="](p.get("Struct"))&&(o=r(o,""+i.$class()+" ")),o=r(o,(e=(t=i.$each_pair()).$map,e.$$p=(n=function(e,t){n.$$s||this;return null==e&&(e=a),null==t&&(t=a),""+e+"="+t.$inspect()},n.$$s=i,n),e).call(t).$join(", ")),o=r(o,">")}),e.alias(d,"to_s","inspect"),e.defn(d,"$to_h",function(){var e,t,n,r=this;return(e=(t=r.$members()).$inject,e.$$p=(n=function(e,t){var r=n.$$s||this;return null==e&&(e=a),null==t&&(t=a),e["$[]="](t,r["$[]"](t)),e},n.$$s=r,n),e).call(t,$([],{}))}),e.defn(d,"$values_at",function(){var e,t,n,r=this,i=a,o=arguments.length-0;0>o&&(o=0);var s=new Array(o);for(i=0;o>i;i++)s[i]=arguments[i+0];s=(e=(t=s).$map,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=a),e.$$is_range?e.$to_a():e},n.$$s=r,n),e).call(t).$flatten();for(var l=[],$=0,u=s.length;u>$;$++)s[$].$$is_number||r.$raise(p.get("TypeError"),"no implicit conversion of "+s[$].$class()+" into Integer"),l.push(r["$[]"](s[$]));return l}),a&&"values_at"}(o.base,null)},Opal.modules["corelib/io"]=function(e){e.dynamic_require_severity="ignore";var t,n,r=(e.top,e),i=e.nil,o=(e.breaker,e.slice,e.klass),a=e.module,s=e.gvars;return e.add_stubs(["$attr_accessor","$size","$write","$join","$map","$String","$empty?","$concat","$chomp","$getbyte","$getc","$raise","$new","$write_proc=","$extend"]),function(t,$super){function n(){}var r=n=o(t,$super,"IO",n),l=r.$$proto,$=r.$$scope;return l.tty=l.closed=i,e.cdecl($,"SEEK_SET",0),e.cdecl($,"SEEK_CUR",1),e.cdecl($,"SEEK_END",2),e.defn(r,"$tty?",function(){var e=this;return e.tty}),e.defn(r,"$closed?",function(){var e=this;return e.closed}),r.$attr_accessor("write_proc"),e.defn(r,"$write",function(e){var t=this;return t.write_proc(e),e.$size()}),r.$attr_accessor("sync","tty"),e.defn(r,"$flush",function(){return i}),function(t){var n,r=n=a(t,"Writable");r.$$proto,r.$$scope;e.defn(r,"$<<",function(e){var t=this;return t.$write(e),t}),e.defn(r,"$print",function(){var e,t,n,r=this,o=i;null==s[","]&&(s[","]=i);var a=arguments.length-0;0>a&&(a=0);var l=new Array(a);for(o=0;a>o;o++)l[o]=arguments[o+0];return r.$write((e=(t=l).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=i),t.$String(e)},n.$$s=r,n),e).call(t).$join(s[","])),i}),e.defn(r,"$puts",function(){var e,t,n,r=this,o=i,a=i;null==s["/"]&&(s["/"]=i);var l=arguments.length-0;0>l&&(l=0);var $=new Array(l);for(a=0;l>a;a++)$[a]=arguments[a+0];return o=s["/"],(e=$["$empty?"]())===i||e.$$is_boolean&&1!=e?r.$write((e=(t=$).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=i),t.$String(e).$chomp()},n.$$s=r,n),e).call(t).$concat([i]).$join(o)):r.$write(s["/"]),i})}($.base),function(t){var n,r=n=a(t,"Readable"),o=(r.$$proto,r.$$scope);e.defn(r,"$readbyte",function(){var e=this;return e.$getbyte()}),e.defn(r,"$readchar",function(){var e=this;return e.$getc()}),e.defn(r,"$readline",function(e){var t=this;return null==s["/"]&&(s["/"]=i),null==e&&(e=s["/"]),t.$raise(o.get("NotImplementedError"))}),e.defn(r,"$readpartial",function(e,t){var n=this;return null==t&&(t=i),n.$raise(o.get("NotImplementedError"))})}($.base)}(r.base,null),e.cdecl(r,"STDERR",s.stderr=r.get("IO").$new()),e.cdecl(r,"STDIN",s.stdin=r.get("IO").$new()),e.cdecl(r,"STDOUT",s.stdout=r.get("IO").$new()),t=["object"==typeof process?function(e){process.stdout.write(e)}:function(e){console.log(e)}],n=r.get("STDOUT"),n["$write_proc="].apply(n,t),t[t.length-1],t=["object"==typeof process?function(e){process.stderr.write(e)}:function(e){console.warn(e)}],n=r.get("STDERR"),n["$write_proc="].apply(n,t),t[t.length-1],r.get("STDOUT").$extend(r.get("IO").$$scope.get("Writable")),r.get("STDERR").$extend(r.get("IO").$$scope.get("Writable"))},Opal.modules["corelib/main"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil;e.breaker,e.slice;return e.add_stubs(["$include"]),e.defs(t,"$to_s",function(){return"main"}),e.defs(t,"$include",function(e){return n.get("Object").$include(e)}),r&&"include"},Opal.modules["corelib/dir"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,i=(e.slice,e.klass);return e.add_stubs(["$[]"]),function(t,$super){function o(){}var a=o=i(t,$super,"Dir",o);a.$$proto,a.$$scope;return function(t){var i,o=t.$$scope;t.$$proto;return e.defn(t,"$chdir",i=function(t){var o,a=i.$$p,s=a||n,l=n;i.$$p=null;try{return l=e.current_dir,e.current_dir=t,o=e.yieldX(s,[]),o===r?o:o}finally{e.current_dir=l}}),e.defn(t,"$pwd",function(){return e.current_dir||"."}),e.alias(t,"getwd","pwd"),e.defn(t,"$home",function(){var e;return(e=o.get("ENV")["$[]"]("HOME"))!==!1&&e!==n?e:"."}),n&&"home"}(e.get_singleton_class(a))}(t.base,null)},Opal.modules["corelib/file"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass),i=e.range;return e.add_stubs(["$join","$compact","$split","$==","$first","$[]=","$home","$each","$pop","$<<","$[]","$gsub","$find","$=~"]),function(t,$super){function o(){}var a=o=r(t,$super,"File",o),s=(a.$$proto,a.$$scope);return e.cdecl(s,"Separator",e.cdecl(s,"SEPARATOR","/")),e.cdecl(s,"ALT_SEPARATOR",n),e.cdecl(s,"PATH_SEPARATOR",":"),function(t){var r=t.$$scope;t.$$proto;return e.defn(t,"$expand_path",function(e,t){var i,o,a,s=this,l=n,$=n;return null==t&&(t=n),e=[t,e].$compact().$join(r.get("SEPARATOR")),l=e.$split(r.get("SEPARATOR")),$=[],l.$first()["$=="]("~")&&l["$[]="](0,r.get("Dir").$home()),(i=(o=l).$each,i.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),e["$=="]("..")?$.$pop():$["$<<"](e)},a.$$s=s,a),i).call(o),$.$join(r.get("SEPARATOR"))}),e.alias(t,"realpath","expand_path"),e.defn(t,"$dirname",function(e){var t=this;return t.$split(e)["$[]"](i(0,-2,!1))}),e.defn(t,"$basename",function(e){var t=this;return t.$split(e)["$[]"](-1)}),e.defn(t,"$exist?",function(t){return null!=e.modules[t]}),e.alias(t,"exists?","exist?"),e.defn(t,"$directory?",function(t){var i,o,a,s=this,l=n,$=n;l=[];for(var u in e.modules)l.push(u);return t=t.$gsub(new RegExp("(^."+r.get("SEPARATOR")+"+|"+r.get("SEPARATOR")+"+$)")),$=(i=(o=l).$find,i.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),e["$=~"](new RegExp("^"+t))},a.$$s=s,a),i).call(o)}),e.defn(t,"$join",function(){var e=n,t=arguments.length-0;0>t&&(t=0);var i=new Array(t);for(e=0;t>e;e++)i[e]=arguments[e+0];return i.$join(r.get("SEPARATOR")).$gsub(new RegExp(""+r.get("SEPARATOR")+"+"),r.get("SEPARATOR"))}),e.defn(t,"$split",function(e){return e.$split(r.get("SEPARATOR"))}),n&&"split"}(e.get_singleton_class(a))}(t.base,t.get("IO"))},Opal.modules["corelib/process"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$to_f","$now","$new"]),function(t,$super){function i(){}var o=i=r(t,$super,"Process",i),a=(o.$$proto,o.$$scope);return e.cdecl(a,"CLOCK_REALTIME",0),e.cdecl(a,"CLOCK_MONOTONIC",1),e.defs(o,"$pid",function(){return 0}),e.defs(o,"$times",function(){var e=n;return e=a.get("Time").$now().$to_f(),a.get("Benchmark").$$scope.get("Tms").$new(e,e,e,e,e)}),e.defs(o,"$clock_gettime",function(e,t){return null==t&&(t=n),a.get("Time").$now().$to_f()}),n&&"clock_gettime"}(t.base,null),function(t,$super){function i(){}var o=i=r(t,$super,"Signal",i);o.$$proto,o.$$scope;return e.defs(o,"$trap",function(){return n}),n&&"trap"}(t.base,null),function(t,$super){function i(){}var o=i=r(t,$super,"GC",i);o.$$proto,o.$$scope;return e.defs(o,"$start",function(){return n}),n&&"start"}(t.base,null)},Opal.modules["corelib/unsupported"]=function(e){function t(e){l[e]||(l[e]=!0,r.$warn(e))}e.dynamic_require_severity="ignore";var n={method_missing:!0,arity_check:!1,freezing:!0,tainting:!0},r=e.top,i=e,o=e.nil,a=(e.breaker,e.slice,e.klass),s=e.module;e.add_stubs(["$warn","$raise","$%","$module_function"]);var l={};return function(t,$super){function n(){}var r=n=a(t,$super,"String",n),i=(r.$$proto,r.$$scope),s="String#%s not supported. Mutable String methods are not supported in Opal.";return e.defn(r,"$<<",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("<<"))}),e.defn(r,"$capitalize!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("capitalize!"))}),e.defn(r,"$chomp!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("chomp!"))}),e.defn(r,"$chop!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("chop!"))}),e.defn(r,"$downcase!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("downcase!"))}),e.defn(r,"$gsub!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("gsub!"))}),e.defn(r,"$lstrip!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("lstrip!"))}),e.defn(r,"$next!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("next!"))}),e.defn(r,"$reverse!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("reverse!"))}),e.defn(r,"$slice!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("slice!"))}),e.defn(r,"$squeeze!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("squeeze!"))}),e.defn(r,"$strip!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("strip!"))}),e.defn(r,"$sub!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("sub!"))}),e.defn(r,"$succ!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("succ!"))}),e.defn(r,"$swapcase!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("swapcase!"))}),e.defn(r,"$tr!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("tr!"))}),e.defn(r,"$tr_s!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("tr_s!"))}),e.defn(r,"$upcase!",function(){var e=this;return e.$raise(i.get("NotImplementedError"),s["$%"]("upcase!"))}),o&&"upcase!"}(i.base,null),function(r){var i,a=i=s(r,"Kernel"),l=(a.$$proto,a.$$scope),$="Object freezing is not supported by Opal";e.defn(a,"$freeze",function(){var e,r=this;return(e=n.freezing)===o||e.$$is_boolean&&1!=e?r.$raise(l.get("NotImplementedError"),$):t($),r}),e.defn(a,"$frozen?",function(){var e,r=this;return(e=n.freezing)===o||e.$$is_boolean&&1!=e?r.$raise(l.get("NotImplementedError"),$):t($),!1})}(i.base),function(r){var i,a=i=s(r,"Kernel"),l=(a.$$proto,a.$$scope),$="Object tainting is not supported by Opal";e.defn(a,"$taint",function(){var e,r=this;return(e=n.tainting)===o||e.$$is_boolean&&1!=e?r.$raise(l.get("NotImplementedError"),$):t($),r}),e.defn(a,"$untaint",function(){var e,r=this;return(e=n.tainting)===o||e.$$is_boolean&&1!=e?r.$raise(l.get("NotImplementedError"),$):t($),r}),e.defn(a,"$tainted?",function(){var e,r=this;return(e=n.tainting)===o||e.$$is_boolean&&1!=e?r.$raise(l.get("NotImplementedError"),$):t($),!1})}(i.base),function(t){var n,r=n=s(t,"Marshal"),i=(r.$$proto,r.$$scope),o="Marshalling is not supported by Opal";r.$module_function(),e.defn(r,"$dump",function(){var e=this;return e.$raise(i.get("NotImplementedError"),o)}),e.defn(r,"$load",function(){var e=this;return e.$raise(i.get("NotImplementedError"),o)}),e.defn(r,"$restore",function(){var e=this;return e.$raise(i.get("NotImplementedError"),o)})}(i.base),function(t,$super){function n(){}var r=n=a(t,$super,"Module",n);r.$$proto,r.$$scope;return e.defn(r,"$public",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return 0===r.length&&(e.$$module_function=!1),o}),e.alias(r,"private","public"),e.alias(r,"protected","public"),e.alias(r,"nesting","public"),e.defn(r,"$private_class_method",function(){var e=this;return e}),e.alias(r,"public_class_method","private_class_method"),e.defn(r,"$private_method_defined?",function(e){return!1}),e.defn(r,"$private_constant",function(){return o}),e.alias(r,"protected_method_defined?","private_method_defined?"),e.alias(r,"public_instance_methods","instance_methods"),e.alias(r,"public_method_defined?","method_defined?")}(i.base,null),function(t){var n,r=n=s(t,"Kernel");r.$$proto,r.$$scope;e.defn(r,"$private_methods",function(){return[]}),e.alias(r,"private_instance_methods","private_methods")}(i.base),function(t){var n,r=n=s(t,"Kernel"),i=(r.$$proto,r.$$scope);e.defn(r,"$eval",function(){var e=this;return e.$raise(i.get("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+i.get("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))})}(i.base)},function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("opal/base"),t.$require("opal/mini"),t.$require("corelib/array/inheritance"),t.$require("corelib/string/inheritance"),t.$require("corelib/string/encoding"),t.$require("corelib/math"),t.$require("corelib/complex"),t.$require("corelib/rational"),t.$require("corelib/time"),t.$require("corelib/struct"),t.$require("corelib/io"),t.$require("corelib/main"),t.$require("corelib/dir"),t.$require("corelib/file"),t.$require("corelib/process"),t.$require("corelib/unsupported")}(Opal),Opal.modules["native"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.dynamic_require_severity="ignore";var r=e.top,i=e,o=e.nil,a=e.breaker,s=e.slice,l=e.module,$=e.range,u=e.hash2,c=e.klass,f=e.gvars;return e.add_stubs(["$try_convert","$native?","$respond_to?","$to_n","$raise","$inspect","$Native","$proc","$map!","$end_with?","$define_method","$[]","$convert","$call","$to_proc","$new","$each","$native_reader","$native_writer","$extend","$is_a?","$map","$alias_method","$to_a","$_Array","$include","$method_missing","$bind","$instance_method","$[]=","$slice","$-","$length","$enum_for","$===","$>=","$<<","$each_pair","$_initialize","$name","$exiting_mid","$native_module"]),function(t){var n,r,i,a=n=l(t,"Native"),c=(a.$$proto,a.$$scope);e.defs(a,"$is_a?",function(e,t){var n=this;try{return e instanceof n.$try_convert(t)}catch(r){return!1}}),e.defs(a,"$try_convert",function(e){var t=this;return t["$native?"](e)?e:e["$respond_to?"]("to_n")?e.$to_n():o}),e.defs(a,"$convert",function(e){var t=this;return t["$native?"](e)?e:e["$respond_to?"]("to_n")?e.$to_n():void t.$raise(c.get("ArgumentError"),""+e.$inspect()+" isn't native")}),e.defs(a,"$call",r=function(e,t){var n=this,i=r.$$p,a=i||o,s=o,l=arguments.length-2;0>l&&(l=0);var $=new Array(l);for(s=0;l>s;s++)$[s]=arguments[s+2];r.$$p=null;var u=e[t];if(u instanceof Function){for(var c=new Array($.length),f=0,d=$.length;d>f;f++){var p=$[f],h=n.$try_convert(p);c[f]=h===o?p:h}return a!==o&&c.push(a),n.$Native(u.apply(e,c))}return n.$Native(u)}),e.defs(a,"$proc",i=function(){var t,n,r,a=this,l=i.$$p,$=l||o;return i.$$p=null,$!==!1&&$!==o||a.$raise(c.get("LocalJumpError"),"no block given"),(t=(n=c.get("Kernel")).$proc,t.$$p=(r=function(t){var n,i,a,l=r.$$s||this,u=o;if(t=s.call(arguments,0),(n=(i=t)["$map!"],n.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=o),t.$Native(e)},a.$$s=l,a),n).call(i),u=l.$Native(this),this===e.global)return $.apply(l,t);var c=$.$$s;$.$$s=null;try{return $.apply(u,t)}finally{$.$$s=c}},r.$$s=a,r),t).call(n)}),function(t){var n,r=n=l(t,"Helpers"),i=(r.$$proto,r.$$scope);e.defn(r,"$alias_native",function(t,n,r){var a,l,c,f,d,p,h,g=this,v=o;if(null==n&&(n=t),null==n?r=u([],{}):n.$$is_hash?(r=n,n=t):null==r&&(r=u([],{})),!r.$$is_hash)throw e.ArgumentError.$new("expecting keyword args");return null==(v=r.$$smap.as)&&(v=o),(a=n["$end_with?"]("="))===o||a.$$is_boolean&&1!=a?v!==!1&&v!==o?(a=(f=g).$define_method,a.$$p=(d=function(t){var r,a,l,$,u=d.$$s||this,c=o;return null==u["native"]&&(u["native"]=o),t=s.call(arguments,0),r=d.$$p||o,d.$$p=null,(a=c=(l=($=i.get("Native")).$call,l.$$p=r.$to_proc(),l).apply($,[u["native"],n].concat(e.to_a(t))))===o||a.$$is_boolean&&1!=a?o:v.$new(c.$to_n())},d.$$s=g,d),a).call(f,t):(a=(p=g).$define_method,a.$$p=(h=function(t){var r,a,l,$=h.$$s||this;return null==$["native"]&&($["native"]=o),t=s.call(arguments,0),r=h.$$p||o,h.$$p=null,(a=(l=i.get("Native")).$call,a.$$p=r.$to_proc(),a).apply(l,[$["native"],n].concat(e.to_a(t)))},h.$$s=g,h),a).call(p,t):(a=(l=g).$define_method,a.$$p=(c=function(e){var t=c.$$s||this;return null==t["native"]&&(t["native"]=o),null==e&&(e=o),t["native"][n["$[]"]($(0,-2,!1))]=i.get("Native").$convert(e),e},c.$$s=g,c),a).call(l,t)}),e.defn(r,"$native_reader",function(){var e,t,n,r=this,i=o,a=arguments.length-0;0>a&&(a=0);var s=new Array(a);for(i=0;a>i;i++)s[i]=arguments[i+0];return(e=(t=s).$each,e.$$p=(n=function(e){var t,r,i,a=n.$$s||this;return null==e&&(e=o),(t=(r=a).$define_method,t.$$p=(i=function(){var t=i.$$s||this;return null==t["native"]&&(t["native"]=o),t.$Native(t["native"][e])},i.$$s=a,i),t).call(r,e)},n.$$s=r,n),e).call(t)}),e.defn(r,"$native_writer",function(){var e,t,n,r=this,i=o,a=arguments.length-0;0>a&&(a=0);var s=new Array(a);for(i=0;a>i;i++)s[i]=arguments[i+0];return(e=(t=s).$each,e.$$p=(n=function(e){var t,r,i,a=n.$$s||this;return null==e&&(e=o),(t=(r=a).$define_method,t.$$p=(i=function(t){var n=i.$$s||this;return null==n["native"]&&(n["native"]=o),null==t&&(t=o),n.$Native(n["native"][e]=t)},i.$$s=a,i),t).call(r,""+e+"=")},n.$$s=r,n),e).call(t)}),e.defn(r,"$native_accessor",function(){var t,n,r=this,i=o,a=arguments.length-0;0>a&&(a=0);var s=new Array(a);for(i=0;a>i;i++)s[i]=arguments[i+0];return(t=r).$native_reader.apply(t,e.to_a(s)),(n=r).$native_writer.apply(n,e.to_a(s))})}(c.base),e.defs(a,"$included",function(e){return e.$extend(c.get("Helpers"))}),e.defn(a,"$initialize",function(e){var t,n=this;return((t=c.get("Kernel")["$native?"](e))===o||t.$$is_boolean&&1!=t)&&c.get("Kernel").$raise(c.get("ArgumentError"),""+e.$inspect()+" isn't native"),n["native"]=e}),e.defn(a,"$to_n",function(){var e=this;return null==e["native"]&&(e["native"]=o),e["native"]})}(i.base),function(t){var n,r,i=n=l(t,"Kernel"),a=(i.$$proto,i.$$scope);e.defn(i,"$native?",function(e){return null==e||!e.$$class}),e.defn(i,"$Native",function(t){var n,r,i,l,$,u=this;return(n=null==t)===o||n.$$is_boolean&&1!=n?(n=u["$native?"](t))===o||n.$$is_boolean&&1!=n?(n=t["$is_a?"](a.get("Array")))===o||n.$$is_boolean&&1!=n?(n=t["$is_a?"](a.get("Proc")))===o||n.$$is_boolean&&1!=n?t:(n=(l=u).$proc,n.$$p=($=function(n){var r,i,a,l=$.$$s||this;return n=s.call(arguments,0),r=$.$$p||o,$.$$p=null,l.$Native((i=(a=t).$call,i.$$p=r.$to_proc(),i).apply(a,e.to_a(n)))},$.$$s=u,$),n).call(l):(n=(r=t).$map,n.$$p=(i=function(e){var t=i.$$s||this;return null==e&&(e=o),t.$Native(e)},i.$$s=u,i),n).call(r):a.get("Native").$$scope.get("Object").$new(t):o}),i.$alias_method("_Array","Array"),e.defn(i,"$Array",r=function(t){var n,i,s=this,l=r.$$p,$=l||o,u=o,c=arguments.length-1;0>c&&(c=0);var f=new Array(c);for(u=0;c>u;u++)f[u]=arguments[u+1];return r.$$p=null,(n=s["$native?"](t))===o||n.$$is_boolean&&1!=n?s.$_Array(t):(n=(i=a.get("Native").$$scope.get("Array")).$new,n.$$p=$.$to_proc(),n).apply(i,[t].concat(e.to_a(f))).$to_a()})}(i.base),function(n,$super){function r(){}var i,s,l,$=r=c(n,$super,"Object",r),f=$.$$proto,d=$.$$scope;return f["native"]=o,$.$include(e.get("Native")),e.defn($,"$==",function(e){var t=this;return t["native"]===d.get("Native").$try_convert(e)}),e.defn($,"$has_key?",function(t){var n=this;return e.hasOwnProperty.call(n["native"],t)}),e.alias($,"key?","has_key?"),e.alias($,"include?","has_key?"),e.alias($,"member?","has_key?"),e.defn($,"$each",i=function(){var t,n=this,r=i.$$p,s=r||o,l=o,$=arguments.length-0;0>$&&($=0);var u=new Array($);for(l=0;$>l;l++)u[l]=arguments[l+0];if(i.$$p=null,s!==o){for(var c in n["native"])(t=e.yieldX(s,[c,n["native"][c]]))===a?a.$v:t;return n}return(t=n).$method_missing.apply(t,["each"].concat(e.to_a(u)))}),e.defn($,"$[]",function(t){var n=this,r=n["native"][t];return r instanceof Function?r:e.get("Native").$call(n["native"],t)}),e.defn($,"$[]=",function(e,t){var n,r=this,i=o;return i=d.get("Native").$try_convert(t),(n=i===o)===o||n.$$is_boolean&&1!=n?r["native"][e]=i:r["native"][e]=t}),e.defn($,"$merge!",function(e){var t=this;e=d.get("Native").$convert(e);for(var n in e)t["native"][n]=e[n];return t}),e.defn($,"$respond_to?",function(e,t){var n=this;return null==t&&(t=!1),d.get("Kernel").$instance_method("respond_to?").$bind(n).$call(e,t)}),e.defn($,"$respond_to_missing?",function(t,n){var r=this;return null==n&&(n=!1),e.hasOwnProperty.call(r["native"],t)}),e.defn($,"$method_missing",s=function(n){var r,i,a=this,l=s.$$p,$=l||o,u=o,c=arguments.length-1;0>c&&(c=0);var f=new Array(c);for(u=0;c>u;u++)f[u]=arguments[u+1];return s.$$p=null,"="===n.charAt(n.length-1)?a["$[]="](n.$slice(0,t(n.$length(),1)),f["$[]"](0)):(r=(i=e.get("Native")).$call,r.$$p=$.$to_proc(),r).apply(i,[a["native"],n].concat(e.to_a(f)))}),e.defn($,"$nil?",function(){return!1}),e.defn($,"$is_a?",function(t){var n=this;return e.is_a(n,t)}),e.alias($,"kind_of?","is_a?"),e.defn($,"$instance_of?",function(e){var t=this;return t.$$class===e}),e.defn($,"$class",function(){var e=this;return e.$$class}),e.defn($,"$to_a",l=function(e){var t,n,r=this,i=l.$$p,a=i||o;return null==e&&(e=u([],{})),l.$$p=null,(t=(n=d.get("Native").$$scope.get("Array")).$new,t.$$p=a.$to_proc(),t).call(n,r["native"],e).$to_a()}),e.defn($,"$inspect",function(){var e=this;return"#<Native:"+String(e["native"])+">"}),o&&"inspect"}(i.get("Native"),i.get("BasicObject")),function(r,$super){function i(){}var s,l,$=i=c(r,$super,"Array",i),f=$.$$proto,d=$.$$scope;return f.named=f["native"]=f.get=f.block=f.set=f.length=o,$.$include(d.get("Native")),$.$include(d.get("Enumerable")),e.defn($,"$initialize",s=function(t,n){var r,i=this,a=s.$$p,l=a||o;return null==n&&(n=u([],{})),s.$$p=null,e.find_super_dispatcher(i,"initialize",s,null).apply(i,[t]),i.get=(r=n["$[]"]("get"))!==!1&&r!==o?r:n["$[]"]("access"),i.named=n["$[]"]("named"),i.set=(r=n["$[]"]("set"))!==!1&&r!==o?r:n["$[]"]("access"),i.length=(r=n["$[]"]("length"))!==!1&&r!==o?r:"length",i.block=l,(r=null==i.$length())===o||r.$$is_boolean&&1!=r?o:i.$raise(d.get("ArgumentError"),"no length found on the array-like object")}),e.defn($,"$each",l=function(){var t=this,n=l.$$p,r=n||o;if(l.$$p=null,r===!1||r===o)return t.$enum_for("each");for(var i=0,s=t.$length();s>i;i++){var $=e.yield1(r,t["$[]"](i));if($===a)return a.$v}return t}),e.defn($,"$[]",function(e){var t,n=this,r=o,i=o;return r=function(){return i=e,d.get("String")["$==="](i)||d.get("Symbol")["$==="](i)?(t=n.named)===o||t.$$is_boolean&&1!=t?n["native"][e]:n["native"][n.named](e):d.get("Integer")["$==="](i)?(t=n.get)===o||t.$$is_boolean&&1!=t?n["native"][e]:n["native"][n.get](e):o}(),r!==!1&&r!==o?(t=n.block)===o||t.$$is_boolean&&1!=t?n.$Native(r):n.block.$call(r):o}),e.defn($,"$[]=",function(e,t){var n,r=this;return(n=r.set)===o||n.$$is_boolean&&1!=n?r["native"][e]=d.get("Native").$convert(t):r["native"][r.set](e,d.get("Native").$convert(t))}),e.defn($,"$last",function(e){var r=this,i=o,a=o;if(null==e&&(e=o),e!==!1&&e!==o){for(i=t(r.$length(),1),a=[];n(i,0);)a["$<<"](r["$[]"](i)),i=t(i,1);return a}return r["$[]"](t(r.$length(),1))}),e.defn($,"$length",function(){var e=this;return e["native"][e.length]}),e.alias($,"to_ary","to_a"),e.defn($,"$inspect",function(){var e=this;return e.$to_a().$inspect()}),o&&"inspect"}(i.get("Native"),null),function(t,$super){function n(){}var r=n=c(t,$super,"Numeric",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e.valueOf()}),o&&"to_n"}(i.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"Proc",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e}),o&&"to_n"}(i.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"String",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e.valueOf()}),o&&"to_n"}(i.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"Regexp",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e.valueOf()}),o&&"to_n"}(i.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"MatchData",n),i=r.$$proto;r.$$scope;return i.matches=o,e.defn(r,"$to_n",function(){var e=this;return e.matches}),o&&"to_n"}(i.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"Struct",n),i=(r.$$proto,r.$$scope);return e.defn(r,"$to_n",function(){var e,t,n,r=this,a=o;return a={},(e=(t=r).$each_pair,e.$$p=(n=function(e,t){n.$$s||this;return null==e&&(e=o),null==t&&(t=o),a[e]=i.get("Native").$try_convert(t)},n.$$s=r,n),e).call(t),a}),o&&"to_n"}(i.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"Array",n),i=(r.$$proto,r.$$scope);return e.defn(r,"$to_n",function(){for(var e=this,t=[],n=0,r=e.length;r>n;n++){var o=e[n];t.push(i.get("Native").$try_convert(o))}return t}),o&&"to_n"}(i.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"Boolean",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e.valueOf()}),o&&"to_n"}(i.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"Time",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e}),o&&"to_n"}(i.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"NilClass",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){return null}),o&&"to_n"}(i.base,null),function(t,$super){function n(){}var r,i=n=c(t,$super,"Hash",n),a=(i.$$proto,i.$$scope);return i.$alias_method("_initialize","initialize"),e.defn(i,"$initialize",r=function(e){var t,n,i=this,s=r.$$p,l=s||o;if(r.$$p=null,void 0!==e&&e.constructor===Object){var $,u,c=i.$$smap,f=i.$$keys;for($ in e)u=e[$],u&&u.constructor===Object?c[$]=a.get("Hash").$new(u):u&&u.$$is_array?(u=u.map(function(e){return e&&e.constructor===Object?a.get("Hash").$new(e):e}),c[$]=u):c[$]=i.$Native(u),f.push($);return i}return(t=(n=i).$_initialize,t.$$p=l.$to_proc(),t).call(n,e)}),e.defn(i,"$to_n",function(){for(var e,t,n=this,r={},i=n.$$keys,o=n.$$smap,s=0,l=i.length;l>s;s++)e=i[s],e.$$is_string?t=o[e]:(e=e.key,t=e.value),r[e]=a.get("Native").$try_convert(t);return r}),o&&"to_n"}(i.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"Module",n);r.$$proto,r.$$scope;return e.defn(r,"$native_module",function(){var t=this;return e.global[t.$name()]=t}),o&&"native_module"}(i.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"Class",n),i=(r.$$proto,r.$$scope);return e.defn(r,"$native_alias",function(e,t){var n=this,r=n.$$proto["$"+t];r||n.$raise(i.get("NameError").$new("undefined method `"+t+"' for class `"+n.$inspect()+"'",n.$exiting_mid())),n.$$proto[e]=r}),e.defn(r,"$native_class",function(){var e=this;e.$native_module(),e["new"]=e.$new}),o&&"native_class"}(i.base,null),f.$=f.global=r.$Native(e.global)},Opal.modules["opal/jquery/constants"]=function(e){e.dynamic_require_severity="ignore";var t,n=e.top,r=e,i=e.nil;e.breaker,e.slice;return e.add_stubs(["$require","$raise"]),n.$require("native"),(t=null!=r.JQUERY_CLASS)===i||t.$$is_boolean&&1!=t?function(){return(t=!!e.global.jQuery)===i||t.$$is_boolean&&1!=t?(t=!!e.global.Zepto)===i||t.$$is_boolean&&1!=t?n.$raise(r.get("NameError"),"Can't find jQuery or Zepto. jQuery must be included before opal-jquery"):(e.cdecl(r,"JQUERY_SELECTOR",e.global.Zepto),e.cdecl(r,"JQUERY_CLASS",e.global.Zepto.zepto.Z)):e.cdecl(r,"JQUERY_CLASS",e.cdecl(r,"JQUERY_SELECTOR",e.global.jQuery))}():i},Opal.modules["opal/jquery/element"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,i=e.breaker,o=(e.slice,e.klass);return e.add_stubs(["$require","$to_n","$include","$each","$alias_native","$attr_reader","$nil?","$[]","$[]=","$raise","$is_a?","$has_key?","$delete","$call","$gsub","$upcase","$compact","$map","$respond_to?","$<<","$Native","$new"]),t.$require("native"),t.$require("opal/jquery/constants"),function(t,$super){function n(){}var a,s,l,$,u,c=n=o(t,$super,"Element",n),f=(c.$$proto,c.$$scope),d=f.get("JQUERY_SELECTOR").$to_n();return c.$include(f.get("Enumerable")),e.defs(c,"$find",function(e){return d(e)}),e.defs(c,"$[]",function(e){return d(e)}),e.defs(c,"$id",function(e){var t=document.getElementById(e);return t?d(t):r}),e.defs(c,"$new",function(e){return null==e&&(e="div"),d(document.createElement(e))}),e.defs(c,"$parse",function(e){return d(d.parseHTML?d.parseHTML(e):e)}),e.defs(c,"$expose",function(){var e,t,n,i=this,o=r,a=arguments.length-0;0>a&&(a=0);var s=new Array(a);for(o=0;a>o;o++)s[o]=arguments[o+0];return(e=(t=s).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t.$alias_native(e)},n.$$s=i,n),e).call(t)}),c.$attr_reader("selector"),c.$alias_native("after"),c.$alias_native("before"),c.$alias_native("parent"),c.$alias_native("parents"),c.$alias_native("prev"),c.$alias_native("remove"),c.$alias_native("hide"),c.$alias_native("show"),c.$alias_native("toggle"),c.$alias_native("children"),c.$alias_native("blur"),c.$alias_native("closest"),c.$alias_native("detach"),c.$alias_native("focus"),c.$alias_native("find"),c.$alias_native("next"),c.$alias_native("siblings"),c.$alias_native("text"),c.$alias_native("trigger"),c.$alias_native("append"),c.$alias_native("prepend"),c.$alias_native("serialize"),c.$alias_native("is"),c.$alias_native("filter"),c.$alias_native("last"),c.$alias_native("wrap"),c.$alias_native("stop"),c.$alias_native("clone"),c.$alias_native("empty"),c.$alias_native("get"),c.$alias_native("prop"),e.alias(c,"succ","next"),e.alias(c,"<<","append"),c.$alias_native("add_class","addClass"),c.$alias_native("append_to","appendTo"),c.$alias_native("has_class?","hasClass"),c.$alias_native("html=","html"),c.$alias_native("index"),c.$alias_native("is?","is"),c.$alias_native("remove_attr","removeAttr"),c.$alias_native("remove_class","removeClass"),c.$alias_native("submit"),c.$alias_native("text=","text"),c.$alias_native("toggle_class","toggleClass"),c.$alias_native("value=","val"),c.$alias_native("scroll_top=","scrollTop"),c.$alias_native("scroll_top","scrollTop"),c.$alias_native("scroll_left=","scrollLeft"),c.$alias_native("scroll_left","scrollLeft"),
c.$alias_native("remove_attribute","removeAttr"),c.$alias_native("slide_down","slideDown"),c.$alias_native("slide_up","slideUp"),c.$alias_native("slide_toggle","slideToggle"),c.$alias_native("fade_toggle","fadeToggle"),c.$alias_native("height=","height"),c.$alias_native("width=","width"),c.$alias_native("outer_width","outerWidth"),c.$alias_native("outer_height","outerHeight"),e.defn(c,"$to_n",function(){var e=this;return e}),e.defn(c,"$[]",function(e){var t=this,n=t.attr(e);return void 0===n?r:n}),e.defn(c,"$[]=",function(e,t){var n,i=this;return(n=t["$nil?"]())===r||n.$$is_boolean&&1!=n?i.attr(e,t):i.removeAttr(e)}),e.defn(c,"$attr",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var i=new Array(n);for(t=0;n>t;t++)i[t]=arguments[t+0];var o=i.length;switch(o){case 1:return e["$[]"](i[0]);case 2:return e["$[]="](i[0],i[1]);default:e.$raise(f.get("ArgumentError"),"#attr only accepts 1 or 2 arguments")}}),e.defn(c,"$has_attribute?",function(e){var t=this;return void 0!==t.attr(e)}),e.defn(c,"$append_to_body",function(){var e=this;return e.appendTo(document.body)}),e.defn(c,"$append_to_head",function(){var e=this;return e.appendTo(document.head)}),e.defn(c,"$at",function(e){var t=this,n=t.length;return 0>e&&(e+=n),0>e||e>=n?r:d(t[e])}),e.defn(c,"$class_name",function(){var e=this,t=e[0];return t&&t.className||""}),e.defn(c,"$class_name=",function(e){for(var t=this,n=0,r=t.length;r>n;n++)t[n].className=e;return t}),e.defn(c,"$css",function(e,t){var n,i,o=this;return null==t&&(t=r),i=t["$nil?"](),(n=i!==!1&&i!==r?e["$is_a?"](f.get("String")):i)===r||n.$$is_boolean&&1!=n?((n=e["$is_a?"](f.get("Hash")))===r||n.$$is_boolean&&1!=n?o.css(e,t):o.css(e.$to_n()),o):o.css(e)}),e.defn(c,"$animate",a=function(e){var t,n=this,i=a.$$p,o=i||r,s=r;a.$$p=null,s=function(){return(t=e["$has_key?"]("speed"))===r||t.$$is_boolean&&1!=t?400:e.$delete("speed")}(),n.animate(e.$to_n(),s,function(){!function(){return o!==r?o.$call():r}()})}),e.defn(c,"$data",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var i=new Array(n);for(t=0;n>t;t++)i[t]=arguments[t+0];var o=e.data.apply(e,i);return null==o?r:o}),e.defn(c,"$effect",s=function(e){var t,n,i,o,a,l=this,$=s.$$p,u=$||r,c=r,f=arguments.length-1;0>f&&(f=0);var d=new Array(f);for(c=0;f>c;c++)d[c]=arguments[c+1];return s.$$p=null,e=(t=(n=e).$gsub,t.$$p=(i=function(e){i.$$s||this;return null==e&&(e=r),e["$[]"](1).$upcase()},i.$$s=l,i),t).call(n,/_\w/),d=(t=(o=d).$map,t.$$p=(a=function(e){var t;a.$$s||this;return null==e&&(e=r),(t=e["$respond_to?"]("to_n"))===r||t.$$is_boolean&&1!=t?r:e.$to_n()},a.$$s=l,a),t).call(o).$compact(),d["$<<"](function(){!function(){return u!==r?u.$call():r}()}),l[e].apply(l,d)}),e.defn(c,"$visible?",function(){var e=this;return e.is(":visible")}),e.defn(c,"$offset",function(){var e=this;return e.$Native(e.offset())}),e.defn(c,"$each",l=function(){var t=this,n=l.$$p,o=n||r;l.$$p=null;for(var a=0,s=t.length;s>a;a++)if(e.yield1(o,d(t[a]))===i)return i.$v;return t}),e.defn(c,"$first",function(){var e=this;return e.length?e.first():r}),e.defn(c,"$html",function(e){var t=this;return null!=e?t.html(e):t.html()||""}),e.defn(c,"$id",function(){var e=this,t=e[0];return t&&t.id||""}),e.defn(c,"$id=",function(e){var t=this,n=t[0];return n&&(n.id=e),t}),e.defn(c,"$tag_name",function(){var e=this;return e.length>0?e[0].tagName.toLowerCase():r}),e.defn(c,"$inspect",function(){var e=this;if(e[0]===document)return"#<Element [document]>";if(e[0]===window)return"#<Element [window]>";for(var t,n,r,i=[],o=0,a=e.length;a>o;o++){if(n=e[o],!n.tagName)return"#<Element ["+n.toString()+"]";r="<"+n.tagName.toLowerCase(),(t=n.id)&&(r+=' id="'+t+'"'),(t=n.className)&&(r+=' class="'+t+'"'),i.push(r+">")}return"#<Element ["+i.join(", ")+"]>"}),e.defn(c,"$to_s",function(){for(var e,t=this,n=[],r=0,i=t.length;i>r;r++)e=t[r],n.push(e.outerHTML);return n.join(", ")}),e.defn(c,"$length",function(){var e=this;return e.length}),e.defn(c,"$any?",function(){var e=this;return e.length>0}),e.defn(c,"$empty?",function(){var e=this;return 0===e.length}),e.alias(c,"empty?","none?"),e.defn(c,"$on",$=function(e,t){var n=this,i=$.$$p,o=i||r;null==t&&(t=r),$.$$p=null;var a=function(e){return e.preventDefault&&(e=f.get("Event").$new(e)),o.apply(null,arguments)};return o._jq_wrap=a,t==r?n.on(e,a):n.on(e,t,a),o}),e.defn(c,"$one",u=function(e,t){var n=this,i=u.$$p,o=i||r;null==t&&(t=r),u.$$p=null;var a=function(e){return e.preventDefault&&(e=f.get("Event").$new(e)),o.apply(null,arguments)};return o._jq_wrap=a,t==r?n.one(e,a):n.one(e,t,a),o}),e.defn(c,"$off",function(e,t,n){var i=this;return null==n&&(n=r),null==t?i.off(e):n===r?i.off(e,t._jq_wrap):i.off(e,t,n._jq_wrap)}),e.defn(c,"$serialize_array",function(){var e,t,n,i=this;return(e=(t=i.serializeArray()).$map,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),f.get("Hash").$new(e)},n.$$s=i,n),e).call(t)}),e.alias(c,"size","length"),e.defn(c,"$value",function(){var e=this;return e.val()||""}),e.defn(c,"$height",function(){var e=this;return e.height()||r}),e.defn(c,"$width",function(){var e=this;return e.width()||r}),e.defn(c,"$position",function(){var e=this;return e.$Native(e.position())}),r&&"position"}(n.base,n.get("JQUERY_CLASS").$to_n())},Opal.modules["opal/jquery/window"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,a=e.gvars;return e.add_stubs(["$require","$include","$find","$on","$to_proc","$element","$off","$trigger","$new"]),t.$require("opal/jquery/element"),function(t){var n,a=n=i(t,"Browser"),s=(a.$$proto,a.$$scope);!function(t,$super){function n(){}var i,a,s=n=o(t,$super,"Window",n),l=s.$$proto,$=s.$$scope;return l.element=r,s.$include($.get("Native")),e.defn(s,"$element",function(){var e,t=this;return(e=t.element)!==!1&&e!==r?e:t.element=$.get("Element").$find(window)}),e.defn(s,"$on",i=function(){var t,n,o=this,a=i.$$p,s=a||r,l=r,$=arguments.length-0;0>$&&($=0);var u=new Array($);for(l=0;$>l;l++)u[l]=arguments[l+0];return i.$$p=null,(t=(n=o.$element()).$on,t.$$p=s.$to_proc(),t).apply(n,e.to_a(u))}),e.defn(s,"$off",a=function(){var t,n,i=this,o=a.$$p,s=o||r,l=r,$=arguments.length-0;0>$&&($=0);var u=new Array($);for(l=0;$>l;l++)u[l]=arguments[l+0];return a.$$p=null,(t=(n=i.$element()).$off,t.$$p=s.$to_proc(),t).apply(n,e.to_a(u))}),e.defn(s,"$trigger",function(){var t,n=this,i=r,o=arguments.length-0;0>o&&(o=0);var a=new Array(o);for(i=0;o>i;i++)a[i]=arguments[i+0];return(t=n.$element()).$trigger.apply(t,e.to_a(a))}),r&&"trigger"}(s.base,null)}(n.base),e.cdecl(n,"Window",n.get("Browser").$$scope.get("Window").$new(window)),a.window=n.get("Window")},Opal.modules["opal/jquery/document"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,i=(e.breaker,e.slice,e.module),o=e.gvars;return e.add_stubs(["$require","$to_n","$call","$new","$ready?","$resolve","$module_function","$find","$extend"]),t.$require("opal/jquery/constants"),t.$require("opal/jquery/element"),function(t){var n,o=n=i(t,"Browser"),a=(o.$$proto,o.$$scope);!function(t){var n,o,a,s,l,$=n=i(t,"DocumentMethods"),u=($.$$proto,$.$$scope),c=u.get("JQUERY_SELECTOR").$to_n();e.defn($,"$ready?",o=function(){var t,n,i=o.$$p,a=i||r;return o.$$p=null,a!==r?(t=null==(n=e.cvars["@@__isReady"])?r:n)===r||t.$$is_boolean&&1!=t?c(a):a.$call():r}),e.defn($,"$ready",function(){var e,t,n,i=this,o=r;return o=u.get("Promise").$new(),(e=(t=u.get("Document"))["$ready?"],e.$$p=(n=function(){n.$$s||this;return o.$resolve()},n.$$s=i,n),e).call(t),o}),$.$module_function("ready?"),(a=(s=$)["$ready?"],a.$$p=(l=function(){l.$$s||this;return e.cvars["@@__isReady"]=!0},l.$$s=$,l),a).call(s),e.defn($,"$title",function(){return document.title}),e.defn($,"$title=",function(e){return document.title=e}),e.defn($,"$head",function(){return u.get("Element").$find(document.head)}),e.defn($,"$body",function(){return u.get("Element").$find(document.body)})}(a.base)}(n.base),e.cdecl(n,"Document",n.get("Element").$find(document)),n.get("Document").$extend(n.get("Browser").$$scope.get("DocumentMethods")),o.document=n.get("Document")},Opal.modules["opal/jquery/event"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,i=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$to_n","$stop","$prevent"]),t.$require("opal/jquery/constants"),function(t,$super){function n(){}var o=n=i(t,$super,"Event",n),a=o.$$proto,s=o.$$scope;a["native"]=r;var l=s.get("JQUERY_SELECTOR").$to_n();return e.defn(o,"$initialize",function(e){var t=this;return t["native"]=e}),e.defn(o,"$to_n",function(){var e=this;return e["native"]}),e.defn(o,"$[]",function(e){var t=this;return t["native"][e]}),e.defn(o,"$type",function(){var e=this;return e["native"].type}),e.defn(o,"$element",function(){var e=this;return l(e["native"].currentTarget)}),e.alias(o,"current_target","element"),e.defn(o,"$target",function(){var e=this;return l(e["native"].target)}),e.defn(o,"$prevented?",function(){var e=this;return e["native"].isDefaultPrevented()}),e.defn(o,"$prevent",function(){var e=this;return e["native"].preventDefault()}),e.defn(o,"$stopped?",function(){var e=this;return e["native"].isPropagationStopped()}),e.defn(o,"$stop",function(){var e=this;return e["native"].stopPropagation()}),e.defn(o,"$stop_immediate",function(){var e=this;return e["native"].stopImmediatePropagation()}),e.defn(o,"$kill",function(){var e=this;return e.$stop(),e.$prevent()}),e.defn(o,"$page_x",function(){var e=this;return e["native"].pageX}),e.defn(o,"$page_y",function(){var e=this;return e["native"].pageY}),e.defn(o,"$touch_x",function(){var e=this;return e["native"].originalEvent.touches[0].pageX}),e.defn(o,"$touch_y",function(){var e=this;return e["native"].originalEvent.touches[0].pageY}),e.defn(o,"$ctrl_key",function(){var e=this;return e["native"].ctrlKey}),e.defn(o,"$meta_key",function(){var e=this;return e["native"].metaKey}),e.defn(o,"$alt_key",function(){var e=this;return e["native"].altKey}),e.defn(o,"$shift_key",function(){var e=this;return e["native"].shiftKey}),e.defn(o,"$key_code",function(){var e=this;return e["native"].keyCode}),e.defn(o,"$which",function(){var e=this;return e["native"].which}),e.alias(o,"default_prevented?","prevented?"),e.alias(o,"prevent_default","prevent"),e.alias(o,"propagation_stopped?","stopped?"),e.alias(o,"stop_propagation","stop"),e.alias(o,"stop_immediate_propagation","stop_immediate")}(n.base,null)},Opal.modules.json=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),i=e.hash2,o=e.klass;return e.add_stubs(["$new","$push","$[]=","$[]","$create_id","$json_create","$attr_accessor","$create_id=","$===","$parse","$generate","$from_object","$merge","$to_json","$responds_to?","$to_io","$write","$to_s","$to_a","$strftime"]),function(t){function o(t,r){var i,a,s,l,$,c;switch(typeof t){case"string":return t;case"number":return t;case"boolean":return!!t;case"null":return n;case"object":if(!t)return n;if(t.$$is_array){for(a=r.array_class.$new(),l=0,$=t.length;$>l;l++)a.$push(o(t[l],r));return a}s=r.object_class.$new();for(c in t)f.call(t,c)&&s["$[]="](c,o(t[c],r));return r.parse||(i=s["$[]"](u.get("JSON").$create_id()))==n?s:(i=e.get(i),i.$json_create(s))}}var a,s,l,$=a=r(t,"JSON"),u=($.$$proto,$.$$scope),c=JSON.parse,f=e.hasOwnProperty;!function(e){e.$$scope,e.$$proto;return e.$attr_accessor("create_id")}(e.get_singleton_class($)),s=["json_class"],l=$,l["$create_id="].apply(l,s),s[s.length-1],e.defs($,"$[]",function(e,t){var r,o=this;return null==t&&(t=i([],{})),(r=u.get("String")["$==="](e))===n||r.$$is_boolean&&1!=r?o.$generate(e,t):o.$parse(e,t)}),e.defs($,"$parse",function(e,t){var n=this;return null==t&&(t=i([],{})),n.$from_object(c(e),t.$merge(i(["parse"],{parse:!0})))}),e.defs($,"$parse!",function(e,t){var n=this;return null==t&&(t=i([],{})),n.$parse(e,t)}),e.defs($,"$load",function(e,t){var n=this;return null==t&&(t=i([],{})),n.$from_object(c(e),t)}),e.defs($,"$from_object",function(e,t){var r,a,s;return null==t&&(t=i([],{})),r="object_class",a=t,(s=a["$[]"](r))!==!1&&s!==n?s:a["$[]="](r,u.get("Hash")),r="array_class",a=t,(s=a["$[]"](r))!==!1&&s!==n?s:a["$[]="](r,u.get("Array")),o(e,t.$$smap)}),e.defs($,"$generate",function(e,t){return null==t&&(t=i([],{})),e.$to_json(t)}),e.defs($,"$dump",function(e,t,r){var i,o=this,a=n;return null==t&&(t=n),null==r&&(r=n),a=o.$generate(e),t!==!1&&t!==n?((i=t["$responds_to?"]("to_io"))===n||i.$$is_boolean&&1!=i||(t=t.$to_io()),t.$write(a),t):a})}(t.base),function(t,$super){function r(){}var i=r=o(t,$super,"Object",r);i.$$proto,i.$$scope;return e.defn(i,"$to_json",function(){var e=this;return e.$to_s().$to_json()}),n&&"to_json"}(t.base,null),function(t){var n,i=n=r(t,"Enumerable");i.$$proto,i.$$scope;e.defn(i,"$to_json",function(){var e=this;return e.$to_a().$to_json()})}(t.base),function(t,$super){function r(){}var i=r=o(t,$super,"Array",r);i.$$proto,i.$$scope;return e.defn(i,"$to_json",function(){for(var e=this,t=[],n=0,r=e.length;r>n;n++)t.push(e[n].$to_json());return"["+t.join(", ")+"]"}),n&&"to_json"}(t.base,null),function(t,$super){function r(){}var i=r=o(t,$super,"Boolean",r);i.$$proto,i.$$scope;return e.defn(i,"$to_json",function(){var e=this;return 1==e?"true":"false"}),n&&"to_json"}(t.base,null),function(t,$super){function r(){}var i=r=o(t,$super,"Hash",r);i.$$proto,i.$$scope;return e.defn(i,"$to_json",function(){for(var e,t,n=this,r=[],i=0,o=n.$$keys,a=o.length;a>i;i++)e=o[i],e.$$is_string?t=n.$$smap[e]:(t=e.value,e=e.key),r.push(e.$to_s().$to_json()+":"+t.$to_json());return"{"+r.join(", ")+"}"}),n&&"to_json"}(t.base,null),function(t,$super){function r(){}var i=r=o(t,$super,"NilClass",r);i.$$proto,i.$$scope;return e.defn(i,"$to_json",function(){return"null"}),n&&"to_json"}(t.base,null),function(t,$super){function r(){}var i=r=o(t,$super,"Numeric",r);i.$$proto,i.$$scope;return e.defn(i,"$to_json",function(){var e=this;return e.toString()}),n&&"to_json"}(t.base,null),function(t,$super){function n(){}var r=n=o(t,$super,"String",n);r.$$proto,r.$$scope;return e.alias(r,"to_json","inspect")}(t.base,null),function(t,$super){function r(){}var i=r=o(t,$super,"Time",r);i.$$proto,i.$$scope;return e.defn(i,"$to_json",function(){var e=this;return e.$strftime("%FT%T%z").$to_json()}),n&&"to_json"}(t.base,null),function(t,$super){function r(){}var i=r=o(t,$super,"Date",r);i.$$proto,i.$$scope;return e.defn(i,"$to_json",function(){var e=this;return e.$to_s().$to_json()}),e.defn(i,"$as_json",function(){var e=this;return e.$to_s()}),n&&"as_json"}(t.base,null)},Opal.modules.promise=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var i=(e.top,e),o=e.nil,a=(e.breaker,e.slice,e.klass),s=e.hash2;return e.add_stubs(["$resolve","$new","$reject","$attr_reader","$===","$value","$has_key?","$keys","$!","$==","$<<","$>>","$exception?","$[]","$resolved?","$rejected?","$error","$include?","$action","$realized?","$raise","$^","$call","$resolve!","$exception!","$reject!","$class","$object_id","$+","$inspect","$act?","$nil?","$prev","$push","$concat","$it","$lambda","$reverse","$pop","$<=","$length","$shift","$-","$each","$wait","$then","$to_proc","$map","$reduce","$always","$try","$tap","$all?","$find"]),function(i,$super){function l(){}var $,u,c,f,d=l=a(i,$super,"Promise",l),p=d.$$proto,h=d.$$scope;return p.value=p.action=p.exception=p.realized=p.delayed=p.error=p.prev=p.next=o,e.defs(d,"$value",function(e){var t=this;return t.$new().$resolve(e)}),e.defs(d,"$error",function(e){var t=this;return t.$new().$reject(e)}),e.defs(d,"$when",function(){var e=o,t=arguments.length-0;0>t&&(t=0);var n=new Array(t);for(e=0;t>e;e++)n[e]=arguments[e+0];return h.get("When").$new(n)}),d.$attr_reader("error","prev","next"),e.defn(d,"$initialize",function(e){var t=this;return null==e&&(e=s([],{})),t.action=e,t.realized=!1,t.exception=!1,t.value=o,t.error=o,t.delayed=!1,t.prev=o,t.next=o}),e.defn(d,"$value",function(){var e,t=this;return(e=h.get("Promise")["$==="](t.value))===o||e.$$is_boolean&&1!=e?t.value:t.value.$value()}),e.defn(d,"$act?",function(){var e,t=this;return(e=t.action["$has_key?"]("success"))!==!1&&e!==o?e:t.action["$has_key?"]("always")}),e.defn(d,"$action",function(){var e=this;return e.action.$keys()}),e.defn(d,"$exception?",function(){var e=this;return e.exception}),e.defn(d,"$realized?",function(){var e=this;return e.realized["$!"]()["$!"]()}),e.defn(d,"$resolved?",function(){var e=this;return e.realized["$=="]("resolve")}),e.defn(d,"$rejected?",function(){var e=this;return e.realized["$=="]("reject")}),e.defn(d,"$^",function(e){var t=this;return e["$<<"](t),t["$>>"](e),e}),e.defn(d,"$<<",function(e){var t=this;return t.prev=e,t}),e.defn(d,"$>>",function(e){var t,n,r,i=this;return i.next=e,(t=i["$exception?"]())===o||t.$$is_boolean&&1!=t?(t=i["$resolved?"]())===o||t.$$is_boolean&&1!=t?(t=i["$rejected?"]())===o||t.$$is_boolean&&1!=t||((t=(n=i.action["$has_key?"]("failure")["$!"]())!==!1&&n!==o?n:h.get("Promise")["$==="](function(){return(r=i.delayed)===o||r.$$is_boolean&&1!=r?i.error:i.delayed["$[]"](0)}()))===o||t.$$is_boolean&&1!=t?(t=e.$action()["$include?"]("always"))===o||t.$$is_boolean&&1!=t||e.$reject(function(){return(t=i.delayed)===o||t.$$is_boolean&&1!=t?i.$error():i.delayed["$[]"](0)}()):e.$reject(function(){return(t=i.delayed)===o||t.$$is_boolean&&1!=t?i.$error():i.delayed["$[]"](0)}())):e.$resolve(function(){return(t=i.delayed)===o||t.$$is_boolean&&1!=t?i.$value():i.delayed["$[]"](0)}()):e.$reject(i.delayed["$[]"](0)),i}),e.defn(d,"$resolve",function(t){var n,r,i=this,a=o,s=o;if(null==t&&(t=o),(n=i["$realized?"]())===o||n.$$is_boolean&&1!=n||i.$raise(h.get("ArgumentError"),"the promise has already been realized"),(n=h.get("Promise")["$==="](t))!==o&&(!n.$$is_boolean||1==n))return t["$<<"](i.prev)["$^"](i);try{(n=a=(r=i.action["$[]"]("success"))!==!1&&r!==o?r:i.action["$[]"]("always"))===o||n.$$is_boolean&&1!=n||(t=a.$call(t)),i["$resolve!"](t)}catch(l){if(!e.rescue(l,[h.get("Exception")]))throw l;s=l;try{i["$exception!"](s)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return i}),e.defn(d,"$resolve!",function(e){var t,n=this;return n.realized="resolve",n.value=e,(t=n.next)===o||t.$$is_boolean&&1!=t?n.delayed=[e]:n.next.$resolve(e)}),e.defn(d,"$reject",function(t){var n,r,i=this,a=o,s=o;if(null==t&&(t=o),(n=i["$realized?"]())===o||n.$$is_boolean&&1!=n||i.$raise(h.get("ArgumentError"),"the promise has already been realized"),(n=h.get("Promise")["$==="](t))!==o&&(!n.$$is_boolean||1==n))return t["$<<"](i.prev)["$^"](i);try{(n=a=(r=i.action["$[]"]("failure"))!==!1&&r!==o?r:i.action["$[]"]("always"))===o||n.$$is_boolean&&1!=n||(t=a.$call(t)),(n=i.action["$has_key?"]("always"))===o||n.$$is_boolean&&1!=n?i["$reject!"](t):i["$resolve!"](t)}catch(l){if(!e.rescue(l,[h.get("Exception")]))throw l;s=l;try{i["$exception!"](s)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return i}),e.defn(d,"$reject!",function(e){var t,n=this;return n.realized="reject",n.error=e,(t=n.next)===o||t.$$is_boolean&&1!=t?n.delayed=[e]:n.next.$reject(e)}),e.defn(d,"$exception!",function(e){var t=this;return t.exception=!0,t["$reject!"](e)}),e.defn(d,"$then",$=function(){var e,t=this,n=$.$$p,r=n||o;return $.$$p=null,(e=t.next)===o||e.$$is_boolean&&1!=e||t.$raise(h.get("ArgumentError"),"a promise has already been chained"),t["$^"](h.get("Promise").$new(s(["success"],{success:r})))}),e.alias(d,"do","then"),e.defn(d,"$fail",u=function(){var e,t=this,n=u.$$p,r=n||o;return u.$$p=null,(e=t.next)===o||e.$$is_boolean&&1!=e||t.$raise(h.get("ArgumentError"),"a promise has already been chained"),t["$^"](h.get("Promise").$new(s(["failure"],{failure:r})))}),e.alias(d,"rescue","fail"),e.alias(d,"catch","fail"),e.defn(d,"$always",c=function(){var e,t=this,n=c.$$p,r=n||o;return c.$$p=null,(e=t.next)===o||e.$$is_boolean&&1!=e||t.$raise(h.get("ArgumentError"),"a promise has already been chained"),t["$^"](h.get("Promise").$new(s(["always"],{always:r})))}),e.alias(d,"finally","always"),e.alias(d,"ensure","always"),e.defn(d,"$trace",f=function(e){var t,n=this,r=f.$$p,i=r||o;return null==e&&(e=o),f.$$p=null,(t=n.next)===o||t.$$is_boolean&&1!=t||n.$raise(h.get("ArgumentError"),"a promise has already been chained"),n["$^"](h.get("Trace").$new(e,i))}),e.defn(d,"$inspect",function(){var e,n=this,r=o;return r="#<"+n.$class()+"("+n.$object_id()+")",(e=n.next)===o||e.$$is_boolean&&1!=e||(r=t(r," >> "+n.next.$inspect())),r=(e=n["$realized?"]())===o||e.$$is_boolean&&1!=e?t(r,">"):t(r,": "+((e=n.value)!==!1&&e!==o?e:n.error).$inspect()+">")}),function(t,$super){function i(){}var l,$=i=a(t,$super,"Trace",i),u=($.$$proto,$.$$scope);return e.defs($,"$it",function(e){var t,n,r=this,i=o,a=o;return i=[],(t=(n=e["$act?"]())!==!1&&n!==o?n:e.$prev()["$nil?"]())===o||t.$$is_boolean&&1!=t||i.$push(e.$value()),(t=a=e.$prev())===o||t.$$is_boolean&&1!=t?i:i.$concat(r.$it(a))}),e.defn($,"$initialize",l=function(t,i){var a,$,c,f=this;l.$$p;return l.$$p=null,f.depth=t,e.find_super_dispatcher(f,"initialize",l,null).apply(f,[s(["success"],{success:(a=($=f).$lambda,a.$$p=(c=function(){var a,s,l=c.$$s||this,$=o;return $=u.get("Trace").$it(l).$reverse(),$.$pop(),(a=(s=t!==!1&&t!==o)?n(t,$.$length()):t)===o||a.$$is_boolean&&1!=a||$.$shift(r($.$length(),t)),(a=i).$call.apply(a,e.to_a($))},c.$$s=f,c),a).call($)})])}),o&&"initialize"}(h.base,d),function(t,$super){function n(){}var r,i,s,l,$,u=n=a(t,$super,"When",n),c=u.$$proto,f=u.$$scope;return c.wait=o,e.defn(u,"$initialize",r=function(t){var n,i,a,s=this;r.$$p;return null==t&&(t=[]),r.$$p=null,e.find_super_dispatcher(s,"initialize",r,null).apply(s,[]),s.wait=[],(n=(i=t).$each,n.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=o),t.$wait(e)},a.$$s=s,a),n).call(i)}),e.defn(u,"$each",i=function(){var e,t,n,r=this,a=i.$$p,s=a||o;return i.$$p=null,s!==!1&&s!==o||r.$raise(f.get("ArgumentError"),"no block given"),(e=(t=r).$then,e.$$p=(n=function(e){var t,r;n.$$s||this;return null==e&&(e=o),(t=(r=e).$each,t.$$p=s.$to_proc(),t).call(r)},n.$$s=r,n),e).call(t)}),e.defn(u,"$collect",s=function(){var e,t,n,r=this,i=s.$$p,a=i||o;return s.$$p=null,a!==!1&&a!==o||r.$raise(f.get("ArgumentError"),"no block given"),(e=(t=r).$then,e.$$p=(n=function(e){var t,r;n.$$s||this;return null==e&&(e=o),f.get("When").$new((t=(r=e).$map,t.$$p=a.$to_proc(),t).call(r))},n.$$s=r,n),e).call(t)}),e.defn(u,"$inject",l=function(){var t,n,r,i=this,a=l.$$p,s=a||o,$=o,u=arguments.length-0;0>u&&(u=0);var c=new Array(u);for($=0;u>$;$++)c[$]=arguments[$+0];return l.$$p=null,(t=(n=i).$then,t.$$p=(r=function(t){var n,i;r.$$s||this;return null==t&&(t=o),(n=(i=t).$reduce,n.$$p=s.$to_proc(),n).apply(i,e.to_a(c))},r.$$s=i,r),t).call(n)}),e.alias(u,"map","collect"),e.alias(u,"reduce","inject"),e.defn(u,"$wait",function(e){var t,n,r,i=this;return((t=f.get("Promise")["$==="](e))===o||t.$$is_boolean&&1!=t)&&(e=f.get("Promise").$value(e)),(t=e["$act?"]())===o||t.$$is_boolean&&1!=t||(e=e.$then()),i.wait["$<<"](e),(t=(n=e).$always,t.$$p=(r=function(){var e,t=r.$$s||this;return null==t.next&&(t.next=o),(e=t.next)===o||e.$$is_boolean&&1!=e?o:t.$try()},r.$$s=i,r),t).call(n),i}),e.alias(u,"and","wait"),e.defn(u,"$>>",$=function(){var t,n,r,i=this,a=$.$$p,s=o,l=o;for($.$$p=null,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return(t=(n=e.find_super_dispatcher(i,">>",$,a).apply(i,s)).$tap,t.$$p=(r=function(){var e=r.$$s||this;return e.$try()},r.$$s=i,r),t).call(n)}),e.defn(u,"$try",function(){var e,t,n,r,i=this,a=o;return(e=(t=(n=i.wait)["$all?"],t.$$p="realized?".$to_proc(),t).call(n))===o||e.$$is_boolean&&1!=e?o:(e=a=(t=(r=i.wait).$find,t.$$p="rejected?".$to_proc(),t).call(r))===o||e.$$is_boolean&&1!=e?i.$resolve((e=(t=i.wait).$map,e.$$p="value".$to_proc(),e).call(t)):i.$reject(a.$error())}),o&&"try"}(h.base,d)}(i.base,null)},Opal.modules["opal/jquery/http"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,i=(e.breaker,e.slice,e.klass),o=e.hash2;return e.add_stubs(["$require","$to_n","$each","$define_singleton_method","$send","$new","$define_method","$attr_reader","$delete","$update","$upcase","$succeed","$fail","$promise","$parse","$private","$tap","$proc","$ok?","$resolve","$reject","$from_object","$call"]),t.$require("json"),t.$require("native"),t.$require("promise"),t.$require("opal/jquery/constants"),function(t,$super){function n(){}var a,s,l,$=n=i(t,$super,"HTTP",n),u=$.$$proto,c=$.$$scope;u.settings=u.payload=u.url=u.method=u.handler=u.json=u.body=u.ok=u.xhr=u.promise=u.status_code=r;var f=c.get("JQUERY_SELECTOR").$to_n();return e.cdecl(c,"ACTIONS",["get","post","put","delete","patch","head"]),(a=(s=c.get("ACTIONS")).$each,a.$$p=(l=function(e){var t,n,i,a,s,$=l.$$s||this;return null==e&&(e=r),(t=(n=$).$define_singleton_method,t.$$p=(i=function(t,n){var a,s=i.$$s||this;return null==t&&(t=r),null==n&&(n=o([],{})),a=i.$$p||r,i.$$p=null,s.$new().$send(e,t,n,a)},i.$$s=$,i),t).call(n,e),(t=(a=$).$define_method,t.$$p=(s=function(t,n){var i,a=s.$$s||this;return null==t&&(t=r),null==n&&(n=o([],{})),i=s.$$p||r,s.$$p=null,a.$send(e,t,n,i)},s.$$s=$,s),t).call(a,e)},l.$$s=$,l),a).call(s),e.defs($,"$setup",function(){return c.get("Hash").$new(f.ajaxSetup())}),e.defs($,"$setup=",function(e){return f.ajaxSetup(e.$to_n())}),$.$attr_reader("body","error_message","method","status_code","url","xhr"),e.defn($,"$initialize",function(){var e=this;return e.settings=o([],{}),e.ok=!0}),e.defn($,"$send",function(e,t,n,i){var o,a=this,s=r,l=r;return a.method=e,a.url=t,a.payload=n.$delete("payload"),a.handler=i,a.settings.$update(n),o=[a.settings.$to_n(),a.payload],s=o[0],l=o[1],o,"string"==typeof l?s.data=l:l!=r&&(s.data=l.$to_json(),s.contentType="application/json"),s.url=a.url,s.type=a.method.$upcase(),s.success=function(e,t,n){return a.$succeed(e,t,n)},s.error=function(e,t,n){return a.$fail(e,t,n)},f.ajax(s),(o=a.handler)===r||o.$$is_boolean&&1!=o?a.$promise():a}),e.defn($,"$json",function(){var e,t=this;return(e=t.json)!==!1&&e!==r?e:t.json=c.get("JSON").$parse(t.body)}),e.defn($,"$ok?",function(){var e=this;return e.ok}),e.defn($,"$get_header",function(e){var t=this;return t.xhr.getResponseHeader(e)}),$.$private(),e.defn($,"$promise",function(){var e,t,n,i=this;return(e=i.promise)===r||e.$$is_boolean&&1!=e?i.promise=(e=(t=c.get("Promise").$new()).$tap,e.$$p=(n=function(e){var t,i,o,a=n.$$s||this;return null==e&&(e=r),a.handler=(t=(i=a).$proc,t.$$p=(o=function(t){var n;o.$$s||this;return null==t&&(t=r),(n=t["$ok?"]())===r||n.$$is_boolean&&1!=n?e.$reject(t):e.$resolve(t)},o.$$s=a,o),t).call(i)},n.$$s=i,n),e).call(t):i.promise}),e.defn($,"$succeed",function(e,t,n){var i,o=this;return o.body=e,o.xhr=n,o.status_code=n.status,"object"==typeof e&&(o.json=c.get("JSON").$from_object(e)),(i=o.handler)===r||i.$$is_boolean&&1!=i?r:o.handler.$call(o)}),e.defn($,"$fail",function(e,t,n){var i,o=this;return o.body=e.responseText,o.xhr=e,o.status_code=e.status,o.ok=!1,(i=o.handler)===r||i.$$is_boolean&&1!=i?r:o.handler.$call(o)}),r&&"fail"}(n.base,null)},Opal.modules["opal/jquery/kernel"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module);return function(t){var i,o=i=r(t,"Kernel");o.$$proto,o.$$scope;e.defn(o,"$alert",function(e){return alert(e),n})}(t.base)},Opal.modules["opal/jquery"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e;e.nil,e.breaker,e.slice;return e.add_stubs(["$==","$require"]),n.get("RUBY_ENGINE")["$=="]("opal")?(t.$require("opal/jquery/window"),t.$require("opal/jquery/document"),t.$require("opal/jquery/element"),t.$require("opal/jquery/event"),t.$require("opal/jquery/http"),t.$require("opal/jquery/kernel")):void 0},Opal.modules["opal-jquery"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("opal/jquery")},Opal.modules.try_opal=function(Opal){Opal.dynamic_require_severity="ignore";var OPAL_CONFIG={method_missing:!0,arity_check:!1,freezing:!0,tainting:!0},$a,$b,TMP_11,self=Opal.top,$scope=Opal,nil=Opal.nil,$breaker=Opal.breaker,$slice=Opal.slice,$klass=Opal.klass,$hash2=Opal.hash2,$range=Opal.range,$gvars=Opal.gvars;return Opal.add_stubs(["$require","$to_n","$new","$lambda","$run_code","$on","$find","$value=","$=~","$[]","$strip","$value","$eval_code","$puts","$log_error","$<<","$join","$ready?","$write_proc=","$proc","$print_to_output","$instance"]),self.$require("opal"),self.$require("opal-jquery"),Opal.cdecl($scope,"DEFAULT_TRY_CODE",'"Hello, " ++ "world!"\n'),function($base,$super){function $TryOpal(){}var self=$TryOpal=$klass($base,$super,"TryOpal",$TryOpal),def=self.$$proto,$scope=self.$$scope;return def.editor=def.output=def.flush=nil,function(e,$super){function t(){}var n=t=$klass(e,$super,"Editor",t),r=n.$$proto;n.$$scope;return r["native"]=nil,Opal.defn(n,"$initialize",function(e,t){var n=this;return n["native"]=CodeMirror(document.getElementById(e),t.$to_n())}),Opal.defn(n,"$value=",function(e){var t=this;return t["native"].setValue(e)}),Opal.defn(n,"$value",function(){var e=this;return e["native"].getValue()}),nil&&"value"}($scope.base,null),Opal.defs(self,"$instance",function(){var e,t=this;return null==t.instance&&(t.instance=nil),(e=t.instance)!==!1&&e!==nil?e:t.instance=t.$new()}),Opal.defn(self,"$initialize",function(){var e,t,n,r,i,o,a,s,l,$,u,c,f,d,p,h,g,v,m,_,y,b,w=this,x=nil,k=nil;return w.flush=[],w.output=$scope.get("Editor").$new("output",$hash2(["lineNumbers","mode","readOnly"],{lineNumbers:!1,mode:"javascript",readOnly:!0})),w.editor=$scope.get("Editor").$new("editor",$hash2(["lineNumbers","mode","tabMode","theme","extraKeys"],{lineNumbers:!0,mode:"fun",tabMode:"shift",theme:"tomorrow-night-eighties",extraKeys:$hash2(["Cmd-Enter"],{"Cmd-Enter":(e=(t=w).$lambda,e.$$p=(n=function(){var e=n.$$s||this;return e.$run_code()},n.$$s=w,n),e).call(t)})})),(e=(r=$scope.get("Element").$find("#run_code")).$on,e.$$p=(i=function(){var e=i.$$s||this;return e.$run_code()},i.$$s=w,i),e).call(r,"click"),x=EXAMPLES,(e=(o=$scope.get("Element").$find("#action-hoas")).$on,e.$$p=(a=function(){var e,t,n=a.$$s||this;return null==n.editor&&(n.editor=nil),e=[x.hoas],t=n.editor,t["$value="].apply(t,e),e[e.length-1]},a.$$s=w,a),e).call(o,"click"),(e=(s=$scope.get("Element").$find("#action-functor")).$on,e.$$p=(l=function(){var e,t,n=l.$$s||this;return null==n.editor&&(n.editor=nil),e=[x.functor],t=n.editor,t["$value="].apply(t,e),e[e.length-1]},l.$$s=w,l),e).call(s,"click"),(e=($=$scope.get("Element").$find("#action-kind")).$on,e.$$p=(u=function(){var e,t,n=u.$$s||this;return null==n.editor&&(n.editor=nil),e=[x.kindPoly],t=n.editor,t["$value="].apply(t,e),e[e.length-1]},u.$$s=w,u),e).call($,"click"),(e=(c=$scope.get("Element").$find("#action-tree")).$on,e.$$p=(f=function(){var e,t,n=f.$$s||this;return null==n.editor&&(n.editor=nil),e=[x.ptree],t=n.editor,t["$value="].apply(t,e),e[e.length-1]},f.$$s=w,f),e).call(c,"click"),(e=(d=$scope.get("Element").$find("#action-vector")).$on,e.$$p=(p=function(){var e,t,n=p.$$s||this;return null==n.editor&&(n.editor=nil),e=[x.vector],t=n.editor,t["$value="].apply(t,e),e[e.length-1]},p.$$s=w,p),e).call(d,"click"),(e=(h=$scope.get("Element").$find("#action-fact")).$on,e.$$p=(g=function(){var e,t,n=g.$$s||this;return null==n.editor&&(n.editor=nil),e=[x.fact],t=n.editor,t["$value="].apply(t,e),e[e.length-1]},g.$$s=w,g),e).call(h,"click"),(e=(v=$scope.get("Element").$find("#action-mutual")).$on,e.$$p=(m=function(){var e,t,n=m.$$s||this;return null==n.editor&&(n.editor=nil),e=[x.mutual],t=n.editor,t["$value="].apply(t,e),e[e.length-1]},m.$$s=w,m),e).call(v,"click"),(e=(_=$scope.get("Element").$find("#action-list")).$on,e.$$p=(y=function(){var e,t,n=y.$$s||this;return null==n.editor&&(n.editor=nil),e=[x.polyList],t=n.editor,t["$value="].apply(t,e),e[e.length-1]},y.$$s=w,y),e).call(_,"click"),k=decodeURIComponent(location.hash||location.search),(e=k["$=~"](/^[#?]code:/))===nil||e.$$is_boolean&&1!=e?(e=[$scope.get("DEFAULT_TRY_CODE").$strip()],b=w.editor,b["$value="].apply(b,e),e[e.length-1]):(e=[k["$[]"]($range(6,-1,!1))],b=w.editor,b["$value="].apply(b,e),e[e.length-1])}),Opal.defn(self,"$run_code",function(){var e,t,n=this,r=nil,i=nil;n.flush=[],e=[""],t=n.output,t["$value="].apply(t,e),e[e.length-1];try{r=funToJS(n.editor.$value()),null==r.err?n.$eval_code(r.ret,r.type):(plain=stripAnsi(r.err),n.$puts(plain))}catch(o){i=o;try{return n.$log_error(i)}finally{Opal.gvars["!"]=Opal.exceptions.pop()||Opal.nil}}}),Opal.defn(self,"$eval_code",function(js_code,type){var self=this;return self.$puts(""+eval(js_code)+"\n: "+type)}),Opal.defn(self,"$log_error",function(e){var t=this;return t.$puts(""+e+"\n"+e.stack)}),Opal.defn(self,"$print_to_output",function(e){var t,n,r=this;return r.flush["$<<"](e),
t=[r.flush.$join("")],n=r.output,n["$value="].apply(n,t),t[t.length-1]}),nil&&"print_to_output"}($scope.base,null),($a=($b=$scope.get("Document"))["$ready?"],$a.$$p=(TMP_11=function(){var e,t,n,r,i,o,a,s=TMP_11.$$s||this;return null==$gvars.stderr&&($gvars.stderr=nil),null==$gvars.stdout&&($gvars.stdout=nil),e=[(n=[(i=(o=s).$proc,i.$$p=(a=function(e){a.$$s||this;return null==e&&(e=nil),$scope.get("TryOpal").$instance().$print_to_output(e)},a.$$s=s,a),i).call(o)],r=$gvars.stderr,r["$write_proc="].apply(r,n),n[n.length-1])],t=$gvars.stdout,t["$write_proc="].apply(t,e),e[e.length-1],$scope.get("TryOpal").$instance().$eval_code('"Click run button to execute"',"()")},TMP_11.$$s=self,TMP_11),$a).call($b)};